import{r as U,c as Si,j as Ae,R as hr}from"./index-ZFMuFutx.js";import{a as ot,u as Xt,V as Ge,_ as Pt,D as bn,O as dr,P as Fr,b as Bt,R as ua,T as Di,c as Yn,d as Fo,e as sr,I as Ii,S as Sr,f as Ri,g as _i,E as Gi,h as Cr,i as yr,Q as pr,j as ka,L as fa,k as jr,F as or,l as wt,m as Ui,n as Li,o as Oi,p as ur,M as Qt,q as ki,r as xo,s as wo,t as Pi,v as Hi,B as Kr,w as Ni,x as yt,y as So,z as Vn,A as Ji,G as Un,H as ji,J as Do,K as Ki,N as Io,U as Wi,W as zi,X as Xi,Y as Qi,Z as Yi,$ as Ln,a0 as Wr,a1 as Vi,a2 as Zi,a3 as qi,a4 as Ro,a5 as ir,a6 as Zn,a7 as $i,a8 as es,a9 as ts,aa as qt,ab as rs,ac as ns,ad as as,ae as os,af as Wt,ag as Pa,ah as Ha,ai as Na,aj as Zr,ak as ha,al as is,am as _o,an as xt,ao as zt,ap as Tr,aq as Yr,ar as ss,as as Go,at as Uo,au as cs,av as ls,aw as us,ax as fs,ay as Ja,az as hs,aA as Dr,aB as ds,aC as gr,aD as Ar,aE as ps,aF as Lo,aG as An,aH as ms,aI as gs,aJ as qn,aK as As,aL as vs,aM as Bs,aN as Cs,aO as $n,aP as ys,aQ as ja,aR as bs,aS as Es,aT as Ms,aU as Ts,aV as Fs,aW as xs,aX as ws,aY as Oo,aZ as Ka,a_ as Ss,C as ko}from"./extends-GTOFh42u.js";import{u as Po}from"./use-in-view-d7FF4XhY.js";import{c as Ds,a as Is,b as Rs,i as _s,r as Gs,d as Us,e as Ls,f as Ho,g as Os,h as ks,j as Ps,p as Hs,s as Ns,V as Js,k as js,l as Ks,S as Ws,H as zs,v as vn,n as Xs,o as Qs,q as Ys,G as Vs,m as On}from"./proxy-CtJKuTqL.js";function Zs(l,e=100,n){const a=n({...l,keyframes:[0,e]}),r=Math.min(Ds(a),Is);return{type:"keyframes",ease:t=>a.next(r*t).value/e,duration:Rs(r)}}const qs=(l,e,n)=>{const a=e-l;return((n-l)%a+a)%a+l};function No(l,e){return _s(l)?l[qs(0,l.length,e)]:l}function da(l){return typeof l=="object"&&!Array.isArray(l)}function Jo(l,e,n,a){return typeof l=="string"&&da(e)?Gs(l,n,a):l instanceof NodeList?Array.from(l):Array.isArray(l)?l:[l]}function $s(l,e,n){return l*(e+1)}function Wa(l,e,n,a){var r;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,l+parseFloat(e)):e==="<"?n:(r=a.get(e))!==null&&r!==void 0?r:l}function ec(l,e,n){for(let a=0;a<l.length;a++){const r=l[a];r.at>e&&r.at<n&&(Ls(l,r),a--)}}function tc(l,e,n,a,r,t){ec(l,r,t);for(let o=0;o<e.length;o++)l.push({value:e[o],at:Us(r,t,a[o]),easing:No(n,o)})}function rc(l,e){for(let n=0;n<l.length;n++)l[n]=l[n]/(e+1)}function nc(l,e){return l.at===e.at?l.value===null?1:e.value===null?-1:0:l.at-e.at}const ac="easeInOut";function oc(l,{defaultTransition:e={},...n}={},a,r){const t=e.duration||.3,o=new Map,s=new Map,i={},c=new Map;let u=0,f=0,h=0;for(let d=0;d<l.length;d++){const m=l[d];if(typeof m=="string"){c.set(m,f);continue}else if(!Array.isArray(m)){c.set(m.name,Wa(f,m.at,u,c));continue}let[g,A,y={}]=m;y.at!==void 0&&(f=Wa(f,y.at,u,c));let B=0;const x=(M,b,C,T=0,E=0)=>{const F=ic(M),{delay:I=0,times:z=Os(F),type:D="keyframes",repeat:O,repeatType:_,repeatDelay:K=0,...N}=b;let{ease:ne=e.ease||"easeOut",duration:se}=b;const Z=typeof I=="function"?I(T,E):I,P=F.length,w=ks(D)?D:r==null?void 0:r[D];if(P<=2&&w){let k=100;if(P===2&&lc(F)){const q=F[1]-F[0];k=Math.abs(q)}const W={...N};se!==void 0&&(W.duration=Ns(se));const V=Zs(W,k,w);ne=V.ease,se=V.duration}se??(se=t);const G=f+Z;z.length===1&&z[0]===0&&(z[1]=1);const L=z.length-F.length;if(L>0&&Ps(z,L),F.length===1&&F.unshift(null),O){se=$s(se,O);const k=[...F],W=[...z];ne=Array.isArray(ne)?[...ne]:[ne];const V=[...ne];for(let q=0;q<O;q++){F.push(...k);for(let fe=0;fe<k.length;fe++)z.push(W[fe]+(q+1)),ne.push(fe===0?"linear":No(V,fe-1))}rc(z,O)}const J=G+se;tc(C,F,ne,z,G,J),B=Math.max(Z+se,B),h=Math.max(J,h)};if(Ho(g)){const M=za(g,s);x(A,y,Xa("default",M))}else{const M=Jo(g,A,a,i),b=M.length;for(let C=0;C<b;C++){A=A,y=y;const T=M[C],E=za(T,s);for(const F in A)x(A[F],sc(y,F),Xa(F,E),C,b)}}u=f,f+=B}return s.forEach((d,m)=>{for(const g in d){const A=d[g];A.sort(nc);const y=[],B=[],x=[];for(let b=0;b<A.length;b++){const{at:C,value:T,easing:E}=A[b];y.push(T),B.push(Hs(0,h,C)),x.push(E||"easeOut")}B[0]!==0&&(B.unshift(0),y.unshift(y[0]),x.unshift(ac)),B[B.length-1]!==1&&(B.push(1),y.push(null)),o.has(m)||o.set(m,{keyframes:{},transition:{}});const M=o.get(m);M.keyframes[g]=y,M.transition[g]={...e,duration:h,ease:x,times:B,...n}}}),o}function za(l,e){return!e.has(l)&&e.set(l,{}),e.get(l)}function Xa(l,e){return e[l]||(e[l]=[]),e[l]}function ic(l){return Array.isArray(l)?l:[l]}function sc(l,e){return l&&l[e]?{...l,...l[e]}:{...l}}const cc=l=>typeof l=="number",lc=l=>l.every(cc);function uc(l,e){return l in e}class fc extends Js{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if(uc(n,e)){const a=e[n];if(typeof a=="string"||typeof a=="number")return a}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return js()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function hc(l){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=Ks(l)?new Ws(e):new zs(e);n.mount(l),vn.set(l,n)}function dc(l){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new fc(e);n.mount(l),vn.set(l,n)}function pc(l,e){return Ho(l)||typeof l=="number"||typeof l=="string"&&!da(e)}function jo(l,e,n,a){const r=[];if(pc(l,e))r.push(Xs(l,da(e)&&e.default||e,n&&(n.default||n)));else{const t=Jo(l,e,a),o=t.length;for(let s=0;s<o;s++){const i=t[s],c=i instanceof Element?hc:dc;vn.has(i)||c(i);const u=vn.get(i),f={...n};"delay"in f&&typeof f.delay=="function"&&(f.delay=f.delay(s,o)),r.push(...Qs(u,{...e,transition:f},{}))}}return r}function mc(l,e,n){const a=[];return oc(l,e,n,{spring:Ys}).forEach(({keyframes:t,transition:o},s)=>{a.push(...jo(s,t,o))}),a}function gc(l){return Array.isArray(l)&&l.some(Array.isArray)}function Ac(l){function e(n,a,r){let t=[];return gc(n)?t=mc(n,a,l):t=jo(n,a,r,l),new Vs(t)}return e}const vc=Ac(),qr=new Ge,pa=new Ge,Bc=new Ge,Qa=new Bt;function Cc(l,e,n){const a=qr.setFromMatrixPosition(l.matrixWorld);a.project(e);const r=n.width/2,t=n.height/2;return[a.x*r+r,-(a.y*t)+t]}function yc(l,e){const n=qr.setFromMatrixPosition(l.matrixWorld),a=pa.setFromMatrixPosition(e.matrixWorld),r=n.sub(a),t=e.getWorldDirection(Bc);return r.angleTo(t)>Math.PI/2}function bc(l,e,n,a){const r=qr.setFromMatrixPosition(l.matrixWorld),t=r.clone();t.project(e),Qa.set(t.x,t.y),n.setFromCamera(Qa,e);const o=n.intersectObjects(a,!0);if(o.length){const s=o[0].distance;return r.distanceTo(n.ray.origin)<s}return!0}function Ec(l,e){if(e instanceof dr)return e.zoom;if(e instanceof Fr){const n=qr.setFromMatrixPosition(l.matrixWorld),a=pa.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,t=n.distanceTo(a);return 1/(2*Math.tan(r/2)*t)}else return 1}function Mc(l,e,n){if(e instanceof Fr||e instanceof dr){const a=qr.setFromMatrixPosition(l.matrixWorld),r=pa.setFromMatrixPosition(e.matrixWorld),t=a.distanceTo(r),o=(n[1]-n[0])/(e.far-e.near),s=n[1]-o*e.far;return Math.round(o*t+s)}}const ea=l=>Math.abs(l)<1e-10?0:l;function Ko(l,e,n=""){let a="matrix3d(";for(let r=0;r!==16;r++)a+=ea(e[r]*l.elements[r])+(r!==15?",":")");return n+a}const Tc=(l=>e=>Ko(e,l))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Fc=(l=>(e,n)=>Ko(e,l(n),"translate(-50%,-50%)"))(l=>[1/l,1/l,1/l,1,-1/l,-1/l,-1/l,-1,1/l,1/l,1/l,1,1,1,1,1]);function xc(l){return l&&typeof l=="object"&&"current"in l}const wc=U.forwardRef(({children:l,eps:e=.001,style:n,className:a,prepend:r,center:t,fullscreen:o,portal:s,distanceFactor:i,sprite:c=!1,transform:u=!1,occlude:f,onOcclude:h,castShadow:d,receiveShadow:m,material:g,geometry:A,zIndexRange:y=[16777271,0],calculatePosition:B=Cc,as:x="div",wrapperClass:M,pointerEvents:b="auto",...C},T)=>{const{gl:E,camera:F,scene:I,size:z,raycaster:D,events:O,viewport:_}=ot(),[K]=U.useState(()=>document.createElement(x)),N=U.useRef(),ne=U.useRef(null),se=U.useRef(0),Z=U.useRef([0,0]),P=U.useRef(null),w=U.useRef(null),G=(s==null?void 0:s.current)||O.connected||E.domElement.parentNode,L=U.useRef(null),J=U.useRef(!1),k=U.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&xc(f[0]),[f]);U.useLayoutEffect(()=>{const de=E.domElement;f&&f==="blending"?(de.style.zIndex=`${Math.floor(y[0]/2)}`,de.style.position="absolute",de.style.pointerEvents="none"):(de.style.zIndex=null,de.style.position=null,de.style.pointerEvents=null)},[f]),U.useLayoutEffect(()=>{if(ne.current){const de=N.current=Si(K);if(I.updateMatrixWorld(),u)K.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ee=B(ne.current,F,z);K.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ee[0]}px,${ee[1]}px,0);transform-origin:0 0;`}return G&&(r?G.prepend(K):G.appendChild(K)),()=>{G&&G.removeChild(K),de.unmount()}}},[G,u]),U.useLayoutEffect(()=>{M&&(K.className=M)},[M]);const W=U.useMemo(()=>u?{position:"absolute",top:0,left:0,width:z.width,height:z.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:t?"translate3d(-50%,-50%,0)":"none",...o&&{top:-z.height/2,left:-z.width/2,width:z.width,height:z.height},...n},[n,t,o,z,u]),V=U.useMemo(()=>({position:"absolute",pointerEvents:b}),[b]);U.useLayoutEffect(()=>{if(J.current=!1,u){var de;(de=N.current)==null||de.render(U.createElement("div",{ref:P,style:W},U.createElement("div",{ref:w,style:V},U.createElement("div",{ref:T,className:a,style:n,children:l}))))}else{var ee;(ee=N.current)==null||ee.render(U.createElement("div",{ref:T,style:W,className:a,children:l}))}});const q=U.useRef(!0);Xt(de=>{if(ne.current){F.updateMatrixWorld(),ne.current.updateWorldMatrix(!0,!1);const ee=u?Z.current:B(ne.current,F,z);if(u||Math.abs(se.current-F.zoom)>e||Math.abs(Z.current[0]-ee[0])>e||Math.abs(Z.current[1]-ee[1])>e){const re=yc(ne.current,F);let Ie=!1;k&&(Array.isArray(f)?Ie=f.map(ye=>ye.current):f!=="blending"&&(Ie=[I]));const Te=q.current;if(Ie){const ye=bc(ne.current,F,D,Ie);q.current=ye&&!re}else q.current=!re;Te!==q.current&&(h?h(!q.current):K.style.display=q.current?"block":"none");const me=Math.floor(y[0]/2),Ee=f?k?[y[0],me]:[me-1,0]:y;if(K.style.zIndex=`${Mc(ne.current,F,Ee)}`,u){const[ye,oe]=[z.width/2,z.height/2],Be=F.projectionMatrix.elements[5]*oe,{isOrthographicCamera:Ce,top:te,left:Ue,bottom:ge,right:be}=F,pe=Tc(F.matrixWorldInverse),ze=Ce?`scale(${Be})translate(${ea(-(be+Ue)/2)}px,${ea((te+ge)/2)}px)`:`translateZ(${Be}px)`;let ve=ne.current.matrixWorld;c&&(ve=F.matrixWorldInverse.clone().transpose().copyPosition(ve).scale(ne.current.scale),ve.elements[3]=ve.elements[7]=ve.elements[11]=0,ve.elements[15]=1),K.style.width=z.width+"px",K.style.height=z.height+"px",K.style.perspective=Ce?"":`${Be}px`,P.current&&w.current&&(P.current.style.transform=`${ze}${pe}translate(${ye}px,${oe}px)`,w.current.style.transform=Fc(ve,1/((i||10)/400)))}else{const ye=i===void 0?1:Ec(ne.current,F)*i;K.style.transform=`translate3d(${ee[0]}px,${ee[1]}px,0) scale(${ye})`}Z.current=ee,se.current=F.zoom}}if(!k&&L.current&&!J.current)if(u){if(P.current){const ee=P.current.children[0];if(ee!=null&&ee.clientWidth&&ee!=null&&ee.clientHeight){const{isOrthographicCamera:re}=F;if(re||A)C.scale&&(Array.isArray(C.scale)?C.scale instanceof Ge?L.current.scale.copy(C.scale.clone().divideScalar(1)):L.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):L.current.scale.setScalar(1/C.scale));else{const Ie=(i||10)/400,Te=ee.clientWidth*Ie,me=ee.clientHeight*Ie;L.current.scale.set(Te,me,1)}J.current=!0}}}else{const ee=K.children[0];if(ee!=null&&ee.clientWidth&&ee!=null&&ee.clientHeight){const re=1/_.factor,Ie=ee.clientWidth*re,Te=ee.clientHeight*re;L.current.scale.set(Ie,Te,1),J.current=!0}L.current.lookAt(de.camera.position)}});const fe=U.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return U.createElement("group",Pt({},C,{ref:ne}),f&&!k&&U.createElement("mesh",{castShadow:d,receiveShadow:m,ref:L},A||U.createElement("planeGeometry",null),g||U.createElement("shaderMaterial",{side:bn,vertexShader:fe.vertexShader,fragmentShader:fe.fragmentShader})))}),Sc=parseInt(ua.replace(/\D+/g,""));function Ya(l,e){if(e===Di)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),l;if(e===Yn||e===Fo){let n=l.getIndex();if(n===null){const o=[],s=l.getAttribute("position");if(s!==void 0){for(let i=0;i<s.count;i++)o.push(i);l.setIndex(o),n=l.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),l}const a=n.count-2,r=[];if(n)if(e===Yn)for(let o=1;o<=a;o++)r.push(n.getX(0)),r.push(n.getX(o)),r.push(n.getX(o+1));else for(let o=0;o<a;o++)o%2===0?(r.push(n.getX(o)),r.push(n.getX(o+1)),r.push(n.getX(o+2))):(r.push(n.getX(o+2)),r.push(n.getX(o+1)),r.push(n.getX(o)));r.length/3!==a&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const t=l.clone();return t.setIndex(r),t.clearGroups(),t}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),l}var kt=Uint8Array,ar=Uint16Array,ta=Uint32Array,Wo=new kt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zo=new kt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Dc=new kt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xo=function(l,e){for(var n=new ar(31),a=0;a<31;++a)n[a]=e+=1<<l[a-1];for(var r=new ta(n[30]),a=1;a<30;++a)for(var t=n[a];t<n[a+1];++t)r[t]=t-n[a]<<5|a;return[n,r]},Qo=Xo(Wo,2),Yo=Qo[0],Ic=Qo[1];Yo[28]=258,Ic[258]=28;var Rc=Xo(zo,0),_c=Rc[0],ra=new ar(32768);for(var st=0;st<32768;++st){var rr=(st&43690)>>>1|(st&21845)<<1;rr=(rr&52428)>>>2|(rr&13107)<<2,rr=(rr&61680)>>>4|(rr&3855)<<4,ra[st]=((rr&65280)>>>8|(rr&255)<<8)>>>1}var zr=function(l,e,n){for(var a=l.length,r=0,t=new ar(e);r<a;++r)++t[l[r]-1];var o=new ar(e);for(r=0;r<e;++r)o[r]=o[r-1]+t[r-1]<<1;var s;if(n){s=new ar(1<<e);var i=15-e;for(r=0;r<a;++r)if(l[r])for(var c=r<<4|l[r],u=e-l[r],f=o[l[r]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)s[ra[f]>>>i]=c}else for(s=new ar(a),r=0;r<a;++r)l[r]&&(s[r]=ra[o[l[r]-1]++]>>>15-l[r]);return s},$r=new kt(288);for(var st=0;st<144;++st)$r[st]=8;for(var st=144;st<256;++st)$r[st]=9;for(var st=256;st<280;++st)$r[st]=7;for(var st=280;st<288;++st)$r[st]=8;var Vo=new kt(32);for(var st=0;st<32;++st)Vo[st]=5;var Gc=zr($r,9,1),Uc=zr(Vo,5,1),kn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},Kt=function(l,e,n){var a=e/8|0;return(l[a]|l[a+1]<<8)>>(e&7)&n},Pn=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Lc=function(l){return(l/8|0)+(l&7&&1)},Oc=function(l,e,n){(n==null||n>l.length)&&(n=l.length);var a=new(l instanceof ar?ar:l instanceof ta?ta:kt)(n-e);return a.set(l.subarray(e,n)),a},kc=function(l,e,n){var a=l.length;if(!a||n&&!n.l&&a<5)return e||new kt(0);var r=!e||n,t=!n||n.i;n||(n={}),e||(e=new kt(a*3));var o=function(W){var V=e.length;if(W>V){var q=new kt(Math.max(V*2,W));q.set(e),e=q}},s=n.f||0,i=n.p||0,c=n.b||0,u=n.l,f=n.d,h=n.m,d=n.n,m=a*8;do{if(!u){n.f=s=Kt(l,i,1);var g=Kt(l,i+1,3);if(i+=3,g)if(g==1)u=Gc,f=Uc,h=9,d=5;else if(g==2){var x=Kt(l,i,31)+257,M=Kt(l,i+10,15)+4,b=x+Kt(l,i+5,31)+1;i+=14;for(var C=new kt(b),T=new kt(19),E=0;E<M;++E)T[Dc[E]]=Kt(l,i+E*3,7);i+=M*3;for(var F=kn(T),I=(1<<F)-1,z=zr(T,F,1),E=0;E<b;){var D=z[Kt(l,i,I)];i+=D&15;var A=D>>>4;if(A<16)C[E++]=A;else{var O=0,_=0;for(A==16?(_=3+Kt(l,i,3),i+=2,O=C[E-1]):A==17?(_=3+Kt(l,i,7),i+=3):A==18&&(_=11+Kt(l,i,127),i+=7);_--;)C[E++]=O}}var K=C.subarray(0,x),N=C.subarray(x);h=kn(K),d=kn(N),u=zr(K,h,1),f=zr(N,d,1)}else throw"invalid block type";else{var A=Lc(i)+4,y=l[A-4]|l[A-3]<<8,B=A+y;if(B>a){if(t)throw"unexpected EOF";break}r&&o(c+y),e.set(l.subarray(A,B),c),n.b=c+=y,n.p=i=B*8;continue}if(i>m){if(t)throw"unexpected EOF";break}}r&&o(c+131072);for(var ne=(1<<h)-1,se=(1<<d)-1,Z=i;;Z=i){var O=u[Pn(l,i)&ne],P=O>>>4;if(i+=O&15,i>m){if(t)throw"unexpected EOF";break}if(!O)throw"invalid length/literal";if(P<256)e[c++]=P;else if(P==256){Z=i,u=null;break}else{var w=P-254;if(P>264){var E=P-257,G=Wo[E];w=Kt(l,i,(1<<G)-1)+Yo[E],i+=G}var L=f[Pn(l,i)&se],J=L>>>4;if(!L)throw"invalid distance";i+=L&15;var N=_c[J];if(J>3){var G=zo[J];N+=Pn(l,i)&(1<<G)-1,i+=G}if(i>m){if(t)throw"unexpected EOF";break}r&&o(c+131072);for(var k=c+w;c<k;c+=4)e[c]=e[c-N],e[c+1]=e[c+1-N],e[c+2]=e[c+2-N],e[c+3]=e[c+3-N];c=k}}n.l=u,n.p=Z,n.b=c,u&&(s=1,n.m=h,n.d=f,n.n=d)}while(!s);return c==e.length?e:Oc(e,0,c)},Pc=new kt(0),Hc=function(l){if((l[0]&15)!=8||l[0]>>>4>7||(l[0]<<8|l[1])%31)throw"invalid zlib data";if(l[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function cn(l,e){return kc((Hc(l),l.subarray(2,-4)),e)}var Nc=typeof TextDecoder<"u"&&new TextDecoder,Jc=0;try{Nc.decode(Pc,{stream:!0}),Jc=1}catch{}const jc=l=>l&&l.isCubeTexture;class Kc extends sr{constructor(e,n){var a,r;const t=jc(e),s=((r=t?(a=e.image[0])==null?void 0:a.width:e.image.width)!=null?r:1024)/4,i=Math.floor(Math.log2(s)),c=Math.pow(2,i),u=3*Math.max(c,16*7),f=4*c,h=[t?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${i}.0`],d=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,m=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(ua.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,g={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},A=new Ii(1,16),y=new Sr({uniforms:g,fragmentShader:m,vertexShader:d,side:bn});super(A,y)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var Wc=Object.defineProperty,zc=(l,e,n)=>e in l?Wc(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n,_e=(l,e,n)=>(zc(l,typeof e!="symbol"?e+"":e,n),n);const ln=new Ri,Va=new _i,Xc=Math.cos(70*(Math.PI/180)),Za=(l,e)=>(l%e+e)%e;let Qc=class extends Gi{constructor(e,n){super(),_e(this,"object"),_e(this,"domElement"),_e(this,"enabled",!0),_e(this,"target",new Ge),_e(this,"minDistance",0),_e(this,"maxDistance",1/0),_e(this,"minZoom",0),_e(this,"maxZoom",1/0),_e(this,"minPolarAngle",0),_e(this,"maxPolarAngle",Math.PI),_e(this,"minAzimuthAngle",-1/0),_e(this,"maxAzimuthAngle",1/0),_e(this,"enableDamping",!1),_e(this,"dampingFactor",.05),_e(this,"enableZoom",!0),_e(this,"zoomSpeed",1),_e(this,"enableRotate",!0),_e(this,"rotateSpeed",1),_e(this,"enablePan",!0),_e(this,"panSpeed",1),_e(this,"screenSpacePanning",!0),_e(this,"keyPanSpeed",7),_e(this,"zoomToCursor",!1),_e(this,"autoRotate",!1),_e(this,"autoRotateSpeed",2),_e(this,"reverseOrbit",!1),_e(this,"reverseHorizontalOrbit",!1),_e(this,"reverseVerticalOrbit",!1),_e(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),_e(this,"mouseButtons",{LEFT:Cr.ROTATE,MIDDLE:Cr.DOLLY,RIGHT:Cr.PAN}),_e(this,"touches",{ONE:yr.ROTATE,TWO:yr.DOLLY_PAN}),_e(this,"target0"),_e(this,"position0"),_e(this,"zoom0"),_e(this,"_domElementKeyEvents",null),_e(this,"getPolarAngle"),_e(this,"getAzimuthalAngle"),_e(this,"setPolarAngle"),_e(this,"setAzimuthalAngle"),_e(this,"getDistance"),_e(this,"getZoomScale"),_e(this,"listenToKeyEvents"),_e(this,"stopListenToKeyEvents"),_e(this,"saveState"),_e(this,"reset"),_e(this,"update"),_e(this,"connect"),_e(this,"dispose"),_e(this,"dollyIn"),_e(this,"dollyOut"),_e(this,"getScale"),_e(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=R=>{let $=Za(R,2*Math.PI),he=u.phi;he<0&&(he+=2*Math.PI),$<0&&($+=2*Math.PI);let Fe=Math.abs($-he);2*Math.PI-Fe<Fe&&($<he?$+=2*Math.PI:he+=2*Math.PI),f.phi=$-he,a.update()},this.setAzimuthalAngle=R=>{let $=Za(R,2*Math.PI),he=u.theta;he<0&&(he+=2*Math.PI),$<0&&($+=2*Math.PI);let Fe=Math.abs($-he);2*Math.PI-Fe<Fe&&($<he?$+=2*Math.PI:he+=2*Math.PI),f.theta=$-he,a.update()},this.getDistance=()=>a.object.position.distanceTo(a.target),this.listenToKeyEvents=R=>{R.addEventListener("keydown",Me),this._domElementKeyEvents=R},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Me),this._domElementKeyEvents=null},this.saveState=()=>{a.target0.copy(a.target),a.position0.copy(a.object.position),a.zoom0=a.object.zoom},this.reset=()=>{a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.zoom=a.zoom0,a.object.updateProjectionMatrix(),a.dispatchEvent(r),a.update(),i=s.NONE},this.update=(()=>{const R=new Ge,$=new Ge(0,1,0),he=new pr().setFromUnitVectors(e.up,$),Fe=he.clone().invert(),Y=new Ge,He=new pr,pt=2*Math.PI;return function(){const Je=a.object.position;he.setFromUnitVectors(e.up,$),Fe.copy(he).invert(),R.copy(Je).sub(a.target),R.applyQuaternion(he),u.setFromVector3(R),a.autoRotate&&i===s.NONE&&_(D()),a.enableDamping?(u.theta+=f.theta*a.dampingFactor,u.phi+=f.phi*a.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let Qe=a.minAzimuthAngle,Xe=a.maxAzimuthAngle;isFinite(Qe)&&isFinite(Xe)&&(Qe<-Math.PI?Qe+=pt:Qe>Math.PI&&(Qe-=pt),Xe<-Math.PI?Xe+=pt:Xe>Math.PI&&(Xe-=pt),Qe<=Xe?u.theta=Math.max(Qe,Math.min(Xe,u.theta)):u.theta=u.theta>(Qe+Xe)/2?Math.max(Qe,u.theta):Math.min(Xe,u.theta)),u.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,u.phi)),u.makeSafe(),a.enableDamping===!0?a.target.addScaledVector(d,a.dampingFactor):a.target.add(d),a.zoomToCursor&&F||a.object.isOrthographicCamera?u.radius=L(u.radius):u.radius=L(u.radius*h),R.setFromSpherical(u),R.applyQuaternion(Fe),Je.copy(a.target).add(R),a.object.matrixAutoUpdate||a.object.updateMatrix(),a.object.lookAt(a.target),a.enableDamping===!0?(f.theta*=1-a.dampingFactor,f.phi*=1-a.dampingFactor,d.multiplyScalar(1-a.dampingFactor)):(f.set(0,0,0),d.set(0,0,0));let Le=!1;if(a.zoomToCursor&&F){let Ye=null;if(a.object instanceof Fr&&a.object.isPerspectiveCamera){const lt=R.length();Ye=L(lt*h);const ut=lt-Ye;a.object.position.addScaledVector(T,ut),a.object.updateMatrixWorld()}else if(a.object.isOrthographicCamera){const lt=new Ge(E.x,E.y,0);lt.unproject(a.object),a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/h)),a.object.updateProjectionMatrix(),Le=!0;const ut=new Ge(E.x,E.y,0);ut.unproject(a.object),a.object.position.sub(ut).add(lt),a.object.updateMatrixWorld(),Ye=R.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),a.zoomToCursor=!1;Ye!==null&&(a.screenSpacePanning?a.target.set(0,0,-1).transformDirection(a.object.matrix).multiplyScalar(Ye).add(a.object.position):(ln.origin.copy(a.object.position),ln.direction.set(0,0,-1).transformDirection(a.object.matrix),Math.abs(a.object.up.dot(ln.direction))<Xc?e.lookAt(a.target):(Va.setFromNormalAndCoplanarPoint(a.object.up,a.target),ln.intersectPlane(Va,a.target))))}else a.object instanceof dr&&a.object.isOrthographicCamera&&(Le=h!==1,Le&&(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/h)),a.object.updateProjectionMatrix()));return h=1,F=!1,Le||Y.distanceToSquared(a.object.position)>c||8*(1-He.dot(a.object.quaternion))>c?(a.dispatchEvent(r),Y.copy(a.object.position),He.copy(a.object.quaternion),Le=!1,!0):!1}})(),this.connect=R=>{a.domElement=R,a.domElement.style.touchAction="none",a.domElement.addEventListener("contextmenu",Ve),a.domElement.addEventListener("pointerdown",Ue),a.domElement.addEventListener("pointercancel",be),a.domElement.addEventListener("wheel",ve)},this.dispose=()=>{var R,$,he,Fe,Y,He;a.domElement&&(a.domElement.style.touchAction="auto"),(R=a.domElement)==null||R.removeEventListener("contextmenu",Ve),($=a.domElement)==null||$.removeEventListener("pointerdown",Ue),(he=a.domElement)==null||he.removeEventListener("pointercancel",be),(Fe=a.domElement)==null||Fe.removeEventListener("wheel",ve),(Y=a.domElement)==null||Y.ownerDocument.removeEventListener("pointermove",ge),(He=a.domElement)==null||He.ownerDocument.removeEventListener("pointerup",be),a._domElementKeyEvents!==null&&a._domElementKeyEvents.removeEventListener("keydown",Me)};const a=this,r={type:"change"},t={type:"start"},o={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=s.NONE;const c=1e-6,u=new ka,f=new ka;let h=1;const d=new Ge,m=new Bt,g=new Bt,A=new Bt,y=new Bt,B=new Bt,x=new Bt,M=new Bt,b=new Bt,C=new Bt,T=new Ge,E=new Bt;let F=!1;const I=[],z={};function D(){return 2*Math.PI/60/60*a.autoRotateSpeed}function O(){return Math.pow(.95,a.zoomSpeed)}function _(R){a.reverseOrbit||a.reverseHorizontalOrbit?f.theta+=R:f.theta-=R}function K(R){a.reverseOrbit||a.reverseVerticalOrbit?f.phi+=R:f.phi-=R}const N=(()=>{const R=new Ge;return function(he,Fe){R.setFromMatrixColumn(Fe,0),R.multiplyScalar(-he),d.add(R)}})(),ne=(()=>{const R=new Ge;return function(he,Fe){a.screenSpacePanning===!0?R.setFromMatrixColumn(Fe,1):(R.setFromMatrixColumn(Fe,0),R.crossVectors(a.object.up,R)),R.multiplyScalar(he),d.add(R)}})(),se=(()=>{const R=new Ge;return function(he,Fe){const Y=a.domElement;if(Y&&a.object instanceof Fr&&a.object.isPerspectiveCamera){const He=a.object.position;R.copy(He).sub(a.target);let pt=R.length();pt*=Math.tan(a.object.fov/2*Math.PI/180),N(2*he*pt/Y.clientHeight,a.object.matrix),ne(2*Fe*pt/Y.clientHeight,a.object.matrix)}else Y&&a.object instanceof dr&&a.object.isOrthographicCamera?(N(he*(a.object.right-a.object.left)/a.object.zoom/Y.clientWidth,a.object.matrix),ne(Fe*(a.object.top-a.object.bottom)/a.object.zoom/Y.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}})();function Z(R){a.object instanceof Fr&&a.object.isPerspectiveCamera||a.object instanceof dr&&a.object.isOrthographicCamera?h=R:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function P(R){Z(h/R)}function w(R){Z(h*R)}function G(R){if(!a.zoomToCursor||!a.domElement)return;F=!0;const $=a.domElement.getBoundingClientRect(),he=R.clientX-$.left,Fe=R.clientY-$.top,Y=$.width,He=$.height;E.x=he/Y*2-1,E.y=-(Fe/He)*2+1,T.set(E.x,E.y,1).unproject(a.object).sub(a.object.position).normalize()}function L(R){return Math.max(a.minDistance,Math.min(a.maxDistance,R))}function J(R){m.set(R.clientX,R.clientY)}function k(R){G(R),M.set(R.clientX,R.clientY)}function W(R){y.set(R.clientX,R.clientY)}function V(R){g.set(R.clientX,R.clientY),A.subVectors(g,m).multiplyScalar(a.rotateSpeed);const $=a.domElement;$&&(_(2*Math.PI*A.x/$.clientHeight),K(2*Math.PI*A.y/$.clientHeight)),m.copy(g),a.update()}function q(R){b.set(R.clientX,R.clientY),C.subVectors(b,M),C.y>0?P(O()):C.y<0&&w(O()),M.copy(b),a.update()}function fe(R){B.set(R.clientX,R.clientY),x.subVectors(B,y).multiplyScalar(a.panSpeed),se(x.x,x.y),y.copy(B),a.update()}function de(R){G(R),R.deltaY<0?w(O()):R.deltaY>0&&P(O()),a.update()}function ee(R){let $=!1;switch(R.code){case a.keys.UP:se(0,a.keyPanSpeed),$=!0;break;case a.keys.BOTTOM:se(0,-a.keyPanSpeed),$=!0;break;case a.keys.LEFT:se(a.keyPanSpeed,0),$=!0;break;case a.keys.RIGHT:se(-a.keyPanSpeed,0),$=!0;break}$&&(R.preventDefault(),a.update())}function re(){if(I.length==1)m.set(I[0].pageX,I[0].pageY);else{const R=.5*(I[0].pageX+I[1].pageX),$=.5*(I[0].pageY+I[1].pageY);m.set(R,$)}}function Ie(){if(I.length==1)y.set(I[0].pageX,I[0].pageY);else{const R=.5*(I[0].pageX+I[1].pageX),$=.5*(I[0].pageY+I[1].pageY);y.set(R,$)}}function Te(){const R=I[0].pageX-I[1].pageX,$=I[0].pageY-I[1].pageY,he=Math.sqrt(R*R+$*$);M.set(0,he)}function me(){a.enableZoom&&Te(),a.enablePan&&Ie()}function Ee(){a.enableZoom&&Te(),a.enableRotate&&re()}function ye(R){if(I.length==1)g.set(R.pageX,R.pageY);else{const he=we(R),Fe=.5*(R.pageX+he.x),Y=.5*(R.pageY+he.y);g.set(Fe,Y)}A.subVectors(g,m).multiplyScalar(a.rotateSpeed);const $=a.domElement;$&&(_(2*Math.PI*A.x/$.clientHeight),K(2*Math.PI*A.y/$.clientHeight)),m.copy(g)}function oe(R){if(I.length==1)B.set(R.pageX,R.pageY);else{const $=we(R),he=.5*(R.pageX+$.x),Fe=.5*(R.pageY+$.y);B.set(he,Fe)}x.subVectors(B,y).multiplyScalar(a.panSpeed),se(x.x,x.y),y.copy(B)}function Be(R){const $=we(R),he=R.pageX-$.x,Fe=R.pageY-$.y,Y=Math.sqrt(he*he+Fe*Fe);b.set(0,Y),C.set(0,Math.pow(b.y/M.y,a.zoomSpeed)),P(C.y),M.copy(b)}function Ce(R){a.enableZoom&&Be(R),a.enablePan&&oe(R)}function te(R){a.enableZoom&&Be(R),a.enableRotate&&ye(R)}function Ue(R){var $,he;a.enabled!==!1&&(I.length===0&&(($=a.domElement)==null||$.ownerDocument.addEventListener("pointermove",ge),(he=a.domElement)==null||he.ownerDocument.addEventListener("pointerup",be)),it(R),R.pointerType==="touch"?De(R):pe(R))}function ge(R){a.enabled!==!1&&(R.pointerType==="touch"?ke(R):ze(R))}function be(R){var $,he,Fe;Pe(R),I.length===0&&(($=a.domElement)==null||$.releasePointerCapture(R.pointerId),(he=a.domElement)==null||he.ownerDocument.removeEventListener("pointermove",ge),(Fe=a.domElement)==null||Fe.ownerDocument.removeEventListener("pointerup",be)),a.dispatchEvent(o),i=s.NONE}function pe(R){let $;switch(R.button){case 0:$=a.mouseButtons.LEFT;break;case 1:$=a.mouseButtons.MIDDLE;break;case 2:$=a.mouseButtons.RIGHT;break;default:$=-1}switch($){case Cr.DOLLY:if(a.enableZoom===!1)return;k(R),i=s.DOLLY;break;case Cr.ROTATE:if(R.ctrlKey||R.metaKey||R.shiftKey){if(a.enablePan===!1)return;W(R),i=s.PAN}else{if(a.enableRotate===!1)return;J(R),i=s.ROTATE}break;case Cr.PAN:if(R.ctrlKey||R.metaKey||R.shiftKey){if(a.enableRotate===!1)return;J(R),i=s.ROTATE}else{if(a.enablePan===!1)return;W(R),i=s.PAN}break;default:i=s.NONE}i!==s.NONE&&a.dispatchEvent(t)}function ze(R){if(a.enabled!==!1)switch(i){case s.ROTATE:if(a.enableRotate===!1)return;V(R);break;case s.DOLLY:if(a.enableZoom===!1)return;q(R);break;case s.PAN:if(a.enablePan===!1)return;fe(R);break}}function ve(R){a.enabled===!1||a.enableZoom===!1||i!==s.NONE&&i!==s.ROTATE||(R.preventDefault(),a.dispatchEvent(t),de(R),a.dispatchEvent(o))}function Me(R){a.enabled===!1||a.enablePan===!1||ee(R)}function De(R){switch(Re(R),I.length){case 1:switch(a.touches.ONE){case yr.ROTATE:if(a.enableRotate===!1)return;re(),i=s.TOUCH_ROTATE;break;case yr.PAN:if(a.enablePan===!1)return;Ie(),i=s.TOUCH_PAN;break;default:i=s.NONE}break;case 2:switch(a.touches.TWO){case yr.DOLLY_PAN:if(a.enableZoom===!1&&a.enablePan===!1)return;me(),i=s.TOUCH_DOLLY_PAN;break;case yr.DOLLY_ROTATE:if(a.enableZoom===!1&&a.enableRotate===!1)return;Ee(),i=s.TOUCH_DOLLY_ROTATE;break;default:i=s.NONE}break;default:i=s.NONE}i!==s.NONE&&a.dispatchEvent(t)}function ke(R){switch(Re(R),i){case s.TOUCH_ROTATE:if(a.enableRotate===!1)return;ye(R),a.update();break;case s.TOUCH_PAN:if(a.enablePan===!1)return;oe(R),a.update();break;case s.TOUCH_DOLLY_PAN:if(a.enableZoom===!1&&a.enablePan===!1)return;Ce(R),a.update();break;case s.TOUCH_DOLLY_ROTATE:if(a.enableZoom===!1&&a.enableRotate===!1)return;te(R),a.update();break;default:i=s.NONE}}function Ve(R){a.enabled!==!1&&R.preventDefault()}function it(R){I.push(R)}function Pe(R){delete z[R.pointerId];for(let $=0;$<I.length;$++)if(I[$].pointerId==R.pointerId){I.splice($,1);return}}function Re(R){let $=z[R.pointerId];$===void 0&&($=new Bt,z[R.pointerId]=$),$.set(R.pageX,R.pageY)}function we(R){const $=R.pointerId===I[0].pointerId?I[1]:I[0];return z[$.pointerId]}this.dollyIn=(R=O())=>{w(R),a.update()},this.dollyOut=(R=O())=>{P(R),a.update()},this.getScale=()=>h,this.setScale=R=>{Z(R),a.update()},this.getZoomScale=()=>O(),n!==void 0&&this.connect(n),this.update()}};function Bn(l){if(typeof TextDecoder<"u")return new TextDecoder().decode(l);let e="";for(let n=0,a=l.length;n<a;n++)e+=String.fromCharCode(l[n]);try{return decodeURIComponent(escape(e))}catch{return e}}const fr="srgb",$t="srgb-linear",qa=3001,Yc=3e3;class ma extends fa{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new el(n)}),this.register(function(n){return new tl(n)}),this.register(function(n){return new ul(n)}),this.register(function(n){return new fl(n)}),this.register(function(n){return new hl(n)}),this.register(function(n){return new nl(n)}),this.register(function(n){return new al(n)}),this.register(function(n){return new ol(n)}),this.register(function(n){return new il(n)}),this.register(function(n){return new $c(n)}),this.register(function(n){return new sl(n)}),this.register(function(n){return new rl(n)}),this.register(function(n){return new ll(n)}),this.register(function(n){return new cl(n)}),this.register(function(n){return new Zc(n)}),this.register(function(n){return new dl(n)}),this.register(function(n){return new pl(n)})}load(e,n,a,r){const t=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=jr.extractUrlBase(e);o=jr.resolveURL(c,this.path)}else o=jr.extractUrlBase(e);this.manager.itemStart(e);const s=function(c){r?r(c):console.error(c),t.manager.itemError(e),t.manager.itemEnd(e)},i=new or(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,function(c){try{t.parse(c,o,function(u){n(u),t.manager.itemEnd(e)},s)}catch(u){s(u)}},a,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,a,r){let t;const o={},s={};if(typeof e=="string")t=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Bn(new Uint8Array(e.slice(0,4)))===Zo){try{o[We.KHR_BINARY_GLTF]=new ml(e)}catch(u){r&&r(u);return}t=JSON.parse(o[We.KHR_BINARY_GLTF].content)}else t=JSON.parse(Bn(new Uint8Array(e)));else t=e;if(t.asset===void 0||t.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const i=new wl(t,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});i.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](i);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),s[u.name]=u,o[u.name]=!0}if(t.extensionsUsed)for(let c=0;c<t.extensionsUsed.length;++c){const u=t.extensionsUsed[c],f=t.extensionsRequired||[];switch(u){case We.KHR_MATERIALS_UNLIT:o[u]=new qc;break;case We.KHR_DRACO_MESH_COMPRESSION:o[u]=new gl(t,this.dracoLoader);break;case We.KHR_TEXTURE_TRANSFORM:o[u]=new Al;break;case We.KHR_MESH_QUANTIZATION:o[u]=new vl;break;default:f.indexOf(u)>=0&&s[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}i.setExtensions(o),i.setPlugins(s),i.parse(a,r)}parseAsync(e,n){const a=this;return new Promise(function(r,t){a.parse(e,n,r,t)})}}function Vc(){let l={};return{get:function(e){return l[e]},add:function(e,n){l[e]=n},remove:function(e){delete l[e]},removeAll:function(){l={}}}}const We={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Zc{constructor(e){this.parser=e,this.name=We.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let a=0,r=n.length;a<r;a++){const t=n[a];t.extensions&&t.extensions[this.name]&&t.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,t.extensions[this.name].light)}}_loadLight(e){const n=this.parser,a="light:"+e;let r=n.cache.get(a);if(r)return r;const t=n.json,i=((t.extensions&&t.extensions[this.name]||{}).lights||[])[e];let c;const u=new wt(16777215);i.color!==void 0&&u.setRGB(i.color[0],i.color[1],i.color[2],$t);const f=i.range!==void 0?i.range:0;switch(i.type){case"directional":c=new Oi(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Li(u),c.distance=f;break;case"spot":c=new Ui(u),c.distance=f,i.spot=i.spot||{},i.spot.innerConeAngle=i.spot.innerConeAngle!==void 0?i.spot.innerConeAngle:0,i.spot.outerConeAngle=i.spot.outerConeAngle!==void 0?i.spot.outerConeAngle:Math.PI/4,c.angle=i.spot.outerConeAngle,c.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+i.type)}return c.position.set(0,0,0),c.decay=2,Zt(c,i),i.intensity!==void 0&&(c.intensity=i.intensity),c.name=n.createUniqueName(i.name||"light_"+e),r=Promise.resolve(c),n.cache.add(a,r),r}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,a=this.parser,t=a.json.nodes[e],s=(t.extensions&&t.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(i){return a._getNodeRef(n.cache,s,i)})}}class qc{constructor(){this.name=We.KHR_MATERIALS_UNLIT}getMaterialType(){return ur}extendParams(e,n,a){const r=[];e.color=new wt(1,1,1),e.opacity=1;const t=n.pbrMetallicRoughness;if(t){if(Array.isArray(t.baseColorFactor)){const o=t.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],$t),e.opacity=o[3]}t.baseColorTexture!==void 0&&r.push(a.assignTexture(e,"map",t.baseColorTexture,fr))}return Promise.all(r)}}class $c{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const t=r.extensions[this.name].emissiveStrength;return t!==void 0&&(n.emissiveIntensity=t),Promise.resolve()}}class el{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:Qt}extendMaterialParams(e,n){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const t=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&t.push(a.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&t.push(a.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(t.push(a.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const s=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Bt(s,s)}return Promise.all(t)}}class tl{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_DISPERSION}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:Qt}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const t=r.extensions[this.name];return n.dispersion=t.dispersion!==void 0?t.dispersion:0,Promise.resolve()}}class rl{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:Qt}extendMaterialParams(e,n){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const t=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&t.push(a.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&t.push(a.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(t)}}class nl{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_SHEEN}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:Qt}extendMaterialParams(e,n){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const t=[];n.sheenColor=new wt(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const s=o.sheenColorFactor;n.sheenColor.setRGB(s[0],s[1],s[2],$t)}return o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&t.push(a.assignTexture(n,"sheenColorMap",o.sheenColorTexture,fr)),o.sheenRoughnessTexture!==void 0&&t.push(a.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(t)}}class al{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:Qt}extendMaterialParams(e,n){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const t=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&t.push(a.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(t)}}class ol{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_VOLUME}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:Qt}extendMaterialParams(e,n){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const t=[],o=r.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&t.push(a.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const s=o.attenuationColor||[1,1,1];return n.attenuationColor=new wt().setRGB(s[0],s[1],s[2],$t),Promise.all(t)}}class il{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_IOR}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:Qt}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const t=r.extensions[this.name];return n.ior=t.ior!==void 0?t.ior:1.5,Promise.resolve()}}class sl{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_SPECULAR}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:Qt}extendMaterialParams(e,n){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const t=[],o=r.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&t.push(a.assignTexture(n,"specularIntensityMap",o.specularTexture));const s=o.specularColorFactor||[1,1,1];return n.specularColor=new wt().setRGB(s[0],s[1],s[2],$t),o.specularColorTexture!==void 0&&t.push(a.assignTexture(n,"specularColorMap",o.specularColorTexture,fr)),Promise.all(t)}}class cl{constructor(e){this.parser=e,this.name=We.EXT_MATERIALS_BUMP}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:Qt}extendMaterialParams(e,n){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const t=[],o=r.extensions[this.name];return n.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&t.push(a.assignTexture(n,"bumpMap",o.bumpTexture)),Promise.all(t)}}class ll{constructor(e){this.parser=e,this.name=We.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:Qt}extendMaterialParams(e,n){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const t=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(n.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(n.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&t.push(a.assignTexture(n,"anisotropyMap",o.anisotropyTexture)),Promise.all(t)}}class ul{constructor(e){this.parser=e,this.name=We.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,a=n.json,r=a.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const t=r.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(a.extensionsRequired&&a.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,t.source,o)}}class fl{constructor(e){this.parser=e,this.name=We.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,a=this.parser,r=a.json,t=r.textures[e];if(!t.extensions||!t.extensions[n])return null;const o=t.extensions[n],s=r.images[o.source];let i=a.textureLoader;if(s.uri){const c=a.options.manager.getHandler(s.uri);c!==null&&(i=c)}return this.detectSupport().then(function(c){if(c)return a.loadTextureImage(e,o.source,i);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return a.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class hl{constructor(e){this.parser=e,this.name=We.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,a=this.parser,r=a.json,t=r.textures[e];if(!t.extensions||!t.extensions[n])return null;const o=t.extensions[n],s=r.images[o.source];let i=a.textureLoader;if(s.uri){const c=a.options.manager.getHandler(s.uri);c!==null&&(i=c)}return this.detectSupport().then(function(c){if(c)return a.loadTextureImage(e,o.source,i);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return a.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class dl{constructor(e){this.name=We.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,a=n.bufferViews[e];if(a.extensions&&a.extensions[this.name]){const r=a.extensions[this.name],t=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return t.then(function(s){const i=r.byteOffset||0,c=r.byteLength||0,u=r.count,f=r.byteStride,h=new Uint8Array(s,i,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,h,r.mode,r.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(d),u,f,h,r.mode,r.filter),d})})}else return null}}class pl{constructor(e){this.name=We.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,a=n.nodes[e];if(!a.extensions||!a.extensions[this.name]||a.mesh===void 0)return null;const r=n.meshes[a.mesh];for(const c of r.primitives)if(c.mode!==Ot.TRIANGLES&&c.mode!==Ot.TRIANGLE_STRIP&&c.mode!==Ot.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=a.extensions[this.name].attributes,s=[],i={};for(const c in o)s.push(this.parser.getDependency("accessor",o[c]).then(u=>(i[c]=u,i[c])));return s.length<1?null:(s.push(this.parser.createNodeMesh(e)),Promise.all(s).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],h=c[0].count,d=[];for(const m of f){const g=new ir,A=new Ge,y=new pr,B=new Ge(1,1,1),x=new ki(m.geometry,m.material,h);for(let M=0;M<h;M++)i.TRANSLATION&&A.fromBufferAttribute(i.TRANSLATION,M),i.ROTATION&&y.fromBufferAttribute(i.ROTATION,M),i.SCALE&&B.fromBufferAttribute(i.SCALE,M),x.setMatrixAt(M,g.compose(A,y,B));for(const M in i)if(M==="_COLOR_0"){const b=i[M];x.instanceColor=new xo(b.array,b.itemSize,b.normalized)}else M!=="TRANSLATION"&&M!=="ROTATION"&&M!=="SCALE"&&m.geometry.setAttribute(M,i[M]);wo.prototype.copy.call(x,m),this.parser.assignFinalMaterial(x),d.push(x)}return u.isGroup?(u.clear(),u.add(...d),u):d[0]}))}}const Zo="glTF",Pr=12,$a={JSON:1313821514,BIN:5130562};class ml{constructor(e){this.name=We.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,Pr);if(this.header={magic:Bn(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Zo)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const a=this.header.length-Pr,r=new DataView(e,Pr);let t=0;for(;t<a;){const o=r.getUint32(t,!0);t+=4;const s=r.getUint32(t,!0);if(t+=4,s===$a.JSON){const i=new Uint8Array(e,Pr+t,o);this.content=Bn(i)}else if(s===$a.BIN){const i=Pr+t;this.body=e.slice(i,i+o)}t+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class gl{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=We.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const a=this.json,r=this.dracoLoader,t=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},i={},c={};for(const u in o){const f=na[u]||u.toLowerCase();s[f]=o[u]}for(const u in e.attributes){const f=na[u]||u.toLowerCase();if(o[u]!==void 0){const h=a.accessors[e.attributes[u]],d=xr[h.componentType];c[f]=d.name,i[f]=h.normalized===!0}}return n.getDependency("bufferView",t).then(function(u){return new Promise(function(f,h){r.decodeDracoFile(u,function(d){for(const m in d.attributes){const g=d.attributes[m],A=i[m];A!==void 0&&(g.normalized=A)}f(d)},s,c,$t,h)})})}}class Al{constructor(){this.name=We.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class vl{constructor(){this.name=We.KHR_MESH_QUANTIZATION}}class qo extends is{constructor(e,n,a,r){super(e,n,a,r)}copySampleValue_(e){const n=this.resultBuffer,a=this.sampleValues,r=this.valueSize,t=e*r*3+r;for(let o=0;o!==r;o++)n[o]=a[t+o];return n}interpolate_(e,n,a,r){const t=this.resultBuffer,o=this.sampleValues,s=this.valueSize,i=s*2,c=s*3,u=r-n,f=(a-n)/u,h=f*f,d=h*f,m=e*c,g=m-c,A=-2*d+3*h,y=d-h,B=1-A,x=y-h+f;for(let M=0;M!==s;M++){const b=o[g+M+s],C=o[g+M+i]*u,T=o[m+M+s],E=o[m+M]*u;t[M]=B*b+x*C+A*T+y*E}return t}}const Bl=new pr;class Cl extends qo{interpolate_(e,n,a,r){const t=super.interpolate_(e,n,a,r);return Bl.fromArray(t).normalize().toArray(t),t}}const Ot={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},xr={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},eo={9728:Zn,9729:yt,9984:$i,9985:es,9986:ts,9987:So},to={33071:qt,33648:rs,10497:Vn},Hn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},na={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Sc>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},nr={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},yl={CUBICSPLINE:void 0,LINEAR:Ro,STEP:ns},Nn={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function bl(l){return l.DefaultMaterial===void 0&&(l.DefaultMaterial=new Do({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:as})),l.DefaultMaterial}function cr(l,e,n){for(const a in n.extensions)l[a]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[a]=n.extensions[a])}function Zt(l,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(l.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function El(l,e,n){let a=!1,r=!1,t=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(a=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(t=!0),a&&r&&t)break}if(!a&&!r&&!t)return Promise.resolve(l);const o=[],s=[],i=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(a){const h=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):l.attributes.position;o.push(h)}if(r){const h=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):l.attributes.normal;s.push(h)}if(t){const h=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):l.attributes.color;i.push(h)}}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(i)]).then(function(c){const u=c[0],f=c[1],h=c[2];return a&&(l.morphAttributes.position=u),r&&(l.morphAttributes.normal=f),t&&(l.morphAttributes.color=h),l.morphTargetsRelative=!0,l})}function Ml(l,e){if(l.updateMorphTargets(),e.weights!==void 0)for(let n=0,a=e.weights.length;n<a;n++)l.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(l.morphTargetInfluences.length===n.length){l.morphTargetDictionary={};for(let a=0,r=n.length;a<r;a++)l.morphTargetDictionary[n[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Tl(l){let e;const n=l.extensions&&l.extensions[We.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+Jn(n.attributes):e=l.indices+":"+Jn(l.attributes)+":"+l.mode,l.targets!==void 0)for(let a=0,r=l.targets.length;a<r;a++)e+=":"+Jn(l.targets[a]);return e}function Jn(l){let e="";const n=Object.keys(l).sort();for(let a=0,r=n.length;a<r;a++)e+=n[a]+":"+l[n[a]]+";";return e}function aa(l){switch(l){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Fl(l){return l.search(/\.jpe?g($|\?)/i)>0||l.search(/^data\:image\/jpeg/)===0?"image/jpeg":l.search(/\.webp($|\?)/i)>0||l.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const xl=new ir;class wl{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new Vc,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let a=!1,r=!1,t=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,t=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||a||r&&t<98?this.textureLoader=new Pi(this.options.manager):this.textureLoader=new Hi(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new or(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const a=this,r=this.json,t=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([a.getDependencies("scene"),a.getDependencies("animation"),a.getDependencies("camera")])}).then(function(o){const s={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:a,userData:{}};return cr(t,s,r),Zt(s,r),Promise.all(a._invokeAll(function(i){return i.afterRoot&&i.afterRoot(s)})).then(function(){for(const i of s.scenes)i.updateMatrixWorld();e(s)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],a=this.json.meshes||[];for(let r=0,t=n.length;r<t;r++){const o=n[r].joints;for(let s=0,i=o.length;s<i;s++)e[o[s]].isBone=!0}for(let r=0,t=e.length;r<t;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(a[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,a){if(e.refs[n]<=1)return a;const r=a.clone(),t=(o,s)=>{const i=this.associations.get(o);i!=null&&this.associations.set(s,i);for(const[c,u]of o.children.entries())t(u,s.children[c])};return t(a,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let a=0;a<n.length;a++){const r=e(n[a]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const a=[];for(let r=0;r<n.length;r++){const t=e(n[r]);t&&a.push(t)}return a}getDependency(e,n){const a=e+":"+n;let r=this.cache.get(a);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(t){return t.loadNode&&t.loadNode(n)});break;case"mesh":r=this._invokeOne(function(t){return t.loadMesh&&t.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(t){return t.loadBufferView&&t.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(t){return t.loadMaterial&&t.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(t){return t.loadTexture&&t.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(t){return t.loadAnimation&&t.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(t){return t!=this&&t.getDependency&&t.getDependency(e,n)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(a,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const a=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(t,o){return a.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],a=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[We.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(t,o){a.load(jr.resolveURL(n.uri,r.path),t,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(a){const r=n.byteLength||0,t=n.byteOffset||0;return a.slice(t,t+r)})}loadAccessor(e){const n=this,a=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=Hn[r.type],s=xr[r.componentType],i=r.normalized===!0,c=new s(r.count*o);return Promise.resolve(new Kr(c,o,i))}const t=[];return r.bufferView!==void 0?t.push(this.getDependency("bufferView",r.bufferView)):t.push(null),r.sparse!==void 0&&(t.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),t.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(t).then(function(o){const s=o[0],i=Hn[r.type],c=xr[r.componentType],u=c.BYTES_PER_ELEMENT,f=u*i,h=r.byteOffset||0,d=r.bufferView!==void 0?a.bufferViews[r.bufferView].byteStride:void 0,m=r.normalized===!0;let g,A;if(d&&d!==f){const y=Math.floor(h/d),B="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+y+":"+r.count;let x=n.cache.get(B);x||(g=new c(s,y*d,r.count*d/u),x=new Ni(g,d/u),n.cache.add(B,x)),A=new os(x,i,h%d/u,m)}else s===null?g=new c(r.count*i):g=new c(s,h,r.count*i),A=new Kr(g,i,m);if(r.sparse!==void 0){const y=Hn.SCALAR,B=xr[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,M=r.sparse.values.byteOffset||0,b=new B(o[1],x,r.sparse.count*y),C=new c(o[2],M,r.sparse.count*i);s!==null&&(A=new Kr(A.array.slice(),A.itemSize,A.normalized));for(let T=0,E=b.length;T<E;T++){const F=b[T];if(A.setX(F,C[T*i]),i>=2&&A.setY(F,C[T*i+1]),i>=3&&A.setZ(F,C[T*i+2]),i>=4&&A.setW(F,C[T*i+3]),i>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){const n=this.json,a=this.options,t=n.textures[e].source,o=n.images[t];let s=this.textureLoader;if(o.uri){const i=a.manager.getHandler(o.uri);i!==null&&(s=i)}return this.loadTextureImage(e,t,s)}loadTextureImage(e,n,a){const r=this,t=this.json,o=t.textures[e],s=t.images[n],i=(s.uri||s.bufferView)+":"+o.sampler;if(this.textureCache[i])return this.textureCache[i];const c=this.loadImageSource(n,a).then(function(u){u.flipY=!1,u.name=o.name||s.name||"",u.name===""&&typeof s.uri=="string"&&s.uri.startsWith("data:image/")===!1&&(u.name=s.uri);const h=(t.samplers||{})[o.sampler]||{};return u.magFilter=eo[h.magFilter]||yt,u.minFilter=eo[h.minFilter]||So,u.wrapS=to[h.wrapS]||Vn,u.wrapT=to[h.wrapT]||Vn,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[i]=c,c}loadImageSource(e,n){const a=this,r=this.json,t=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],s=self.URL||self.webkitURL;let i=o.uri||"",c=!1;if(o.bufferView!==void 0)i=a.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const h=new Blob([f],{type:o.mimeType});return i=s.createObjectURL(h),i});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(i).then(function(f){return new Promise(function(h,d){let m=h;n.isImageBitmapLoader===!0&&(m=function(g){const A=new Wt(g);A.needsUpdate=!0,h(A)}),n.load(jr.resolveURL(f,t.path),m,void 0,d)})}).then(function(f){return c===!0&&s.revokeObjectURL(i),Zt(f,o),f.userData.mimeType=o.mimeType||Fl(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",i),f});return this.sourceCache[e]=u,u}assignTexture(e,n,a,r){const t=this;return this.getDependency("texture",a.index).then(function(o){if(!o)return null;if(a.texCoord!==void 0&&a.texCoord>0&&(o=o.clone(),o.channel=a.texCoord),t.extensions[We.KHR_TEXTURE_TRANSFORM]){const s=a.extensions!==void 0?a.extensions[We.KHR_TEXTURE_TRANSFORM]:void 0;if(s){const i=t.associations.get(o);o=t.extensions[We.KHR_TEXTURE_TRANSFORM].extendTexture(o,s),t.associations.set(o,i)}}return r!==void 0&&(typeof r=="number"&&(r=r===qa?fr:$t),"colorSpace"in o?o.colorSpace=r:o.encoding=r===fr?qa:Yc),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let a=e.material;const r=n.attributes.tangent===void 0,t=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const s="PointsMaterial:"+a.uuid;let i=this.cache.get(s);i||(i=new Ji,Un.prototype.copy.call(i,a),i.color.copy(a.color),i.map=a.map,i.sizeAttenuation=!1,this.cache.add(s,i)),a=i}else if(e.isLine){const s="LineBasicMaterial:"+a.uuid;let i=this.cache.get(s);i||(i=new ji,Un.prototype.copy.call(i,a),i.color.copy(a.color),i.map=a.map,this.cache.add(s,i)),a=i}if(r||t||o){let s="ClonedMaterial:"+a.uuid+":";r&&(s+="derivative-tangents:"),t&&(s+="vertex-colors:"),o&&(s+="flat-shading:");let i=this.cache.get(s);i||(i=a.clone(),t&&(i.vertexColors=!0),o&&(i.flatShading=!0),r&&(i.normalScale&&(i.normalScale.y*=-1),i.clearcoatNormalScale&&(i.clearcoatNormalScale.y*=-1)),this.cache.add(s,i),this.associations.set(i,this.associations.get(a))),a=i}e.material=a}getMaterialType(){return Do}loadMaterial(e){const n=this,a=this.json,r=this.extensions,t=a.materials[e];let o;const s={},i=t.extensions||{},c=[];if(i[We.KHR_MATERIALS_UNLIT]){const f=r[We.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(s,t,n))}else{const f=t.pbrMetallicRoughness||{};if(s.color=new wt(1,1,1),s.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;s.color.setRGB(h[0],h[1],h[2],$t),s.opacity=h[3]}f.baseColorTexture!==void 0&&c.push(n.assignTexture(s,"map",f.baseColorTexture,fr)),s.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,s.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(s,"metalnessMap",f.metallicRoughnessTexture)),c.push(n.assignTexture(s,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,s)})))}t.doubleSided===!0&&(s.side=bn);const u=t.alphaMode||Nn.OPAQUE;if(u===Nn.BLEND?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,u===Nn.MASK&&(s.alphaTest=t.alphaCutoff!==void 0?t.alphaCutoff:.5)),t.normalTexture!==void 0&&o!==ur&&(c.push(n.assignTexture(s,"normalMap",t.normalTexture)),s.normalScale=new Bt(1,1),t.normalTexture.scale!==void 0)){const f=t.normalTexture.scale;s.normalScale.set(f,f)}if(t.occlusionTexture!==void 0&&o!==ur&&(c.push(n.assignTexture(s,"aoMap",t.occlusionTexture)),t.occlusionTexture.strength!==void 0&&(s.aoMapIntensity=t.occlusionTexture.strength)),t.emissiveFactor!==void 0&&o!==ur){const f=t.emissiveFactor;s.emissive=new wt().setRGB(f[0],f[1],f[2],$t)}return t.emissiveTexture!==void 0&&o!==ur&&c.push(n.assignTexture(s,"emissiveMap",t.emissiveTexture,fr)),Promise.all(c).then(function(){const f=new o(s);return t.name&&(f.name=t.name),Zt(f,t),n.associations.set(f,{materials:e}),t.extensions&&cr(r,f,t),f})}createUniqueName(e){const n=Ki.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,a=this.extensions,r=this.primitiveCache;function t(s){return a[We.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(s,n).then(function(i){return ro(i,s,n)})}const o=[];for(let s=0,i=e.length;s<i;s++){const c=e[s],u=Tl(c),f=r[u];if(f)o.push(f.promise);else{let h;c.extensions&&c.extensions[We.KHR_DRACO_MESH_COMPRESSION]?h=t(c):h=ro(new Io,c,n),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const n=this,a=this.json,r=this.extensions,t=a.meshes[e],o=t.primitives,s=[];for(let i=0,c=o.length;i<c;i++){const u=o[i].material===void 0?bl(this.cache):this.getDependency("material",o[i].material);s.push(u)}return s.push(n.loadGeometries(o)),Promise.all(s).then(function(i){const c=i.slice(0,i.length-1),u=i[i.length-1],f=[];for(let d=0,m=u.length;d<m;d++){const g=u[d],A=o[d];let y;const B=c[d];if(A.mode===Ot.TRIANGLES||A.mode===Ot.TRIANGLE_STRIP||A.mode===Ot.TRIANGLE_FAN||A.mode===void 0)y=t.isSkinnedMesh===!0?new Wi(g,B):new sr(g,B),y.isSkinnedMesh===!0&&y.normalizeSkinWeights(),A.mode===Ot.TRIANGLE_STRIP?y.geometry=Ya(y.geometry,Fo):A.mode===Ot.TRIANGLE_FAN&&(y.geometry=Ya(y.geometry,Yn));else if(A.mode===Ot.LINES)y=new zi(g,B);else if(A.mode===Ot.LINE_STRIP)y=new Xi(g,B);else if(A.mode===Ot.LINE_LOOP)y=new Qi(g,B);else if(A.mode===Ot.POINTS)y=new Yi(g,B);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(y.geometry.morphAttributes).length>0&&Ml(y,t),y.name=n.createUniqueName(t.name||"mesh_"+e),Zt(y,t),A.extensions&&cr(r,y,A),n.assignFinalMaterial(y),f.push(y)}for(let d=0,m=f.length;d<m;d++)n.associations.set(f[d],{meshes:e,primitives:d});if(f.length===1)return t.extensions&&cr(r,f[0],t),f[0];const h=new Ln;t.extensions&&cr(r,h,t),n.associations.set(h,{meshes:e});for(let d=0,m=f.length;d<m;d++)h.add(f[d]);return h})}loadCamera(e){let n;const a=this.json.cameras[e],r=a[a.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return a.type==="perspective"?n=new Fr(Wr.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):a.type==="orthographic"&&(n=new dr(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),a.name&&(n.name=this.createUniqueName(a.name)),Zt(n,a),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],a=[];for(let r=0,t=n.joints.length;r<t;r++)a.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?a.push(this.getDependency("accessor",n.inverseBindMatrices)):a.push(null),Promise.all(a).then(function(r){const t=r.pop(),o=r,s=[],i=[];for(let c=0,u=o.length;c<u;c++){const f=o[c];if(f){s.push(f);const h=new ir;t!==null&&h.fromArray(t.array,c*16),i.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new Vi(s,i)})}loadAnimation(e){const n=this.json,a=this,r=n.animations[e],t=r.name?r.name:"animation_"+e,o=[],s=[],i=[],c=[],u=[];for(let f=0,h=r.channels.length;f<h;f++){const d=r.channels[f],m=r.samplers[d.sampler],g=d.target,A=g.node,y=r.parameters!==void 0?r.parameters[m.input]:m.input,B=r.parameters!==void 0?r.parameters[m.output]:m.output;g.node!==void 0&&(o.push(this.getDependency("node",A)),s.push(this.getDependency("accessor",y)),i.push(this.getDependency("accessor",B)),c.push(m),u.push(g))}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(i),Promise.all(c),Promise.all(u)]).then(function(f){const h=f[0],d=f[1],m=f[2],g=f[3],A=f[4],y=[];for(let B=0,x=h.length;B<x;B++){const M=h[B],b=d[B],C=m[B],T=g[B],E=A[B];if(M===void 0)continue;M.updateMatrix&&M.updateMatrix();const F=a._createAnimationTracks(M,b,C,T,E);if(F)for(let I=0;I<F.length;I++)y.push(F[I])}return new Zi(t,void 0,y)})}createNodeMesh(e){const n=this.json,a=this,r=n.nodes[e];return r.mesh===void 0?null:a.getDependency("mesh",r.mesh).then(function(t){const o=a._getNodeRef(a.meshCache,r.mesh,t);return r.weights!==void 0&&o.traverse(function(s){if(s.isMesh)for(let i=0,c=r.weights.length;i<c;i++)s.morphTargetInfluences[i]=r.weights[i]}),o})}loadNode(e){const n=this.json,a=this,r=n.nodes[e],t=a._loadNodeShallow(e),o=[],s=r.children||[];for(let c=0,u=s.length;c<u;c++)o.push(a.getDependency("node",s[c]));const i=r.skin===void 0?Promise.resolve(null):a.getDependency("skin",r.skin);return Promise.all([t,Promise.all(o),i]).then(function(c){const u=c[0],f=c[1],h=c[2];h!==null&&u.traverse(function(d){d.isSkinnedMesh&&d.bind(h,xl)});for(let d=0,m=f.length;d<m;d++)u.add(f[d]);return u})}_loadNodeShallow(e){const n=this.json,a=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const t=n.nodes[e],o=t.name?r.createUniqueName(t.name):"",s=[],i=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return i&&s.push(i),t.camera!==void 0&&s.push(r.getDependency("camera",t.camera).then(function(c){return r._getNodeRef(r.cameraCache,t.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){s.push(c)}),this.nodeCache[e]=Promise.all(s).then(function(c){let u;if(t.isBone===!0?u=new qi:c.length>1?u=new Ln:c.length===1?u=c[0]:u=new wo,u!==c[0])for(let f=0,h=c.length;f<h;f++)u.add(c[f]);if(t.name&&(u.userData.name=t.name,u.name=o),Zt(u,t),t.extensions&&cr(a,u,t),t.matrix!==void 0){const f=new ir;f.fromArray(t.matrix),u.applyMatrix4(f)}else t.translation!==void 0&&u.position.fromArray(t.translation),t.rotation!==void 0&&u.quaternion.fromArray(t.rotation),t.scale!==void 0&&u.scale.fromArray(t.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const n=this.extensions,a=this.json.scenes[e],r=this,t=new Ln;a.name&&(t.name=r.createUniqueName(a.name)),Zt(t,a),a.extensions&&cr(n,t,a);const o=a.nodes||[],s=[];for(let i=0,c=o.length;i<c;i++)s.push(r.getDependency("node",o[i]));return Promise.all(s).then(function(i){for(let u=0,f=i.length;u<f;u++)t.add(i[u]);const c=u=>{const f=new Map;for(const[h,d]of r.associations)(h instanceof Un||h instanceof Wt)&&f.set(h,d);return u.traverse(h=>{const d=r.associations.get(h);d!=null&&f.set(h,d)}),f};return r.associations=c(t),t})}_createAnimationTracks(e,n,a,r,t){const o=[],s=e.name?e.name:e.uuid,i=[];nr[t.path]===nr.weights?e.traverse(function(h){h.morphTargetInfluences&&i.push(h.name?h.name:h.uuid)}):i.push(s);let c;switch(nr[t.path]){case nr.weights:c=Ha;break;case nr.rotation:c=Na;break;case nr.position:case nr.scale:c=Pa;break;default:switch(a.itemSize){case 1:c=Ha;break;case 2:case 3:default:c=Pa;break}break}const u=r.interpolation!==void 0?yl[r.interpolation]:Ro,f=this._getArrayFromAccessor(a);for(let h=0,d=i.length;h<d;h++){const m=new c(i[h]+"."+nr[t.path],n.array,f,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),o.push(m)}return o}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const a=aa(n.constructor),r=new Float32Array(n.length);for(let t=0,o=n.length;t<o;t++)r[t]=n[t]*a;n=r}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(a){const r=this instanceof Na?Cl:qo;return new r(this.times,this.values,this.getValueSize()/3,a)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Sl(l,e,n){const a=e.attributes,r=new Zr;if(a.POSITION!==void 0){const s=n.json.accessors[a.POSITION],i=s.min,c=s.max;if(i!==void 0&&c!==void 0){if(r.set(new Ge(i[0],i[1],i[2]),new Ge(c[0],c[1],c[2])),s.normalized){const u=aa(xr[s.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const t=e.targets;if(t!==void 0){const s=new Ge,i=new Ge;for(let c=0,u=t.length;c<u;c++){const f=t[c];if(f.POSITION!==void 0){const h=n.json.accessors[f.POSITION],d=h.min,m=h.max;if(d!==void 0&&m!==void 0){if(i.setX(Math.max(Math.abs(d[0]),Math.abs(m[0]))),i.setY(Math.max(Math.abs(d[1]),Math.abs(m[1]))),i.setZ(Math.max(Math.abs(d[2]),Math.abs(m[2]))),h.normalized){const g=aa(xr[h.componentType]);i.multiplyScalar(g)}s.max(i)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(s)}l.boundingBox=r;const o=new ha;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,l.boundingSphere=o}function ro(l,e,n){const a=e.attributes,r=[];function t(o,s){return n.getDependency("accessor",o).then(function(i){l.setAttribute(s,i)})}for(const o in a){const s=na[o]||o.toLowerCase();s in l.attributes||r.push(t(a[o],s))}if(e.indices!==void 0&&!l.index){const o=n.getDependency("accessor",e.indices).then(function(s){l.setIndex(s)});r.push(o)}return Zt(l,e),Sl(l,e,n),Promise.all(r).then(function(){return e.targets!==void 0?El(l,e.targets,n):l})}const Dl={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},Il={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class Rl extends _o{constructor(e){super(e),this.type=xt}parse(e){const o=function(E,F){switch(E){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(F||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(F||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(F||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(F||""))}},u=`
`,f=function(E,F,I){F=F||1024;let D=E.pos,O=-1,_=0,K="",N=String.fromCharCode.apply(null,new Uint16Array(E.subarray(D,D+128)));for(;0>(O=N.indexOf(u))&&_<F&&D<E.byteLength;)K+=N,_+=N.length,D+=128,N+=String.fromCharCode.apply(null,new Uint16Array(E.subarray(D,D+128)));return-1<O?(E.pos+=_+O+1,K+N.slice(0,O)):!1},h=function(E){const F=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,z=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,D=/^\s*FORMAT=(\S+)\s*$/,O=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,_={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let K,N;for((E.pos>=E.byteLength||!(K=f(E)))&&o(1,"no header found"),(N=K.match(F))||o(3,"bad initial token"),_.valid|=1,_.programtype=N[1],_.string+=K+`
`;K=f(E),K!==!1;){if(_.string+=K+`
`,K.charAt(0)==="#"){_.comments+=K+`
`;continue}if((N=K.match(I))&&(_.gamma=parseFloat(N[1])),(N=K.match(z))&&(_.exposure=parseFloat(N[1])),(N=K.match(D))&&(_.valid|=2,_.format=N[1]),(N=K.match(O))&&(_.valid|=4,_.height=parseInt(N[1],10),_.width=parseInt(N[2],10)),_.valid&2&&_.valid&4)break}return _.valid&2||o(3,"missing format specifier"),_.valid&4||o(3,"missing image size specifier"),_},d=function(E,F,I){const z=F;if(z<8||z>32767||E[0]!==2||E[1]!==2||E[2]&128)return new Uint8Array(E);z!==(E[2]<<8|E[3])&&o(3,"wrong scanline width");const D=new Uint8Array(4*F*I);D.length||o(4,"unable to allocate buffer space");let O=0,_=0;const K=4*z,N=new Uint8Array(4),ne=new Uint8Array(K);let se=I;for(;se>0&&_<E.byteLength;){_+4>E.byteLength&&o(1),N[0]=E[_++],N[1]=E[_++],N[2]=E[_++],N[3]=E[_++],(N[0]!=2||N[1]!=2||(N[2]<<8|N[3])!=z)&&o(3,"bad rgbe scanline format");let Z=0,P;for(;Z<K&&_<E.byteLength;){P=E[_++];const G=P>128;if(G&&(P-=128),(P===0||Z+P>K)&&o(3,"bad scanline data"),G){const L=E[_++];for(let J=0;J<P;J++)ne[Z++]=L}else ne.set(E.subarray(_,_+P),Z),Z+=P,_+=P}const w=z;for(let G=0;G<w;G++){let L=0;D[O]=ne[G+L],L+=z,D[O+1]=ne[G+L],L+=z,D[O+2]=ne[G+L],L+=z,D[O+3]=ne[G+L],O+=4}se--}return D},m=function(E,F,I,z){const D=E[F+3],O=Math.pow(2,D-128)/255;I[z+0]=E[F+0]*O,I[z+1]=E[F+1]*O,I[z+2]=E[F+2]*O,I[z+3]=1},g=function(E,F,I,z){const D=E[F+3],O=Math.pow(2,D-128)/255;I[z+0]=Tr.toHalfFloat(Math.min(E[F+0]*O,65504)),I[z+1]=Tr.toHalfFloat(Math.min(E[F+1]*O,65504)),I[z+2]=Tr.toHalfFloat(Math.min(E[F+2]*O,65504)),I[z+3]=Tr.toHalfFloat(1)},A=new Uint8Array(e);A.pos=0;const y=h(A),B=y.width,x=y.height,M=d(A.subarray(A.pos),B,x);let b,C,T;switch(this.type){case zt:T=M.length/4;const E=new Float32Array(T*4);for(let I=0;I<T;I++)m(M,I*4,E,I*4);b=E,C=zt;break;case xt:T=M.length/4;const F=new Uint16Array(T*4);for(let I=0;I<T;I++)g(M,I*4,F,I*4);b=F,C=xt;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:B,height:x,data:b,header:y.string,gamma:y.gamma,exposure:y.exposure,type:C}}setDataType(e){return this.type=e,this}load(e,n,a,r){function t(o,s){switch(o.type){case zt:case xt:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=yt,o.magFilter=yt,o.generateMipmaps=!1,o.flipY=!0;break}n&&n(o,s)}return super.load(e,t,a,r)}}const Hr="colorSpace"in new Wt;class _l extends _o{constructor(e){super(e),this.type=xt}parse(e){const F=Math.pow(2.7182818,2.2);function I(p,v){for(var S=0,H=0;H<65536;++H)(H==0||p[H>>3]&1<<(H&7))&&(v[S++]=H);for(var X=S-1;S<65536;)v[S++]=0;return X}function z(p){for(var v=0;v<16384;v++)p[v]={},p[v].len=0,p[v].lit=0,p[v].p=null}const D={l:0,c:0,lc:0};function O(p,v,S,H,X){for(;S<p;)v=v<<8|we(H,X),S+=8;S-=p,D.l=v>>S&(1<<p)-1,D.c=v,D.lc=S}const _=new Array(59);function K(p){for(var v=0;v<=58;++v)_[v]=0;for(var v=0;v<65537;++v)_[p[v]]+=1;for(var S=0,v=58;v>0;--v){var H=S+_[v]>>1;_[v]=S,S=H}for(var v=0;v<65537;++v){var X=p[v];X>0&&(p[v]=X|_[X]++<<6)}}function N(p,v,S,H,X,Q,ie){for(var ae=S,ce=0,le=0;X<=Q;X++){if(ae.value-S.value>H)return!1;O(6,ce,le,p,ae);var ue=D.l;if(ce=D.c,le=D.lc,ie[X]=ue,ue==63){if(ae.value-S.value>H)throw"Something wrong with hufUnpackEncTable";O(8,ce,le,p,ae);var j=D.l+6;if(ce=D.c,le=D.lc,X+j>Q+1)throw"Something wrong with hufUnpackEncTable";for(;j--;)ie[X++]=0;X--}else if(ue>=59){var j=ue-59+2;if(X+j>Q+1)throw"Something wrong with hufUnpackEncTable";for(;j--;)ie[X++]=0;X--}}K(ie)}function ne(p){return p&63}function se(p){return p>>6}function Z(p,v,S,H){for(;v<=S;v++){var X=se(p[v]),Q=ne(p[v]);if(X>>Q)throw"Invalid table entry";if(Q>14){var ie=H[X>>Q-14];if(ie.len)throw"Invalid table entry";if(ie.lit++,ie.p){var ae=ie.p;ie.p=new Array(ie.lit);for(var ce=0;ce<ie.lit-1;++ce)ie.p[ce]=ae[ce]}else ie.p=new Array(1);ie.p[ie.lit-1]=v}else if(Q)for(var le=0,ce=1<<14-Q;ce>0;ce--){var ie=H[(X<<14-Q)+le];if(ie.len||ie.p)throw"Invalid table entry";ie.len=Q,ie.lit=v,le++}}return!0}const P={c:0,lc:0};function w(p,v,S,H){p=p<<8|we(S,H),v+=8,P.c=p,P.lc=v}const G={c:0,lc:0};function L(p,v,S,H,X,Q,ie,ae,ce,le){if(p==v){H<8&&(w(S,H,X,ie),S=P.c,H=P.lc),H-=8;var ue=S>>H,ue=new Uint8Array([ue])[0];if(ce.value+ue>le)return!1;for(var j=ae[ce.value-1];ue-- >0;)ae[ce.value++]=j}else if(ce.value<le)ae[ce.value++]=p;else return!1;G.c=S,G.lc=H}function J(p){return p&65535}function k(p){var v=J(p);return v>32767?v-65536:v}const W={a:0,b:0};function V(p,v){var S=k(p),H=k(v),X=H,Q=S+(X&1)+(X>>1),ie=Q,ae=Q-X;W.a=ie,W.b=ae}function q(p,v){var S=J(p),H=J(v),X=S-(H>>1)&65535,Q=H+X-32768&65535;W.a=Q,W.b=X}function fe(p,v,S,H,X,Q,ie){for(var ae=ie<16384,ce=S>X?X:S,le=1,ue;le<=ce;)le<<=1;for(le>>=1,ue=le,le>>=1;le>=1;){for(var j=0,rt=j+Q*(X-ue),Se=Q*le,xe=Q*ue,Oe=H*le,je=H*ue,qe,$e,ct,vt;j<=rt;j+=xe){for(var et=j,_t=j+H*(S-ue);et<=_t;et+=je){var nt=et+Oe,ht=et+Se,bt=ht+Oe;ae?(V(p[et+v],p[ht+v]),qe=W.a,ct=W.b,V(p[nt+v],p[bt+v]),$e=W.a,vt=W.b,V(qe,$e),p[et+v]=W.a,p[nt+v]=W.b,V(ct,vt),p[ht+v]=W.a,p[bt+v]=W.b):(q(p[et+v],p[ht+v]),qe=W.a,ct=W.b,q(p[nt+v],p[bt+v]),$e=W.a,vt=W.b,q(qe,$e),p[et+v]=W.a,p[nt+v]=W.b,q(ct,vt),p[ht+v]=W.a,p[bt+v]=W.b)}if(S&le){var ht=et+Se;ae?V(p[et+v],p[ht+v]):q(p[et+v],p[ht+v]),qe=W.a,p[ht+v]=W.b,p[et+v]=qe}}if(X&le)for(var et=j,_t=j+H*(S-ue);et<=_t;et+=je){var nt=et+Oe;ae?V(p[et+v],p[nt+v]):q(p[et+v],p[nt+v]),qe=W.a,p[nt+v]=W.b,p[et+v]=qe}ue=le,le>>=1}return j}function de(p,v,S,H,X,Q,ie,ae,ce,le){for(var ue=0,j=0,rt=ae,Se=Math.trunc(X.value+(Q+7)/8);X.value<Se;)for(w(ue,j,S,X),ue=P.c,j=P.lc;j>=14;){var xe=ue>>j-14&16383,Oe=v[xe];if(Oe.len)j-=Oe.len,L(Oe.lit,ie,ue,j,S,H,X,ce,le,rt),ue=G.c,j=G.lc;else{if(!Oe.p)throw"hufDecode issues";var je;for(je=0;je<Oe.lit;je++){for(var qe=ne(p[Oe.p[je]]);j<qe&&X.value<Se;)w(ue,j,S,X),ue=P.c,j=P.lc;if(j>=qe&&se(p[Oe.p[je]])==(ue>>j-qe&(1<<qe)-1)){j-=qe,L(Oe.p[je],ie,ue,j,S,H,X,ce,le,rt),ue=G.c,j=G.lc;break}}if(je==Oe.lit)throw"hufDecode issues"}}var $e=8-Q&7;for(ue>>=$e,j-=$e;j>0;){var Oe=v[ue<<14-j&16383];if(Oe.len)j-=Oe.len,L(Oe.lit,ie,ue,j,S,H,X,ce,le,rt),ue=G.c,j=G.lc;else throw"hufDecode issues"}return!0}function ee(p,v,S,H,X,Q){var ie={value:0},ae=S.value,ce=Re(v,S),le=Re(v,S);S.value+=4;var ue=Re(v,S);if(S.value+=4,ce<0||ce>=65537||le<0||le>=65537)throw"Something wrong with HUF_ENCSIZE";var j=new Array(65537),rt=new Array(16384);z(rt);var Se=H-(S.value-ae);if(N(p,v,S,Se,ce,le,j),ue>8*(H-(S.value-ae)))throw"Something wrong with hufUncompress";Z(j,ce,le,rt),de(j,rt,p,v,S,ue,le,Q,X,ie)}function re(p,v,S){for(var H=0;H<S;++H)v[H]=p[v[H]]}function Ie(p){for(var v=1;v<p.length;v++){var S=p[v-1]+p[v]-128;p[v]=S}}function Te(p,v){for(var S=0,H=Math.floor((p.length+1)/2),X=0,Q=p.length-1;!(X>Q||(v[X++]=p[S++],X>Q));)v[X++]=p[H++]}function me(p){for(var v=p.byteLength,S=new Array,H=0,X=new DataView(p);v>0;){var Q=X.getInt8(H++);if(Q<0){var ie=-Q;v-=ie+1;for(var ae=0;ae<ie;ae++)S.push(X.getUint8(H++))}else{var ie=Q;v-=2;for(var ce=X.getUint8(H++),ae=0;ae<ie+1;ae++)S.push(ce)}}return S}function Ee(p,v,S,H,X,Q){var nt=new DataView(Q.buffer),ie=S[p.idx[0]].width,ae=S[p.idx[0]].height,ce=3,le=Math.floor(ie/8),ue=Math.ceil(ie/8),j=Math.ceil(ae/8),rt=ie-(ue-1)*8,Se=ae-(j-1)*8,xe={value:0},Oe=new Array(ce),je=new Array(ce),qe=new Array(ce),$e=new Array(ce),ct=new Array(ce);for(let tt=0;tt<ce;++tt)ct[tt]=v[p.idx[tt]],Oe[tt]=tt<1?0:Oe[tt-1]+ue*j,je[tt]=new Float32Array(64),qe[tt]=new Uint16Array(64),$e[tt]=new Uint16Array(ue*64);for(let tt=0;tt<j;++tt){var vt=8;tt==j-1&&(vt=Se);var et=8;for(let at=0;at<ue;++at){at==ue-1&&(et=rt);for(let Ke=0;Ke<ce;++Ke)qe[Ke].fill(0),qe[Ke][0]=X[Oe[Ke]++],ye(xe,H,qe[Ke]),oe(qe[Ke],je[Ke]),Be(je[Ke]);Ce(je);for(let Ke=0;Ke<ce;++Ke)te(je[Ke],$e[Ke],at*64)}let dt=0;for(let at=0;at<ce;++at){const Ke=S[p.idx[at]].type;for(let Mt=8*tt;Mt<8*tt+vt;++Mt){dt=ct[at][Mt];for(let Ut=0;Ut<le;++Ut){const gt=Ut*64+(Mt&7)*8;nt.setUint16(dt+0*2*Ke,$e[at][gt+0],!0),nt.setUint16(dt+1*2*Ke,$e[at][gt+1],!0),nt.setUint16(dt+2*2*Ke,$e[at][gt+2],!0),nt.setUint16(dt+3*2*Ke,$e[at][gt+3],!0),nt.setUint16(dt+4*2*Ke,$e[at][gt+4],!0),nt.setUint16(dt+5*2*Ke,$e[at][gt+5],!0),nt.setUint16(dt+6*2*Ke,$e[at][gt+6],!0),nt.setUint16(dt+7*2*Ke,$e[at][gt+7],!0),dt+=8*2*Ke}}if(le!=ue)for(let Mt=8*tt;Mt<8*tt+vt;++Mt){const Ut=ct[at][Mt]+8*le*2*Ke,gt=le*64+(Mt&7)*8;for(let Nt=0;Nt<et;++Nt)nt.setUint16(Ut+Nt*2*Ke,$e[at][gt+Nt],!0)}}}for(var _t=new Uint16Array(ie),nt=new DataView(Q.buffer),ht=0;ht<ce;++ht){S[p.idx[ht]].decoded=!0;var bt=S[p.idx[ht]].type;if(S[ht].type==2)for(var Vt=0;Vt<ae;++Vt){const tt=ct[ht][Vt];for(var mt=0;mt<ie;++mt)_t[mt]=nt.getUint16(tt+mt*2*bt,!0);for(var mt=0;mt<ie;++mt)nt.setFloat32(tt+mt*2*bt,Y(_t[mt]),!0)}}}function ye(p,v,S){for(var H,X=1;X<64;)H=v[p.value],H==65280?X=64:H>>8==255?X+=H&255:(S[X]=H,X++),p.value++}function oe(p,v){v[0]=Y(p[0]),v[1]=Y(p[1]),v[2]=Y(p[5]),v[3]=Y(p[6]),v[4]=Y(p[14]),v[5]=Y(p[15]),v[6]=Y(p[27]),v[7]=Y(p[28]),v[8]=Y(p[2]),v[9]=Y(p[4]),v[10]=Y(p[7]),v[11]=Y(p[13]),v[12]=Y(p[16]),v[13]=Y(p[26]),v[14]=Y(p[29]),v[15]=Y(p[42]),v[16]=Y(p[3]),v[17]=Y(p[8]),v[18]=Y(p[12]),v[19]=Y(p[17]),v[20]=Y(p[25]),v[21]=Y(p[30]),v[22]=Y(p[41]),v[23]=Y(p[43]),v[24]=Y(p[9]),v[25]=Y(p[11]),v[26]=Y(p[18]),v[27]=Y(p[24]),v[28]=Y(p[31]),v[29]=Y(p[40]),v[30]=Y(p[44]),v[31]=Y(p[53]),v[32]=Y(p[10]),v[33]=Y(p[19]),v[34]=Y(p[23]),v[35]=Y(p[32]),v[36]=Y(p[39]),v[37]=Y(p[45]),v[38]=Y(p[52]),v[39]=Y(p[54]),v[40]=Y(p[20]),v[41]=Y(p[22]),v[42]=Y(p[33]),v[43]=Y(p[38]),v[44]=Y(p[46]),v[45]=Y(p[51]),v[46]=Y(p[55]),v[47]=Y(p[60]),v[48]=Y(p[21]),v[49]=Y(p[34]),v[50]=Y(p[37]),v[51]=Y(p[47]),v[52]=Y(p[50]),v[53]=Y(p[56]),v[54]=Y(p[59]),v[55]=Y(p[61]),v[56]=Y(p[35]),v[57]=Y(p[36]),v[58]=Y(p[48]),v[59]=Y(p[49]),v[60]=Y(p[57]),v[61]=Y(p[58]),v[62]=Y(p[62]),v[63]=Y(p[63])}function Be(p){const v=.5*Math.cos(.7853975),S=.5*Math.cos(3.14159/16),H=.5*Math.cos(3.14159/8),X=.5*Math.cos(3*3.14159/16),Q=.5*Math.cos(5*3.14159/16),ie=.5*Math.cos(3*3.14159/8),ae=.5*Math.cos(7*3.14159/16);for(var ce=new Array(4),le=new Array(4),ue=new Array(4),j=new Array(4),rt=0;rt<8;++rt){var Se=rt*8;ce[0]=H*p[Se+2],ce[1]=ie*p[Se+2],ce[2]=H*p[Se+6],ce[3]=ie*p[Se+6],le[0]=S*p[Se+1]+X*p[Se+3]+Q*p[Se+5]+ae*p[Se+7],le[1]=X*p[Se+1]-ae*p[Se+3]-S*p[Se+5]-Q*p[Se+7],le[2]=Q*p[Se+1]-S*p[Se+3]+ae*p[Se+5]+X*p[Se+7],le[3]=ae*p[Se+1]-Q*p[Se+3]+X*p[Se+5]-S*p[Se+7],ue[0]=v*(p[Se+0]+p[Se+4]),ue[3]=v*(p[Se+0]-p[Se+4]),ue[1]=ce[0]+ce[3],ue[2]=ce[1]-ce[2],j[0]=ue[0]+ue[1],j[1]=ue[3]+ue[2],j[2]=ue[3]-ue[2],j[3]=ue[0]-ue[1],p[Se+0]=j[0]+le[0],p[Se+1]=j[1]+le[1],p[Se+2]=j[2]+le[2],p[Se+3]=j[3]+le[3],p[Se+4]=j[3]-le[3],p[Se+5]=j[2]-le[2],p[Se+6]=j[1]-le[1],p[Se+7]=j[0]-le[0]}for(var xe=0;xe<8;++xe)ce[0]=H*p[16+xe],ce[1]=ie*p[16+xe],ce[2]=H*p[48+xe],ce[3]=ie*p[48+xe],le[0]=S*p[8+xe]+X*p[24+xe]+Q*p[40+xe]+ae*p[56+xe],le[1]=X*p[8+xe]-ae*p[24+xe]-S*p[40+xe]-Q*p[56+xe],le[2]=Q*p[8+xe]-S*p[24+xe]+ae*p[40+xe]+X*p[56+xe],le[3]=ae*p[8+xe]-Q*p[24+xe]+X*p[40+xe]-S*p[56+xe],ue[0]=v*(p[xe]+p[32+xe]),ue[3]=v*(p[xe]-p[32+xe]),ue[1]=ce[0]+ce[3],ue[2]=ce[1]-ce[2],j[0]=ue[0]+ue[1],j[1]=ue[3]+ue[2],j[2]=ue[3]-ue[2],j[3]=ue[0]-ue[1],p[0+xe]=j[0]+le[0],p[8+xe]=j[1]+le[1],p[16+xe]=j[2]+le[2],p[24+xe]=j[3]+le[3],p[32+xe]=j[3]-le[3],p[40+xe]=j[2]-le[2],p[48+xe]=j[1]-le[1],p[56+xe]=j[0]-le[0]}function Ce(p){for(var v=0;v<64;++v){var S=p[0][v],H=p[1][v],X=p[2][v];p[0][v]=S+1.5747*X,p[1][v]=S-.1873*H-.4682*X,p[2][v]=S+1.8556*H}}function te(p,v,S){for(var H=0;H<64;++H)v[S+H]=Tr.toHalfFloat(Ue(p[H]))}function Ue(p){return p<=1?Math.sign(p)*Math.pow(Math.abs(p),2.2):Math.sign(p)*Math.pow(F,Math.abs(p)-1)}function ge(p){return new DataView(p.array.buffer,p.offset.value,p.size)}function be(p){var v=p.viewer.buffer.slice(p.offset.value,p.offset.value+p.size),S=new Uint8Array(me(v)),H=new Uint8Array(S.length);return Ie(S),Te(S,H),new DataView(H.buffer)}function pe(p){var v=p.array.slice(p.offset.value,p.offset.value+p.size),S=cn(v),H=new Uint8Array(S.length);return Ie(S),Te(S,H),new DataView(H.buffer)}function ze(p){for(var v=p.viewer,S={value:p.offset.value},H=new Uint16Array(p.width*p.scanlineBlockSize*(p.channels*p.type)),X=new Uint8Array(8192),Q=0,ie=new Array(p.channels),ae=0;ae<p.channels;ae++)ie[ae]={},ie[ae].start=Q,ie[ae].end=ie[ae].start,ie[ae].nx=p.width,ie[ae].ny=p.lines,ie[ae].size=p.type,Q+=ie[ae].nx*ie[ae].ny*ie[ae].size;var ce=He(v,S),le=He(v,S);if(le>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ce<=le)for(var ae=0;ae<le-ce+1;ae++)X[ae+ce]=R(v,S);var ue=new Uint16Array(65536),j=I(X,ue),rt=Re(v,S);ee(p.array,v,S,rt,H,Q);for(var ae=0;ae<p.channels;++ae)for(var Se=ie[ae],xe=0;xe<ie[ae].size;++xe)fe(H,Se.start+xe,Se.nx,Se.size,Se.ny,Se.nx*Se.size,j);re(ue,H,Q);for(var Oe=0,je=new Uint8Array(H.buffer.byteLength),qe=0;qe<p.lines;qe++)for(var $e=0;$e<p.channels;$e++){var Se=ie[$e],ct=Se.nx*Se.size,vt=new Uint8Array(H.buffer,Se.end*2,ct*2);je.set(vt,Oe),Oe+=ct*2,Se.end+=ct}return new DataView(je.buffer)}function ve(p){var v=p.array.slice(p.offset.value,p.offset.value+p.size),S=cn(v);const H=p.lines*p.channels*p.width,X=p.type==1?new Uint16Array(H):new Uint32Array(H);let Q=0,ie=0;const ae=new Array(4);for(let ce=0;ce<p.lines;ce++)for(let le=0;le<p.channels;le++){let ue=0;switch(p.type){case 1:ae[0]=Q,ae[1]=ae[0]+p.width,Q=ae[1]+p.width;for(let j=0;j<p.width;++j){const rt=S[ae[0]++]<<8|S[ae[1]++];ue+=rt,X[ie]=ue,ie++}break;case 2:ae[0]=Q,ae[1]=ae[0]+p.width,ae[2]=ae[1]+p.width,Q=ae[2]+p.width;for(let j=0;j<p.width;++j){const rt=S[ae[0]++]<<24|S[ae[1]++]<<16|S[ae[2]++]<<8;ue+=rt,X[ie]=ue,ie++}break}}return new DataView(X.buffer)}function Me(p){var v=p.viewer,S={value:p.offset.value},H=new Uint8Array(p.width*p.lines*(p.channels*p.type*2)),X={version:$(v,S),unknownUncompressedSize:$(v,S),unknownCompressedSize:$(v,S),acCompressedSize:$(v,S),dcCompressedSize:$(v,S),rleCompressedSize:$(v,S),rleUncompressedSize:$(v,S),rleRawSize:$(v,S),totalAcUncompressedCount:$(v,S),totalDcUncompressedCount:$(v,S),acCompression:$(v,S)};if(X.version<2)throw"EXRLoader.parse: "+Rt.compression+" version "+X.version+" is unsupported";for(var Q=new Array,ie=He(v,S)-2;ie>0;){var ae=De(v.buffer,S),ce=R(v,S),le=ce>>2&3,ue=(ce>>4)-1,j=new Int8Array([ue])[0],rt=R(v,S);Q.push({name:ae,index:j,type:rt,compression:le}),ie-=ae.length+3}for(var Se=Rt.channels,xe=new Array(p.channels),Oe=0;Oe<p.channels;++Oe){var je=xe[Oe]={},qe=Se[Oe];je.name=qe.name,je.compression=0,je.decoded=!1,je.type=qe.pixelType,je.pLinear=qe.pLinear,je.width=p.width,je.height=p.lines}for(var $e={idx:new Array(3)},ct=0;ct<p.channels;++ct)for(var je=xe[ct],Oe=0;Oe<Q.length;++Oe){var vt=Q[Oe];je.name==vt.name&&(je.compression=vt.compression,vt.index>=0&&($e.idx[vt.index]=ct),je.offset=ct)}if(X.acCompressedSize>0)switch(X.acCompression){case 0:var nt=new Uint16Array(X.totalAcUncompressedCount);ee(p.array,v,S,X.acCompressedSize,nt,X.totalAcUncompressedCount);break;case 1:var et=p.array.slice(S.value,S.value+X.totalAcUncompressedCount),_t=cn(et),nt=new Uint16Array(_t.buffer);S.value+=X.totalAcUncompressedCount;break}if(X.dcCompressedSize>0){var ht={array:p.array,offset:S,size:X.dcCompressedSize},bt=new Uint16Array(pe(ht).buffer);S.value+=X.dcCompressedSize}if(X.rleRawSize>0){var et=p.array.slice(S.value,S.value+X.rleCompressedSize),_t=cn(et),Vt=me(_t.buffer);S.value+=X.rleCompressedSize}for(var mt=0,tt=new Array(xe.length),Oe=0;Oe<tt.length;++Oe)tt[Oe]=new Array;for(var dt=0;dt<p.lines;++dt)for(var at=0;at<xe.length;++at)tt[at].push(mt),mt+=xe[at].width*p.type*2;Ee($e,tt,xe,nt,bt,H);for(var Oe=0;Oe<xe.length;++Oe){var je=xe[Oe];if(!je.decoded)switch(je.compression){case 2:for(var Ke=0,Mt=0,dt=0;dt<p.lines;++dt){for(var Ut=tt[Oe][Ke],gt=0;gt<je.width;++gt){for(var Nt=0;Nt<2*je.type;++Nt)H[Ut++]=Vt[Mt+Nt*je.width*je.height];Mt++}Ke++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(H.buffer)}function De(p,v){for(var S=new Uint8Array(p),H=0;S[v.value+H]!=0;)H+=1;var X=new TextDecoder().decode(S.slice(v.value,v.value+H));return v.value=v.value+H+1,X}function ke(p,v,S){var H=new TextDecoder().decode(new Uint8Array(p).slice(v.value,v.value+S));return v.value=v.value+S,H}function Ve(p,v){var S=Pe(p,v),H=Re(p,v);return[S,H]}function it(p,v){var S=Re(p,v),H=Re(p,v);return[S,H]}function Pe(p,v){var S=p.getInt32(v.value,!0);return v.value=v.value+4,S}function Re(p,v){var S=p.getUint32(v.value,!0);return v.value=v.value+4,S}function we(p,v){var S=p[v.value];return v.value=v.value+1,S}function R(p,v){var S=p.getUint8(v.value);return v.value=v.value+1,S}const $=function(p,v){let S;return"getBigInt64"in DataView.prototype?S=Number(p.getBigInt64(v.value,!0)):S=p.getUint32(v.value+4,!0)+Number(p.getUint32(v.value,!0)<<32),v.value+=8,S};function he(p,v){var S=p.getFloat32(v.value,!0);return v.value+=4,S}function Fe(p,v){return Tr.toHalfFloat(he(p,v))}function Y(p){var v=(p&31744)>>10,S=p&1023;return(p>>15?-1:1)*(v?v===31?S?NaN:1/0:Math.pow(2,v-15)*(1+S/1024):6103515625e-14*(S/1024))}function He(p,v){var S=p.getUint16(v.value,!0);return v.value+=2,S}function pt(p,v){return Y(He(p,v))}function Ze(p,v,S,H){for(var X=S.value,Q=[];S.value<X+H-1;){var ie=De(v,S),ae=Pe(p,S),ce=R(p,S);S.value+=3;var le=Pe(p,S),ue=Pe(p,S);Q.push({name:ie,pixelType:ae,pLinear:ce,xSampling:le,ySampling:ue})}return S.value+=1,Q}function Je(p,v){var S=he(p,v),H=he(p,v),X=he(p,v),Q=he(p,v),ie=he(p,v),ae=he(p,v),ce=he(p,v),le=he(p,v);return{redX:S,redY:H,greenX:X,greenY:Q,blueX:ie,blueY:ae,whiteX:ce,whiteY:le}}function Qe(p,v){var S=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],H=R(p,v);return S[H]}function Xe(p,v){var S=Re(p,v),H=Re(p,v),X=Re(p,v),Q=Re(p,v);return{xMin:S,yMin:H,xMax:X,yMax:Q}}function Le(p,v){var S=["INCREASING_Y"],H=R(p,v);return S[H]}function Ye(p,v){var S=he(p,v),H=he(p,v);return[S,H]}function lt(p,v){var S=he(p,v),H=he(p,v),X=he(p,v);return[S,H,X]}function ut(p,v,S,H,X){if(H==="string"||H==="stringvector"||H==="iccProfile")return ke(v,S,X);if(H==="chlist")return Ze(p,v,S,X);if(H==="chromaticities")return Je(p,S);if(H==="compression")return Qe(p,S);if(H==="box2i")return Xe(p,S);if(H==="lineOrder")return Le(p,S);if(H==="float")return he(p,S);if(H==="v2f")return Ye(p,S);if(H==="v3f")return lt(p,S);if(H==="int")return Pe(p,S);if(H==="rational")return Ve(p,S);if(H==="timecode")return it(p,S);if(H==="preview")return S.value+=X,"skipped";S.value+=X}function ft(p,v,S){const H={};if(p.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";H.version=p.getUint8(4);const X=p.getUint8(5);H.spec={singleTile:!!(X&2),longName:!!(X&4),deepFormat:!!(X&8),multiPart:!!(X&16)},S.value=8;for(var Q=!0;Q;){var ie=De(v,S);if(ie==0)Q=!1;else{var ae=De(v,S),ce=Re(p,S),le=ut(p,v,S,ae,ce);le===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ae}'.`):H[ie]=le}}if(X&-5)throw console.error("EXRHeader:",H),"THREE.EXRLoader: provided file is currently unsupported.";return H}function Dt(p,v,S,H,X){const Q={size:0,viewer:v,array:S,offset:H,width:p.dataWindow.xMax-p.dataWindow.xMin+1,height:p.dataWindow.yMax-p.dataWindow.yMin+1,channels:p.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:p.channels[0].pixelType,uncompress:null,getter:null,format:null,[Hr?"colorSpace":"encoding"]:null};switch(p.compression){case"NO_COMPRESSION":Q.lines=1,Q.uncompress=ge;break;case"RLE_COMPRESSION":Q.lines=1,Q.uncompress=be;break;case"ZIPS_COMPRESSION":Q.lines=1,Q.uncompress=pe;break;case"ZIP_COMPRESSION":Q.lines=16,Q.uncompress=pe;break;case"PIZ_COMPRESSION":Q.lines=32,Q.uncompress=ze;break;case"PXR24_COMPRESSION":Q.lines=16,Q.uncompress=ve;break;case"DWAA_COMPRESSION":Q.lines=32,Q.uncompress=Me;break;case"DWAB_COMPRESSION":Q.lines=256,Q.uncompress=Me;break;default:throw"EXRLoader.parse: "+p.compression+" is unsupported"}if(Q.scanlineBlockSize=Q.lines,Q.type==1)switch(X){case zt:Q.getter=pt,Q.inputSize=2;break;case xt:Q.getter=He,Q.inputSize=2;break}else if(Q.type==2)switch(X){case zt:Q.getter=he,Q.inputSize=4;break;case xt:Q.getter=Fe,Q.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Q.type+" for "+p.compression+".";Q.blockCount=(p.dataWindow.yMax+1)/Q.scanlineBlockSize;for(var ie=0;ie<Q.blockCount;ie++)$(v,H);Q.outputChannels=Q.channels==3?4:Q.channels;const ae=Q.width*Q.height*Q.outputChannels;switch(X){case zt:Q.byteArray=new Float32Array(ae),Q.channels<Q.outputChannels&&Q.byteArray.fill(1,0,ae);break;case xt:Q.byteArray=new Uint16Array(ae),Q.channels<Q.outputChannels&&Q.byteArray.fill(15360,0,ae);break;default:console.error("THREE.EXRLoader: unsupported type: ",X);break}return Q.bytesPerLine=Q.width*Q.inputSize*Q.channels,Q.outputChannels==4?Q.format=Yr:Q.format=ss,Hr?Q.colorSpace="srgb-linear":Q.encoding=3e3,Q}const It=new DataView(e),Ht=new Uint8Array(e),Et={value:0},Rt=ft(It,e,Et),Ne=Dt(Rt,It,Ht,Et,this.type),At={value:0},Yt={R:0,G:1,B:2,A:3,Y:0};for(let p=0;p<Ne.height/Ne.scanlineBlockSize;p++){const v=Re(It,Et);Ne.size=Re(It,Et),Ne.lines=v+Ne.scanlineBlockSize>Ne.height?Ne.height-v:Ne.scanlineBlockSize;const H=Ne.size<Ne.lines*Ne.bytesPerLine?Ne.uncompress(Ne):ge(Ne);Et.value+=Ne.size;for(let X=0;X<Ne.scanlineBlockSize;X++){const Q=X+p*Ne.scanlineBlockSize;if(Q>=Ne.height)break;for(let ie=0;ie<Ne.channels;ie++){const ae=Yt[Rt.channels[ie].name];for(let ce=0;ce<Ne.width;ce++){At.value=(X*(Ne.channels*Ne.width)+ie*Ne.width+ce)*Ne.inputSize;const le=(Ne.height-1-Q)*(Ne.width*Ne.outputChannels)+ce*Ne.outputChannels+ae;Ne.byteArray[le]=Ne.getter(H,At)}}}}return{header:Rt,width:Ne.width,height:Ne.height,data:Ne.byteArray,format:Ne.format,[Hr?"colorSpace":"encoding"]:Ne[Hr?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,a,r){function t(o,s){Hr?o.colorSpace=s.colorSpace:o.encoding=s.encoding,o.minFilter=yt,o.magFilter=yt,o.generateMipmaps=!1,o.flipY=!1,n&&n(o,s)}return super.load(e,t,a,r)}}const jn=new WeakMap;class Gl extends fa{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,a,r){const t=new or(this.manager);t.setPath(this.path),t.setResponseType("arraybuffer"),t.setRequestHeader(this.requestHeader),t.setWithCredentials(this.withCredentials),t.load(e,o=>{const s={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,s).then(n).catch(r)},a,r)}decodeDracoFile(e,n,a,r){const t={attributeIDs:a||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!a};this.decodeGeometry(e,t).then(n)}decodeGeometry(e,n){for(const i in n.attributeTypes){const c=n.attributeTypes[i];c.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[i]=c.name)}const a=JSON.stringify(n);if(jn.has(e)){const i=jn.get(e);if(i.key===a)return i.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const t=this.workerNextTaskID++,o=e.byteLength,s=this._getWorker(t,o).then(i=>(r=i,new Promise((c,u)=>{r._callbacks[t]={resolve:c,reject:u},r.postMessage({type:"decode",id:t,taskConfig:n,buffer:e},[e])}))).then(i=>this._createGeometry(i.geometry));return s.catch(()=>!0).then(()=>{r&&t&&this._releaseTask(r,t)}),jn.set(e,{key:a,promise:s}),s}_createGeometry(e){const n=new Io;e.index&&n.setIndex(new Kr(e.index.array,1));for(let a=0;a<e.attributes.length;a++){const r=e.attributes[a],t=r.name,o=r.array,s=r.itemSize;n.setAttribute(t,new Kr(o,s))}return n}_loadLibrary(e,n){const a=new or(this.manager);return a.setPath(this.decoderPath),a.setResponseType(n),a.setWithCredentials(this.withCredentials),new Promise((r,t)=>{a.load(e,r,void 0,t)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(a=>{const r=a[0];e||(this.decoderConfig.wasmBinary=a[1]);const t=Ul.toString(),o=["/* draco decoder */",r,"","/* worker */",t.substring(t.indexOf("{")+1,t.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(t){const o=t.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,t){return r._taskLoad>t._taskLoad?-1:1});const a=this.workerPool[this.workerPool.length-1];return a._taskCosts[e]=n,a._taskLoad+=n,a})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Ul(){let l,e;onmessage=function(o){const s=o.data;switch(s.type){case"init":l=s.decoderConfig,e=new Promise(function(u){l.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(l)});break;case"decode":const i=s.buffer,c=s.taskConfig;e.then(u=>{const f=u.draco,h=new f.Decoder,d=new f.DecoderBuffer;d.Init(new Int8Array(i),i.byteLength);try{const m=n(f,h,d,c),g=m.attributes.map(A=>A.array.buffer);m.index&&g.push(m.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:m},g)}catch(m){console.error(m),self.postMessage({type:"error",id:s.id,error:m.message})}finally{f.destroy(d),f.destroy(h)}});break}};function n(o,s,i,c){const u=c.attributeIDs,f=c.attributeTypes;let h,d;const m=s.GetEncodedGeometryType(i);if(m===o.TRIANGULAR_MESH)h=new o.Mesh,d=s.DecodeBufferToMesh(i,h);else if(m===o.POINT_CLOUD)h=new o.PointCloud,d=s.DecodeBufferToPointCloud(i,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const g={index:null,attributes:[]};for(const A in u){const y=self[f[A]];let B,x;if(c.useUniqueIDs)x=u[A],B=s.GetAttributeByUniqueId(h,x);else{if(x=s.GetAttributeId(h,o[u[A]]),x===-1)continue;B=s.GetAttribute(h,x)}g.attributes.push(r(o,s,h,A,y,B))}return m===o.TRIANGULAR_MESH&&(g.index=a(o,s,h)),o.destroy(h),g}function a(o,s,i){const u=i.num_faces()*3,f=u*4,h=o._malloc(f);s.GetTrianglesUInt32Array(i,f,h);const d=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:d,itemSize:1}}function r(o,s,i,c,u,f){const h=f.num_components(),m=i.num_points()*h,g=m*u.BYTES_PER_ELEMENT,A=t(o,u),y=o._malloc(g);s.GetAttributeDataArrayForAllPoints(i,f,A,g,y);const B=new u(o.HEAPF32.buffer,y,m).slice();return o._free(y),{name:c,array:B,itemSize:h}}function t(o,s){switch(s){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let un;const Kn=()=>{if(un)return un;const l="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",e="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",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),a=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=l;WebAssembly.validate(n)&&(r=e);let t;const o=WebAssembly.instantiate(s(r),{}).then(f=>{t=f.instance,t.exports.__wasm_call_ctors()});function s(f){const h=new Uint8Array(f.length);for(let m=0;m<f.length;++m){const g=f.charCodeAt(m);h[m]=g>96?g-71:g>64?g-65:g>47?g+4:g>46?63:62}let d=0;for(let m=0;m<f.length;++m)h[d++]=h[m]<60?a[h[m]]:(h[m]-60)*64+h[++m];return h.buffer.slice(0,d)}function i(f,h,d,m,g,A){const y=t.exports.sbrk,B=d+3&-4,x=y(B*m),M=y(g.length),b=new Uint8Array(t.exports.memory.buffer);b.set(g,M);const C=f(x,d,m,M,g.length);if(C===0&&A&&A(x,B,m),h.set(b.subarray(x,x+d*m)),y(x-y(0)),C!==0)throw new Error(`Malformed buffer data: ${C}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return un={ready:o,supported:!0,decodeVertexBuffer(f,h,d,m,g){i(t.exports.meshopt_decodeVertexBuffer,f,h,d,m,t.exports[c[g]])},decodeIndexBuffer(f,h,d,m){i(t.exports.meshopt_decodeIndexBuffer,f,h,d,m)},decodeIndexSequence(f,h,d,m){i(t.exports.meshopt_decodeIndexSequence,f,h,d,m)},decodeGltfBuffer(f,h,d,m,g,A){i(t.exports[u[g]],f,h,d,m,t.exports[c[A]])}},un};function Ll(){var l=Object.create(null);function e(r,t){var o=r.id,s=r.name,i=r.dependencies;i===void 0&&(i=[]);var c=r.init;c===void 0&&(c=function(){});var u=r.getTransferables;if(u===void 0&&(u=null),!l[o])try{i=i.map(function(h){return h&&h.isWorkerModule&&(e(h,function(d){if(d instanceof Error)throw d}),h=l[h.id].value),h}),c=a("<"+s+">.init",c),u&&(u=a("<"+s+">.getTransferables",u));var f=null;typeof c=="function"?f=c.apply(void 0,i):console.error("worker module init function failed to rehydrate"),l[o]={id:o,value:f,getTransferables:u},t(f)}catch(h){h&&h.noLog||console.error(h),t(h)}}function n(r,t){var o,s=r.id,i=r.args;(!l[s]||typeof l[s].value!="function")&&t(new Error("Worker module "+s+": not found or its 'init' did not return a function"));try{var c=(o=l[s]).value.apply(o,i);c&&typeof c.then=="function"?c.then(u,function(f){return t(f instanceof Error?f:new Error(""+f))}):u(c)}catch(f){t(f)}function u(f){try{var h=l[s].getTransferables&&l[s].getTransferables(f);(!h||!Array.isArray(h)||!h.length)&&(h=void 0),t(f,h)}catch(d){console.error(d),t(d)}}}function a(r,t){var o=void 0;self.troikaDefine=function(i){return o=i};var s=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+t+`
)`],{type:"application/javascript"}));try{importScripts(s)}catch(i){console.error(i)}return URL.revokeObjectURL(s),delete self.troikaDefine,o}self.addEventListener("message",function(r){var t=r.data,o=t.messageId,s=t.action,i=t.data;try{s==="registerModule"&&e(i,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),s==="callModule"&&n(i,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function Ol(l){var e=function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=l.dependencies,a=l.init;n=Array.isArray(n)?n.map(function(t){return t&&(t=t.onMainThread||t,t._getInitResult&&(t=t._getInitResult())),t}):[];var r=Promise.all(n).then(function(t){return a.apply(null,t)});return e._getInitResult=function(){return r},r},e}var $o=function(){var l=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),l=!0}catch(n){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return $o=function(){return l},l},kl=0,Pl=0,Wn=!1,Xr=Object.create(null),Qr=Object.create(null),oa=Object.create(null);function Ir(l){if((!l||typeof l.init!="function")&&!Wn)throw new Error("requires `options.init` function");var e=l.dependencies,n=l.init,a=l.getTransferables,r=l.workerId,t=Ol(l);r==null&&(r="#default");var o="workerModule"+ ++kl,s=l.name||o,i=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(Wn=!0,u=Ir({workerId:r,name:"<"+s+"> function dependency: "+u.name,init:`function(){return (
`+mn(u)+`
)}`}),Wn=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function c(){for(var u=[],f=arguments.length;f--;)u[f]=arguments[f];if(!$o())return t.apply(void 0,u);if(!i){i=no(r,"registerModule",c.workerModuleData);var h=function(){i=null,Qr[r].delete(h)};(Qr[r]||(Qr[r]=new Set)).add(h)}return i.then(function(d){var m=d.isCallable;if(m)return no(r,"callModule",{id:o,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return c.workerModuleData={isWorkerModule:!0,id:o,name:s,dependencies:e,init:mn(n),getTransferables:a&&mn(a)},c.onMainThread=t,c}function Hl(l){Qr[l]&&Qr[l].forEach(function(e){e()}),Xr[l]&&(Xr[l].terminate(),delete Xr[l])}function mn(l){var e=l.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Nl(l){var e=Xr[l];if(!e){var n=mn(Ll);e=Xr[l]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+l.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(a){var r=a.data,t=r.messageId,o=oa[t];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete oa[t],o(r)}}return e}function no(l,e,n){return new Promise(function(a,r){var t=++Pl;oa[t]=function(o){o.success?a(o.result):r(new Error("Error in worker "+e+" call: "+o.error))},Nl(l).postMessage({messageId:t,action:e,data:n})})}function ei(){var l=function(e){function n(Z,P,w,G,L,J,k,W){var V=1-k;W.x=V*V*Z+2*V*k*w+k*k*L,W.y=V*V*P+2*V*k*G+k*k*J}function a(Z,P,w,G,L,J,k,W,V,q){var fe=1-V;q.x=fe*fe*fe*Z+3*fe*fe*V*w+3*fe*V*V*L+V*V*V*k,q.y=fe*fe*fe*P+3*fe*fe*V*G+3*fe*V*V*J+V*V*V*W}function r(Z,P){for(var w=/([MLQCZ])([^MLQCZ]*)/g,G,L,J,k,W;G=w.exec(Z);){var V=G[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(q){return parseFloat(q)});switch(G[1]){case"M":k=L=V[0],W=J=V[1];break;case"L":(V[0]!==k||V[1]!==W)&&P("L",k,W,k=V[0],W=V[1]);break;case"Q":{P("Q",k,W,k=V[2],W=V[3],V[0],V[1]);break}case"C":{P("C",k,W,k=V[4],W=V[5],V[0],V[1],V[2],V[3]);break}case"Z":(k!==L||W!==J)&&P("L",k,W,L,J);break}}}function t(Z,P,w){w===void 0&&(w=16);var G={x:0,y:0};r(Z,function(L,J,k,W,V,q,fe,de,ee){switch(L){case"L":P(J,k,W,V);break;case"Q":{for(var re=J,Ie=k,Te=1;Te<w;Te++)n(J,k,q,fe,W,V,Te/(w-1),G),P(re,Ie,G.x,G.y),re=G.x,Ie=G.y;break}case"C":{for(var me=J,Ee=k,ye=1;ye<w;ye++)a(J,k,q,fe,de,ee,W,V,ye/(w-1),G),P(me,Ee,G.x,G.y),me=G.x,Ee=G.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",s="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",i=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(Z,P){var w=Z.getContext?Z.getContext("webgl",c):Z,G=i.get(w);if(!G){let fe=function(me){var Ee=J[me];if(!Ee&&(Ee=J[me]=w.getExtension(me),!Ee))throw new Error(me+" not supported");return Ee},de=function(me,Ee){var ye=w.createShader(Ee);return w.shaderSource(ye,me),w.compileShader(ye),ye},ee=function(me,Ee,ye,oe){if(!k[me]){var Be={},Ce={},te=w.createProgram();w.attachShader(te,de(Ee,w.VERTEX_SHADER)),w.attachShader(te,de(ye,w.FRAGMENT_SHADER)),w.linkProgram(te),k[me]={program:te,transaction:function(ge){w.useProgram(te),ge({setUniform:function(pe,ze){for(var ve=[],Me=arguments.length-2;Me-- >0;)ve[Me]=arguments[Me+2];var De=Ce[ze]||(Ce[ze]=w.getUniformLocation(te,ze));w["uniform"+pe].apply(w,[De].concat(ve))},setAttribute:function(pe,ze,ve,Me,De){var ke=Be[pe];ke||(ke=Be[pe]={buf:w.createBuffer(),loc:w.getAttribLocation(te,pe),data:null}),w.bindBuffer(w.ARRAY_BUFFER,ke.buf),w.vertexAttribPointer(ke.loc,ze,w.FLOAT,!1,0,0),w.enableVertexAttribArray(ke.loc),L?w.vertexAttribDivisor(ke.loc,Me):fe("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ke.loc,Me),De!==ke.data&&(w.bufferData(w.ARRAY_BUFFER,De,ve),ke.data=De)}})}}}k[me].transaction(oe)},re=function(me,Ee){V++;try{w.activeTexture(w.TEXTURE0+V);var ye=W[me];ye||(ye=W[me]=w.createTexture(),w.bindTexture(w.TEXTURE_2D,ye),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.NEAREST)),w.bindTexture(w.TEXTURE_2D,ye),Ee(ye,V)}finally{V--}},Ie=function(me,Ee,ye){var oe=w.createFramebuffer();q.push(oe),w.bindFramebuffer(w.FRAMEBUFFER,oe),w.activeTexture(w.TEXTURE0+Ee),w.bindTexture(w.TEXTURE_2D,me),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,me,0);try{ye(oe)}finally{w.deleteFramebuffer(oe),w.bindFramebuffer(w.FRAMEBUFFER,q[--q.length-1]||null)}},Te=function(){J={},k={},W={},V=-1,q.length=0};var L=typeof WebGL2RenderingContext<"u"&&w instanceof WebGL2RenderingContext,J={},k={},W={},V=-1,q=[];w.canvas.addEventListener("webglcontextlost",function(me){Te(),me.preventDefault()},!1),i.set(w,G={gl:w,isWebGL2:L,getExtension:fe,withProgram:ee,withTexture:re,withTextureFramebuffer:Ie,handleContextLoss:Te})}P(G)}function f(Z,P,w,G,L,J,k,W){k===void 0&&(k=15),W===void 0&&(W=null),u(Z,function(V){var q=V.gl,fe=V.withProgram,de=V.withTexture;de("copy",function(ee,re){q.texImage2D(q.TEXTURE_2D,0,q.RGBA,L,J,0,q.RGBA,q.UNSIGNED_BYTE,P),fe("copy",o,s,function(Ie){var Te=Ie.setUniform,me=Ie.setAttribute;me("aUV",2,q.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Te("1i","image",re),q.bindFramebuffer(q.FRAMEBUFFER,W||null),q.disable(q.BLEND),q.colorMask(k&8,k&4,k&2,k&1),q.viewport(w,G,L,J),q.scissor(w,G,L,J),q.drawArrays(q.TRIANGLES,0,3)})})})}function h(Z,P,w){var G=Z.width,L=Z.height;u(Z,function(J){var k=J.gl,W=new Uint8Array(G*L*4);k.readPixels(0,0,G,L,k.RGBA,k.UNSIGNED_BYTE,W),Z.width=P,Z.height=w,f(k,W,0,0,G,L)})}var d=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:f,resizeWebGLCanvasWithoutClearing:h});function m(Z,P,w,G,L,J){J===void 0&&(J=1);var k=new Uint8Array(Z*P),W=G[2]-G[0],V=G[3]-G[1],q=[];t(w,function(me,Ee,ye,oe){q.push({x1:me,y1:Ee,x2:ye,y2:oe,minX:Math.min(me,ye),minY:Math.min(Ee,oe),maxX:Math.max(me,ye),maxY:Math.max(Ee,oe)})}),q.sort(function(me,Ee){return me.maxX-Ee.maxX});for(var fe=0;fe<Z;fe++)for(var de=0;de<P;de++){var ee=Ie(G[0]+W*(fe+.5)/Z,G[1]+V*(de+.5)/P),re=Math.pow(1-Math.abs(ee)/L,J)/2;ee<0&&(re=1-re),re=Math.max(0,Math.min(255,Math.round(re*255))),k[de*Z+fe]=re}return k;function Ie(me,Ee){for(var ye=1/0,oe=1/0,Be=q.length;Be--;){var Ce=q[Be];if(Ce.maxX+oe<=me)break;if(me+oe>Ce.minX&&Ee-oe<Ce.maxY&&Ee+oe>Ce.minY){var te=y(me,Ee,Ce.x1,Ce.y1,Ce.x2,Ce.y2);te<ye&&(ye=te,oe=Math.sqrt(ye))}}return Te(me,Ee)&&(oe=-oe),oe}function Te(me,Ee){for(var ye=0,oe=q.length;oe--;){var Be=q[oe];if(Be.maxX<=me)break;var Ce=Be.y1>Ee!=Be.y2>Ee&&me<(Be.x2-Be.x1)*(Ee-Be.y1)/(Be.y2-Be.y1)+Be.x1;Ce&&(ye+=Be.y1<Be.y2?1:-1)}return ye!==0}}function g(Z,P,w,G,L,J,k,W,V,q){J===void 0&&(J=1),W===void 0&&(W=0),V===void 0&&(V=0),q===void 0&&(q=0),A(Z,P,w,G,L,J,k,null,W,V,q)}function A(Z,P,w,G,L,J,k,W,V,q,fe){J===void 0&&(J=1),V===void 0&&(V=0),q===void 0&&(q=0),fe===void 0&&(fe=0);for(var de=m(Z,P,w,G,L,J),ee=new Uint8Array(de.length*4),re=0;re<de.length;re++)ee[re*4+fe]=de[re];f(k,ee,V,q,Z,P,1<<3-fe,W)}function y(Z,P,w,G,L,J){var k=L-w,W=J-G,V=k*k+W*W,q=V?Math.max(0,Math.min(1,((Z-w)*k+(P-G)*W)/V)):0,fe=Z-(w+q*k),de=P-(G+q*W);return fe*fe+de*de}var B=Object.freeze({__proto__:null,generate:m,generateIntoCanvas:g,generateIntoFramebuffer:A}),x="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",M="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",b="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",C=new Float32Array([0,0,2,0,0,2]),T=null,E=!1,F={},I=new WeakMap;function z(Z){if(!E&&!K(Z))throw new Error("WebGL generation not supported")}function D(Z,P,w,G,L,J,k){if(J===void 0&&(J=1),k===void 0&&(k=null),!k&&(k=T,!k)){var W=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!W)throw new Error("OffscreenCanvas or DOM canvas not supported");k=T=W.getContext("webgl",{depth:!1})}z(k);var V=new Uint8Array(Z*P*4);u(k,function(ee){var re=ee.gl,Ie=ee.withTexture,Te=ee.withTextureFramebuffer;Ie("readable",function(me,Ee){re.texImage2D(re.TEXTURE_2D,0,re.RGBA,Z,P,0,re.RGBA,re.UNSIGNED_BYTE,null),Te(me,Ee,function(ye){_(Z,P,w,G,L,J,re,ye,0,0,0),re.readPixels(0,0,Z,P,re.RGBA,re.UNSIGNED_BYTE,V)})})});for(var q=new Uint8Array(Z*P),fe=0,de=0;fe<V.length;fe+=4)q[de++]=V[fe];return q}function O(Z,P,w,G,L,J,k,W,V,q){J===void 0&&(J=1),W===void 0&&(W=0),V===void 0&&(V=0),q===void 0&&(q=0),_(Z,P,w,G,L,J,k,null,W,V,q)}function _(Z,P,w,G,L,J,k,W,V,q,fe){J===void 0&&(J=1),V===void 0&&(V=0),q===void 0&&(q=0),fe===void 0&&(fe=0),z(k);var de=[];t(w,function(ee,re,Ie,Te){de.push(ee,re,Ie,Te)}),de=new Float32Array(de),u(k,function(ee){var re=ee.gl,Ie=ee.isWebGL2,Te=ee.getExtension,me=ee.withProgram,Ee=ee.withTexture,ye=ee.withTextureFramebuffer,oe=ee.handleContextLoss;if(Ee("rawDistances",function(Be,Ce){(Z!==Be._lastWidth||P!==Be._lastHeight)&&re.texImage2D(re.TEXTURE_2D,0,re.RGBA,Be._lastWidth=Z,Be._lastHeight=P,0,re.RGBA,re.UNSIGNED_BYTE,null),me("main",x,M,function(te){var Ue=te.setAttribute,ge=te.setUniform,be=!Ie&&Te("ANGLE_instanced_arrays"),pe=!Ie&&Te("EXT_blend_minmax");Ue("aUV",2,re.STATIC_DRAW,0,C),Ue("aLineSegment",4,re.DYNAMIC_DRAW,1,de),ge.apply(void 0,["4f","uGlyphBounds"].concat(G)),ge("1f","uMaxDistance",L),ge("1f","uExponent",J),ye(Be,Ce,function(ze){re.enable(re.BLEND),re.colorMask(!0,!0,!0,!0),re.viewport(0,0,Z,P),re.scissor(0,0,Z,P),re.blendFunc(re.ONE,re.ONE),re.blendEquationSeparate(re.FUNC_ADD,Ie?re.MAX:pe.MAX_EXT),re.clear(re.COLOR_BUFFER_BIT),Ie?re.drawArraysInstanced(re.TRIANGLES,0,3,de.length/4):be.drawArraysInstancedANGLE(re.TRIANGLES,0,3,de.length/4)})}),me("post",o,b,function(te){te.setAttribute("aUV",2,re.STATIC_DRAW,0,C),te.setUniform("1i","tex",Ce),re.bindFramebuffer(re.FRAMEBUFFER,W),re.disable(re.BLEND),re.colorMask(fe===0,fe===1,fe===2,fe===3),re.viewport(V,q,Z,P),re.scissor(V,q,Z,P),re.drawArrays(re.TRIANGLES,0,3)})}),re.isContextLost())throw oe(),new Error("webgl context lost")})}function K(Z){var P=!Z||Z===T?F:Z.canvas||Z,w=I.get(P);if(w===void 0){E=!0;var G=null;try{var L=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],J=D(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Z);w=J&&L.length===J.length&&J.every(function(k,W){return k===L[W]}),w||(G="bad trial run results",console.info(L,J))}catch(k){w=!1,G=k.message}G&&console.warn("WebGL SDF generation not supported:",G),E=!1,I.set(P,w)}return w}var N=Object.freeze({__proto__:null,generate:D,generateIntoCanvas:O,generateIntoFramebuffer:_,isSupported:K});function ne(Z,P,w,G,L,J){L===void 0&&(L=Math.max(G[2]-G[0],G[3]-G[1])/2),J===void 0&&(J=1);try{return D.apply(N,arguments)}catch(k){return console.info("WebGL SDF generation failed, falling back to JS",k),m.apply(B,arguments)}}function se(Z,P,w,G,L,J,k,W,V,q){L===void 0&&(L=Math.max(G[2]-G[0],G[3]-G[1])/2),J===void 0&&(J=1),W===void 0&&(W=0),V===void 0&&(V=0),q===void 0&&(q=0);try{return O.apply(N,arguments)}catch(fe){return console.info("WebGL SDF generation failed, falling back to JS",fe),g.apply(B,arguments)}}return e.forEachPathCommand=r,e.generate=ne,e.generateIntoCanvas=se,e.javascript=B,e.pathToLineSegments=t,e.webgl=N,e.webglUtils=d,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return l}function Jl(){var l=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},a={},r={};a.L=1,r[1]="L",Object.keys(n).forEach(function(oe,Be){a[oe]=1<<Be+1,r[a[oe]]=oe}),Object.freeze(a);var t=a.LRI|a.RLI|a.FSI,o=a.L|a.R|a.AL,s=a.B|a.S|a.WS|a.ON|a.FSI|a.LRI|a.RLI|a.PDI,i=a.BN|a.RLE|a.LRE|a.RLO|a.LRO|a.PDF,c=a.S|a.WS|a.B|t|a.PDI|i,u=null;function f(){if(!u){u=new Map;var oe=function(Ce){if(n.hasOwnProperty(Ce)){var te=0;n[Ce].split(",").forEach(function(Ue){var ge=Ue.split("+"),be=ge[0],pe=ge[1];be=parseInt(be,36),pe=pe?parseInt(pe,36):0,u.set(te+=be,a[Ce]);for(var ze=0;ze<pe;ze++)u.set(++te,a[Ce])})}};for(var Be in n)oe(Be)}}function h(oe){return f(),u.get(oe.codePointAt(0))||a.L}function d(oe){return r[h(oe)]}var m={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(oe,Be){var Ce=36,te=0,Ue=new Map,ge=Be&&new Map,be;return oe.split(",").forEach(function pe(ze){if(ze.indexOf("+")!==-1)for(var ve=+ze;ve--;)pe(be);else{be=ze;var Me=ze.split(">"),De=Me[0],ke=Me[1];De=String.fromCodePoint(te+=parseInt(De,Ce)),ke=String.fromCodePoint(te+=parseInt(ke,Ce)),Ue.set(De,ke),Be&&ge.set(ke,De)}}),{map:Ue,reverseMap:ge}}var A,y,B;function x(){if(!A){var oe=g(m.pairs,!0),Be=oe.map,Ce=oe.reverseMap;A=Be,y=Ce,B=g(m.canonical,!1).map}}function M(oe){return x(),A.get(oe)||null}function b(oe){return x(),y.get(oe)||null}function C(oe){return x(),B.get(oe)||null}var T=a.L,E=a.R,F=a.EN,I=a.ES,z=a.ET,D=a.AN,O=a.CS,_=a.B,K=a.S,N=a.ON,ne=a.BN,se=a.NSM,Z=a.AL,P=a.LRO,w=a.RLO,G=a.LRE,L=a.RLE,J=a.PDF,k=a.LRI,W=a.RLI,V=a.FSI,q=a.PDI;function fe(oe,Be){for(var Ce=125,te=new Uint32Array(oe.length),Ue=0;Ue<oe.length;Ue++)te[Ue]=h(oe[Ue]);var ge=new Map;function be(Tt,jt){var Ft=te[Tt];te[Tt]=jt,ge.set(Ft,ge.get(Ft)-1),Ft&s&&ge.set(s,ge.get(s)-1),ge.set(jt,(ge.get(jt)||0)+1),jt&s&&ge.set(s,(ge.get(s)||0)+1)}for(var pe=new Uint8Array(oe.length),ze=new Map,ve=[],Me=null,De=0;De<oe.length;De++)Me||ve.push(Me={start:De,end:oe.length-1,level:Be==="rtl"?1:Be==="ltr"?0:La(De,!1)}),te[De]&_&&(Me.end=De,Me=null);for(var ke=L|G|w|P|t|q|J|_,Ve=function(Tt){return Tt+(Tt&1?1:2)},it=function(Tt){return Tt+(Tt&1?2:1)},Pe=0;Pe<ve.length;Pe++){Me=ve[Pe];var Re=[{_level:Me.level,_override:0,_isolate:0}],we=void 0,R=0,$=0,he=0;ge.clear();for(var Fe=Me.start;Fe<=Me.end;Fe++){var Y=te[Fe];if(we=Re[Re.length-1],ge.set(Y,(ge.get(Y)||0)+1),Y&s&&ge.set(s,(ge.get(s)||0)+1),Y&ke)if(Y&(L|G)){pe[Fe]=we._level;var He=(Y===L?it:Ve)(we._level);He<=Ce&&!R&&!$?Re.push({_level:He,_override:0,_isolate:0}):R||$++}else if(Y&(w|P)){pe[Fe]=we._level;var pt=(Y===w?it:Ve)(we._level);pt<=Ce&&!R&&!$?Re.push({_level:pt,_override:Y&w?E:T,_isolate:0}):R||$++}else if(Y&t){Y&V&&(Y=La(Fe+1,!0)===1?W:k),pe[Fe]=we._level,we._override&&be(Fe,we._override);var Ze=(Y===W?it:Ve)(we._level);Ze<=Ce&&R===0&&$===0?(he++,Re.push({_level:Ze,_override:0,_isolate:1,_isolInitIndex:Fe})):R++}else if(Y&q){if(R>0)R--;else if(he>0){for($=0;!Re[Re.length-1]._isolate;)Re.pop();var Je=Re[Re.length-1]._isolInitIndex;Je!=null&&(ze.set(Je,Fe),ze.set(Fe,Je)),Re.pop(),he--}we=Re[Re.length-1],pe[Fe]=we._level,we._override&&be(Fe,we._override)}else Y&J?(R===0&&($>0?$--:!we._isolate&&Re.length>1&&(Re.pop(),we=Re[Re.length-1])),pe[Fe]=we._level):Y&_&&(pe[Fe]=Me.level);else pe[Fe]=we._level,we._override&&Y!==ne&&be(Fe,we._override)}for(var Qe=[],Xe=null,Le=Me.start;Le<=Me.end;Le++){var Ye=te[Le];if(!(Ye&i)){var lt=pe[Le],ut=Ye&t,ft=Ye===q;Xe&&lt===Xe._level?(Xe._end=Le,Xe._endsWithIsolInit=ut):Qe.push(Xe={_start:Le,_end:Le,_level:lt,_startsWithPDI:ft,_endsWithIsolInit:ut})}}for(var Dt=[],It=0;It<Qe.length;It++){var Ht=Qe[It];if(!Ht._startsWithPDI||Ht._startsWithPDI&&!ze.has(Ht._start)){for(var Et=[Xe=Ht],Rt=void 0;Xe&&Xe._endsWithIsolInit&&(Rt=ze.get(Xe._end))!=null;)for(var Ne=It+1;Ne<Qe.length;Ne++)if(Qe[Ne]._start===Rt){Et.push(Xe=Qe[Ne]);break}for(var At=[],Yt=0;Yt<Et.length;Yt++)for(var p=Et[Yt],v=p._start;v<=p._end;v++)At.push(v);for(var S=pe[At[0]],H=Me.level,X=At[0]-1;X>=0;X--)if(!(te[X]&i)){H=pe[X];break}var Q=At[At.length-1],ie=pe[Q],ae=Me.level;if(!(te[Q]&t)){for(var ce=Q+1;ce<=Me.end;ce++)if(!(te[ce]&i)){ae=pe[ce];break}}Dt.push({_seqIndices:At,_sosType:Math.max(H,S)%2?E:T,_eosType:Math.max(ae,ie)%2?E:T})}}for(var le=0;le<Dt.length;le++){var ue=Dt[le],j=ue._seqIndices,rt=ue._sosType,Se=ue._eosType,xe=pe[j[0]]&1?E:T;if(ge.get(se))for(var Oe=0;Oe<j.length;Oe++){var je=j[Oe];if(te[je]&se){for(var qe=rt,$e=Oe-1;$e>=0;$e--)if(!(te[j[$e]]&i)){qe=te[j[$e]];break}be(je,qe&(t|q)?N:qe)}}if(ge.get(F))for(var ct=0;ct<j.length;ct++){var vt=j[ct];if(te[vt]&F)for(var et=ct-1;et>=-1;et--){var _t=et===-1?rt:te[j[et]];if(_t&o){_t===Z&&be(vt,D);break}}}if(ge.get(Z))for(var nt=0;nt<j.length;nt++){var ht=j[nt];te[ht]&Z&&be(ht,E)}if(ge.get(I)||ge.get(O))for(var bt=1;bt<j.length-1;bt++){var Vt=j[bt];if(te[Vt]&(I|O)){for(var mt=0,tt=0,dt=bt-1;dt>=0&&(mt=te[j[dt]],!!(mt&i));dt--);for(var at=bt+1;at<j.length&&(tt=te[j[at]],!!(tt&i));at++);mt===tt&&(te[Vt]===I?mt===F:mt&(F|D))&&be(Vt,mt)}}if(ge.get(F))for(var Ke=0;Ke<j.length;Ke++){var Mt=j[Ke];if(te[Mt]&F){for(var Ut=Ke-1;Ut>=0&&te[j[Ut]]&(z|i);Ut--)be(j[Ut],F);for(Ke++;Ke<j.length&&te[j[Ke]]&(z|i|F);Ke++)te[j[Ke]]!==F&&be(j[Ke],F)}}if(ge.get(z)||ge.get(I)||ge.get(O))for(var gt=0;gt<j.length;gt++){var Nt=j[gt];if(te[Nt]&(z|I|O)){be(Nt,N);for(var tn=gt-1;tn>=0&&te[j[tn]]&i;tn--)be(j[tn],N);for(var rn=gt+1;rn<j.length&&te[j[rn]]&i;rn++)be(j[rn],N)}}if(ge.get(F))for(var Tn=0,Ma=rt;Tn<j.length;Tn++){var Ta=j[Tn],Fn=te[Ta];Fn&F?Ma===T&&be(Ta,T):Fn&o&&(Ma=Fn)}if(ge.get(s)){var Rr=E|F|D,Fa=Rr|T,nn=[];{for(var vr=[],Br=0;Br<j.length;Br++)if(te[j[Br]]&s){var _r=oe[j[Br]],xa=void 0;if(M(_r)!==null)if(vr.length<63)vr.push({char:_r,seqIndex:Br});else break;else if((xa=b(_r))!==null)for(var Gr=vr.length-1;Gr>=0;Gr--){var xn=vr[Gr].char;if(xn===xa||xn===b(C(_r))||M(C(xn))===_r){nn.push([vr[Gr].seqIndex,Br]),vr.length=Gr;break}}}nn.sort(function(Tt,jt){return Tt[0]-jt[0]})}for(var wn=0;wn<nn.length;wn++){for(var wa=nn[wn],an=wa[0],Sn=wa[1],Sa=!1,Jt=0,Dn=an+1;Dn<Sn;Dn++){var Da=j[Dn];if(te[Da]&Fa){Sa=!0;var Ia=te[Da]&Rr?E:T;if(Ia===xe){Jt=Ia;break}}}if(Sa&&!Jt){Jt=rt;for(var In=an-1;In>=0;In--){var Ra=j[In];if(te[Ra]&Fa){var _a=te[Ra]&Rr?E:T;_a!==xe?Jt=_a:Jt=xe;break}}}if(Jt){if(te[j[an]]=te[j[Sn]]=Jt,Jt!==xe){for(var Ur=an+1;Ur<j.length;Ur++)if(!(te[j[Ur]]&i)){h(oe[j[Ur]])&se&&(te[j[Ur]]=Jt);break}}if(Jt!==xe){for(var Lr=Sn+1;Lr<j.length;Lr++)if(!(te[j[Lr]]&i)){h(oe[j[Lr]])&se&&(te[j[Lr]]=Jt);break}}}}for(var er=0;er<j.length;er++)if(te[j[er]]&s){for(var Ga=er,Rn=er,_n=rt,Or=er-1;Or>=0;Or--)if(te[j[Or]]&i)Ga=Or;else{_n=te[j[Or]]&Rr?E:T;break}for(var Ua=Se,kr=er+1;kr<j.length;kr++)if(te[j[kr]]&(s|i))Rn=kr;else{Ua=te[j[kr]]&Rr?E:T;break}for(var Gn=Ga;Gn<=Rn;Gn++)te[j[Gn]]=_n===Ua?_n:xe;er=Rn}}}for(var Gt=Me.start;Gt<=Me.end;Gt++){var xi=pe[Gt],on=te[Gt];if(xi&1?on&(T|F|D)&&pe[Gt]++:on&E?pe[Gt]++:on&(D|F)&&(pe[Gt]+=2),on&i&&(pe[Gt]=Gt===0?Me.level:pe[Gt-1]),Gt===Me.end||h(oe[Gt])&(K|_))for(var sn=Gt;sn>=0&&h(oe[sn])&c;sn--)pe[sn]=Me.level}}return{levels:pe,paragraphs:ve};function La(Tt,jt){for(var Ft=Tt;Ft<oe.length;Ft++){var tr=te[Ft];if(tr&(E|Z))return 1;if(tr&(_|T)||jt&&tr===q)return 0;if(tr&t){var Oa=wi(Ft);Ft=Oa===-1?oe.length:Oa}}return 0}function wi(Tt){for(var jt=1,Ft=Tt+1;Ft<oe.length;Ft++){var tr=te[Ft];if(tr&_)break;if(tr&q){if(--jt===0)return Ft}else tr&t&&jt++}return-1}}var de="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",ee;function re(){if(!ee){var oe=g(de,!0),Be=oe.map,Ce=oe.reverseMap;Ce.forEach(function(te,Ue){Be.set(Ue,te)}),ee=Be}}function Ie(oe){return re(),ee.get(oe)||null}function Te(oe,Be,Ce,te){var Ue=oe.length;Ce=Math.max(0,Ce==null?0:+Ce),te=Math.min(Ue-1,te==null?Ue-1:+te);for(var ge=new Map,be=Ce;be<=te;be++)if(Be[be]&1){var pe=Ie(oe[be]);pe!==null&&ge.set(be,pe)}return ge}function me(oe,Be,Ce,te){var Ue=oe.length;Ce=Math.max(0,Ce==null?0:+Ce),te=Math.min(Ue-1,te==null?Ue-1:+te);var ge=[];return Be.paragraphs.forEach(function(be){var pe=Math.max(Ce,be.start),ze=Math.min(te,be.end);if(pe<ze){for(var ve=Be.levels.slice(pe,ze+1),Me=ze;Me>=pe&&h(oe[Me])&c;Me--)ve[Me]=be.level;for(var De=be.level,ke=1/0,Ve=0;Ve<ve.length;Ve++){var it=ve[Ve];it>De&&(De=it),it<ke&&(ke=it|1)}for(var Pe=De;Pe>=ke;Pe--)for(var Re=0;Re<ve.length;Re++)if(ve[Re]>=Pe){for(var we=Re;Re+1<ve.length&&ve[Re+1]>=Pe;)Re++;Re>we&&ge.push([we+pe,Re+pe])}}}),ge}function Ee(oe,Be,Ce,te){var Ue=ye(oe,Be,Ce,te),ge=[].concat(oe);return Ue.forEach(function(be,pe){ge[pe]=(Be.levels[be]&1?Ie(oe[be]):null)||oe[be]}),ge.join("")}function ye(oe,Be,Ce,te){for(var Ue=me(oe,Be,Ce,te),ge=[],be=0;be<oe.length;be++)ge[be]=be;return Ue.forEach(function(pe){for(var ze=pe[0],ve=pe[1],Me=ge.slice(ze,ve+1),De=Me.length;De--;)ge[ve-De]=Me[De]}),ge}return e.closingToOpeningBracket=b,e.getBidiCharType=h,e.getBidiCharTypeName=d,e.getCanonicalBracket=C,e.getEmbeddingLevels=fe,e.getMirroredCharacter=Ie,e.getMirroredCharactersMap=Te,e.getReorderSegments=me,e.getReorderedIndices=ye,e.getReorderedString=Ee,e.openingToClosingBracket=M,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return l}const ti=/\bvoid\s+main\s*\(\s*\)\s*{/g;function ia(l){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(a,r){let t=us[r];return t?ia(t):a}return l.replace(e,n)}const Ct=[];for(let l=0;l<256;l++)Ct[l]=(l<16?"0":"")+l.toString(16);function jl(){const l=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,a=Math.random()*4294967295|0;return(Ct[l&255]+Ct[l>>8&255]+Ct[l>>16&255]+Ct[l>>24&255]+"-"+Ct[e&255]+Ct[e>>8&255]+"-"+Ct[e>>16&15|64]+Ct[e>>24&255]+"-"+Ct[n&63|128]+Ct[n>>8&255]+"-"+Ct[n>>16&255]+Ct[n>>24&255]+Ct[a&255]+Ct[a>>8&255]+Ct[a>>16&255]+Ct[a>>24&255]).toUpperCase()}const lr=Object.assign||function(){let l=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let a=arguments[e];if(a)for(let r in a)Object.prototype.hasOwnProperty.call(a,r)&&(l[r]=a[r])}return l},Kl=Date.now(),ao=new WeakMap,oo=new Map;let Wl=1e10;function sa(l,e){const n=Yl(e);let a=ao.get(l);if(a||ao.set(l,a=Object.create(null)),a[n])return new a[n];const r=`_onBeforeCompile${n}`,t=function(c,u){l.onBeforeCompile.call(this,c,u);const f=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let h=oo[f];if(!h){const d=zl(this,c,e,n);h=oo[f]=d}c.vertexShader=h.vertexShader,c.fragmentShader=h.fragmentShader,lr(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-Kl}}),this[r]&&this[r](c)},o=function(){return s(e.chained?l:l.clone())},s=function(c){const u=Object.create(c,i);return Object.defineProperty(u,"baseMaterial",{value:l}),Object.defineProperty(u,"id",{value:Wl++}),u.uuid=jl(),u.uniforms=lr({},c.uniforms,e.uniforms),u.defines=lr({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",u.extensions=lr({},c.extensions,e.extensions),u._listeners=void 0,u},i={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>l.type,set:c=>{l.type=c}},isDerivedFrom:{writable:!0,configurable:!0,value:function(c){const u=this.baseMaterial;return c===u||u.isDerivedMaterial&&u.isDerivedFrom(c)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return l.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return t},set(c){this[r]=c}},copy:{writable:!0,configurable:!0,value:function(c){return l.copy.call(this,c),!l.isShaderMaterial&&!l.isDerivedMaterial&&(lr(this.extensions,c.extensions),lr(this.defines,c.defines),lr(this.uniforms,Go.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new l.constructor;return s(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=sa(l.isDerivedMaterial?l.getDepthMaterial():new Uo({depthPacking:cs}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=sa(l.isDerivedMaterial?l.getDistanceMaterial():new ls,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),l.dispose.call(this)}}};return a[n]=o,new o}function zl(l,{vertexShader:e,fragmentShader:n},a,r){let{vertexDefs:t,vertexMainIntro:o,vertexMainOutro:s,vertexTransform:i,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:f,fragmentColorTransform:h,customRewriter:d,timeUniform:m}=a;if(t=t||"",o=o||"",s=s||"",c=c||"",u=u||"",f=f||"",(i||d)&&(e=ia(e)),(h||d)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=ia(n)),d){let g=d({vertexShader:e,fragmentShader:n});e=g.vertexShader,n=g.fragmentShader}if(h){let g=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,A=>(g.push(A),"")),f=`${h}
${g.join(`
`)}
${f}`}if(m){const g=`
uniform float ${m};
`;t=g+t,c=g+c}return i&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,t=`${t}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${i}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(g,A,y,B)=>/\battribute\s+vec[23]\s+$/.test(B.substr(0,y))?A:`troika_${A}_${r}`),l.map&&l.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=io(e,r,t,o,s),n=io(n,r,c,u,f),{vertexShader:e,fragmentShader:n}}function io(l,e,n,a,r){return(a||r||n)&&(l=l.replace(ti,`
${n}
void troikaOrigMain${e}() {`),l+=`
void main() {
  ${a}
  troikaOrigMain${e}();
  ${r}
}`),l}function Xl(l,e){return l==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Ql=0;const so=new Map;function Yl(l){const e=JSON.stringify(l,Xl);let n=so.get(e);return n==null&&so.set(e,n=++Ql),n}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Vl(){return typeof window>"u"&&(self.window=self),function(l){var e={parse:function(r){var t=e._bin,o=new Uint8Array(r);if(t.readASCII(o,0,4)=="ttcf"){var s=4;t.readUshort(o,s),s+=2,t.readUshort(o,s),s+=2;var i=t.readUint(o,s);s+=4;for(var c=[],u=0;u<i;u++){var f=t.readUint(o,s);s+=4,c.push(e._readFont(o,f))}return c}return[e._readFont(o,0)]},_readFont:function(r,t){var o=e._bin,s=t;o.readFixed(r,t),t+=4;var i=o.readUshort(r,t);t+=2,o.readUshort(r,t),t+=2,o.readUshort(r,t),t+=2,o.readUshort(r,t),t+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],u={_data:r,_offset:s},f={},h=0;h<i;h++){var d=o.readASCII(r,t,4);t+=4,o.readUint(r,t),t+=4;var m=o.readUint(r,t);t+=4;var g=o.readUint(r,t);t+=4,f[d]={offset:m,length:g}}for(h=0;h<c.length;h++){var A=c[h];f[A]&&(u[A.trim()]=e[A.trim()].parse(r,f[A].offset,f[A].length,u))}return u},_tabOffset:function(r,t,o){for(var s=e._bin,i=s.readUshort(r,o+4),c=o+12,u=0;u<i;u++){var f=s.readASCII(r,c,4);c+=4,s.readUint(r,c),c+=4;var h=s.readUint(r,c);if(c+=4,s.readUint(r,c),c+=4,f==t)return h}return 0}};e._bin={readFixed:function(r,t){return(r[t]<<8|r[t+1])+(r[t+2]<<8|r[t+3])/65540},readF2dot14:function(r,t){return e._bin.readShort(r,t)/16384},readInt:function(r,t){return e._bin._view(r).getInt32(t)},readInt8:function(r,t){return e._bin._view(r).getInt8(t)},readShort:function(r,t){return e._bin._view(r).getInt16(t)},readUshort:function(r,t){return e._bin._view(r).getUint16(t)},readUshorts:function(r,t,o){for(var s=[],i=0;i<o;i++)s.push(e._bin.readUshort(r,t+2*i));return s},readUint:function(r,t){return e._bin._view(r).getUint32(t)},readUint64:function(r,t){return 4294967296*e._bin.readUint(r,t)+e._bin.readUint(r,t+4)},readASCII:function(r,t,o){for(var s="",i=0;i<o;i++)s+=String.fromCharCode(r[t+i]);return s},readUnicode:function(r,t,o){for(var s="",i=0;i<o;i++){var c=r[t++]<<8|r[t++];s+=String.fromCharCode(c)}return s},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,t,o){var s=e._bin._tdec;return s&&t==0&&o==r.length?s.decode(r):e._bin.readASCII(r,t,o)},readBytes:function(r,t,o){for(var s=[],i=0;i<o;i++)s.push(r[t+i]);return s},readASCIIArray:function(r,t,o){for(var s=[],i=0;i<o;i++)s.push(String.fromCharCode(r[t+i]));return s},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,t,o,s,i){var c=e._bin,u={},f=t;c.readFixed(r,t),t+=4;var h=c.readUshort(r,t);t+=2;var d=c.readUshort(r,t);t+=2;var m=c.readUshort(r,t);return t+=2,u.scriptList=e._lctf.readScriptList(r,f+h),u.featureList=e._lctf.readFeatureList(r,f+d),u.lookupList=e._lctf.readLookupList(r,f+m,i),u},e._lctf.readLookupList=function(r,t,o){var s=e._bin,i=t,c=[],u=s.readUshort(r,t);t+=2;for(var f=0;f<u;f++){var h=s.readUshort(r,t);t+=2;var d=e._lctf.readLookupTable(r,i+h,o);c.push(d)}return c},e._lctf.readLookupTable=function(r,t,o){var s=e._bin,i=t,c={tabs:[]};c.ltype=s.readUshort(r,t),t+=2,c.flag=s.readUshort(r,t),t+=2;var u=s.readUshort(r,t);t+=2;for(var f=c.ltype,h=0;h<u;h++){var d=s.readUshort(r,t);t+=2;var m=o(r,f,i+d,c);c.tabs.push(m)}return c},e._lctf.numOfOnes=function(r){for(var t=0,o=0;o<32;o++)r>>>o&1&&t++;return t},e._lctf.readClassDef=function(r,t){var o=e._bin,s=[],i=o.readUshort(r,t);if(t+=2,i==1){var c=o.readUshort(r,t);t+=2;var u=o.readUshort(r,t);t+=2;for(var f=0;f<u;f++)s.push(c+f),s.push(c+f),s.push(o.readUshort(r,t)),t+=2}if(i==2){var h=o.readUshort(r,t);for(t+=2,f=0;f<h;f++)s.push(o.readUshort(r,t)),t+=2,s.push(o.readUshort(r,t)),t+=2,s.push(o.readUshort(r,t)),t+=2}return s},e._lctf.getInterval=function(r,t){for(var o=0;o<r.length;o+=3){var s=r[o],i=r[o+1];if(r[o+2],s<=t&&t<=i)return o}return-1},e._lctf.readCoverage=function(r,t){var o=e._bin,s={};s.fmt=o.readUshort(r,t),t+=2;var i=o.readUshort(r,t);return t+=2,s.fmt==1&&(s.tab=o.readUshorts(r,t,i)),s.fmt==2&&(s.tab=o.readUshorts(r,t,3*i)),s},e._lctf.coverageIndex=function(r,t){var o=r.tab;if(r.fmt==1)return o.indexOf(t);if(r.fmt==2){var s=e._lctf.getInterval(o,t);if(s!=-1)return o[s+2]+(t-o[s])}return-1},e._lctf.readFeatureList=function(r,t){var o=e._bin,s=t,i=[],c=o.readUshort(r,t);t+=2;for(var u=0;u<c;u++){var f=o.readASCII(r,t,4);t+=4;var h=o.readUshort(r,t);t+=2;var d=e._lctf.readFeatureTable(r,s+h);d.tag=f.trim(),i.push(d)}return i},e._lctf.readFeatureTable=function(r,t){var o=e._bin,s=t,i={},c=o.readUshort(r,t);t+=2,c>0&&(i.featureParams=s+c);var u=o.readUshort(r,t);t+=2,i.tab=[];for(var f=0;f<u;f++)i.tab.push(o.readUshort(r,t+2*f));return i},e._lctf.readScriptList=function(r,t){var o=e._bin,s=t,i={},c=o.readUshort(r,t);t+=2;for(var u=0;u<c;u++){var f=o.readASCII(r,t,4);t+=4;var h=o.readUshort(r,t);t+=2,i[f.trim()]=e._lctf.readScriptTable(r,s+h)}return i},e._lctf.readScriptTable=function(r,t){var o=e._bin,s=t,i={},c=o.readUshort(r,t);t+=2,c>0&&(i.default=e._lctf.readLangSysTable(r,s+c));var u=o.readUshort(r,t);t+=2;for(var f=0;f<u;f++){var h=o.readASCII(r,t,4);t+=4;var d=o.readUshort(r,t);t+=2,i[h.trim()]=e._lctf.readLangSysTable(r,s+d)}return i},e._lctf.readLangSysTable=function(r,t){var o=e._bin,s={};o.readUshort(r,t),t+=2,s.reqFeature=o.readUshort(r,t),t+=2;var i=o.readUshort(r,t);return t+=2,s.features=o.readUshorts(r,t,i),s},e.CFF={},e.CFF.parse=function(r,t,o){var s=e._bin;(r=new Uint8Array(r.buffer,t,o))[t=0],r[++t],r[++t],r[++t],t++;var i=[];t=e.CFF.readIndex(r,t,i);for(var c=[],u=0;u<i.length-1;u++)c.push(s.readASCII(r,t+i[u],i[u+1]-i[u]));t+=i[i.length-1];var f=[];t=e.CFF.readIndex(r,t,f);var h=[];for(u=0;u<f.length-1;u++)h.push(e.CFF.readDict(r,t+f[u],t+f[u+1]));t+=f[f.length-1];var d=h[0],m=[];t=e.CFF.readIndex(r,t,m);var g=[];for(u=0;u<m.length-1;u++)g.push(s.readASCII(r,t+m[u],m[u+1]-m[u]));if(t+=m[m.length-1],e.CFF.readSubrs(r,t,d),d.CharStrings){t=d.CharStrings,m=[],t=e.CFF.readIndex(r,t,m);var A=[];for(u=0;u<m.length-1;u++)A.push(s.readBytes(r,t+m[u],m[u+1]-m[u]));d.CharStrings=A}if(d.ROS){t=d.FDArray;var y=[];for(t=e.CFF.readIndex(r,t,y),d.FDArray=[],u=0;u<y.length-1;u++){var B=e.CFF.readDict(r,t+y[u],t+y[u+1]);e.CFF._readFDict(r,B,g),d.FDArray.push(B)}t+=y[y.length-1],t=d.FDSelect,d.FDSelect=[];var x=r[t];if(t++,x!=3)throw x;var M=s.readUshort(r,t);for(t+=2,u=0;u<M+1;u++)d.FDSelect.push(s.readUshort(r,t),r[t+2]),t+=3}return d.Encoding&&(d.Encoding=e.CFF.readEncoding(r,d.Encoding,d.CharStrings.length)),d.charset&&(d.charset=e.CFF.readCharset(r,d.charset,d.CharStrings.length)),e.CFF._readFDict(r,d,g),d},e.CFF._readFDict=function(r,t,o){var s;for(var i in t.Private&&(s=t.Private[1],t.Private=e.CFF.readDict(r,s,s+t.Private[0]),t.Private.Subrs&&e.CFF.readSubrs(r,s+t.Private.Subrs,t.Private)),t)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(i)!=-1&&(t[i]=o[t[i]-426+35])},e.CFF.readSubrs=function(r,t,o){var s=e._bin,i=[];t=e.CFF.readIndex(r,t,i);var c,u=i.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var f=0;f<i.length-1;f++)o.Subrs.push(s.readBytes(r,t+i[f],i[f+1]-i[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,t){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==t)return o;return-1},e.CFF.glyphBySE=function(r,t){return t<0||t>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[t])},e.CFF.readEncoding=function(r,t,o){e._bin;var s=[".notdef"],i=r[t];if(t++,i!=0)throw"error: unknown encoding format: "+i;var c=r[t];t++;for(var u=0;u<c;u++)s.push(r[t+u]);return s},e.CFF.readCharset=function(r,t,o){var s=e._bin,i=[".notdef"],c=r[t];if(t++,c==0)for(var u=0;u<o;u++){var f=s.readUshort(r,t);t+=2,i.push(f)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;i.length<o;){f=s.readUshort(r,t),t+=2;var h=0;for(c==1?(h=r[t],t++):(h=s.readUshort(r,t),t+=2),u=0;u<=h;u++)i.push(f),f++}}return i},e.CFF.readIndex=function(r,t,o){var s=e._bin,i=s.readUshort(r,t)+1,c=r[t+=2];if(t++,c==1)for(var u=0;u<i;u++)o.push(r[t+u]);else if(c==2)for(u=0;u<i;u++)o.push(s.readUshort(r,t+2*u));else if(c==3)for(u=0;u<i;u++)o.push(16777215&s.readUint(r,t+3*u-1));else if(i!=1)throw"unsupported offset size: "+c+", count: "+i;return(t+=i*c)-1},e.CFF.getCharString=function(r,t,o){var s=e._bin,i=r[t],c=r[t+1];r[t+2],r[t+3],r[t+4];var u=1,f=null,h=null;i<=20&&(f=i,u=1),i==12&&(f=100*i+c,u=2),21<=i&&i<=27&&(f=i,u=1),i==28&&(h=s.readShort(r,t+1),u=3),29<=i&&i<=31&&(f=i,u=1),32<=i&&i<=246&&(h=i-139,u=1),247<=i&&i<=250&&(h=256*(i-247)+c+108,u=2),251<=i&&i<=254&&(h=256*-(i-251)-c-108,u=2),i==255&&(h=s.readInt(r,t+1)/65535,u=5),o.val=h??"o"+f,o.size=u},e.CFF.readCharString=function(r,t,o){for(var s=t+o,i=e._bin,c=[];t<s;){var u=r[t],f=r[t+1];r[t+2],r[t+3],r[t+4];var h=1,d=null,m=null;u<=20&&(d=u,h=1),u==12&&(d=100*u+f,h=2),u!=19&&u!=20||(d=u,h=2),21<=u&&u<=27&&(d=u,h=1),u==28&&(m=i.readShort(r,t+1),h=3),29<=u&&u<=31&&(d=u,h=1),32<=u&&u<=246&&(m=u-139,h=1),247<=u&&u<=250&&(m=256*(u-247)+f+108,h=2),251<=u&&u<=254&&(m=256*-(u-251)-f-108,h=2),u==255&&(m=i.readInt(r,t+1)/65535,h=5),c.push(m??"o"+d),t+=h}return c},e.CFF.readDict=function(r,t,o){for(var s=e._bin,i={},c=[];t<o;){var u=r[t],f=r[t+1];r[t+2],r[t+3],r[t+4];var h=1,d=null,m=null;if(u==28&&(m=s.readShort(r,t+1),h=3),u==29&&(m=s.readInt(r,t+1),h=5),32<=u&&u<=246&&(m=u-139,h=1),247<=u&&u<=250&&(m=256*(u-247)+f+108,h=2),251<=u&&u<=254&&(m=256*-(u-251)-f-108,h=2),u==255)throw m=s.readInt(r,t+1)/65535,h=5,"unknown number";if(u==30){var g=[];for(h=1;;){var A=r[t+h];h++;var y=A>>4,B=15&A;if(y!=15&&g.push(y),B!=15&&g.push(B),B==15)break}for(var x="",M=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],b=0;b<g.length;b++)x+=M[g[b]];m=parseFloat(x)}u<=21&&(d=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],h=1,u==12&&(d=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],h=2)),d!=null?(i[d]=c.length==1?c[0]:c,c=[]):c.push(m),t+=h}return i},e.cmap={},e.cmap.parse=function(r,t,o){r=new Uint8Array(r.buffer,t,o),t=0;var s=e._bin,i={};s.readUshort(r,t),t+=2;var c=s.readUshort(r,t);t+=2;var u=[];i.tables=[];for(var f=0;f<c;f++){var h=s.readUshort(r,t);t+=2;var d=s.readUshort(r,t);t+=2;var m=s.readUint(r,t);t+=4;var g="p"+h+"e"+d,A=u.indexOf(m);if(A==-1){var y;A=i.tables.length,u.push(m);var B=s.readUshort(r,m);B==0?y=e.cmap.parse0(r,m):B==4?y=e.cmap.parse4(r,m):B==6?y=e.cmap.parse6(r,m):B==12?y=e.cmap.parse12(r,m):console.debug("unknown format: "+B,h,d,m),i.tables.push(y)}if(i[g]!=null)throw"multiple tables for one platform+encoding";i[g]=A}return i},e.cmap.parse0=function(r,t){var o=e._bin,s={};s.format=o.readUshort(r,t),t+=2;var i=o.readUshort(r,t);t+=2,o.readUshort(r,t),t+=2,s.map=[];for(var c=0;c<i-6;c++)s.map.push(r[t+c]);return s},e.cmap.parse4=function(r,t){var o=e._bin,s=t,i={};i.format=o.readUshort(r,t),t+=2;var c=o.readUshort(r,t);t+=2,o.readUshort(r,t),t+=2;var u=o.readUshort(r,t);t+=2;var f=u/2;i.searchRange=o.readUshort(r,t),t+=2,i.entrySelector=o.readUshort(r,t),t+=2,i.rangeShift=o.readUshort(r,t),t+=2,i.endCount=o.readUshorts(r,t,f),t+=2*f,t+=2,i.startCount=o.readUshorts(r,t,f),t+=2*f,i.idDelta=[];for(var h=0;h<f;h++)i.idDelta.push(o.readShort(r,t)),t+=2;for(i.idRangeOffset=o.readUshorts(r,t,f),t+=2*f,i.glyphIdArray=[];t<s+c;)i.glyphIdArray.push(o.readUshort(r,t)),t+=2;return i},e.cmap.parse6=function(r,t){var o=e._bin,s={};s.format=o.readUshort(r,t),t+=2,o.readUshort(r,t),t+=2,o.readUshort(r,t),t+=2,s.firstCode=o.readUshort(r,t),t+=2;var i=o.readUshort(r,t);t+=2,s.glyphIdArray=[];for(var c=0;c<i;c++)s.glyphIdArray.push(o.readUshort(r,t)),t+=2;return s},e.cmap.parse12=function(r,t){var o=e._bin,s={};s.format=o.readUshort(r,t),t+=2,t+=2,o.readUint(r,t),t+=4,o.readUint(r,t),t+=4;var i=o.readUint(r,t);t+=4,s.groups=[];for(var c=0;c<i;c++){var u=t+12*c,f=o.readUint(r,u+0),h=o.readUint(r,u+4),d=o.readUint(r,u+8);s.groups.push([f,h,d])}return s},e.glyf={},e.glyf.parse=function(r,t,o,s){for(var i=[],c=0;c<s.maxp.numGlyphs;c++)i.push(null);return i},e.glyf._parseGlyf=function(r,t){var o=e._bin,s=r._data,i=e._tabOffset(s,"glyf",r._offset)+r.loca[t];if(r.loca[t]==r.loca[t+1])return null;var c={};if(c.noc=o.readShort(s,i),i+=2,c.xMin=o.readShort(s,i),i+=2,c.yMin=o.readShort(s,i),i+=2,c.xMax=o.readShort(s,i),i+=2,c.yMax=o.readShort(s,i),i+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(s,i)),i+=2;var f=o.readUshort(s,i);if(i+=2,s.length-i<f)return null;c.instructions=o.readBytes(s,i,f),i+=f;var h=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<h;u++){var d=s[i];if(i++,c.flags.push(d),(8&d)!=0){var m=s[i];i++;for(var g=0;g<m;g++)c.flags.push(d),u++}}for(c.xs=[],u=0;u<h;u++){var A=(2&c.flags[u])!=0,y=(16&c.flags[u])!=0;A?(c.xs.push(y?s[i]:-s[i]),i++):y?c.xs.push(0):(c.xs.push(o.readShort(s,i)),i+=2)}for(c.ys=[],u=0;u<h;u++)A=(4&c.flags[u])!=0,y=(32&c.flags[u])!=0,A?(c.ys.push(y?s[i]:-s[i]),i++):y?c.ys.push(0):(c.ys.push(o.readShort(s,i)),i+=2);var B=0,x=0;for(u=0;u<h;u++)B+=c.xs[u],x+=c.ys[u],c.xs[u]=B,c.ys[u]=x}else{var M;c.parts=[];do{M=o.readUshort(s,i),i+=2;var b={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(b),b.glyphIndex=o.readUshort(s,i),i+=2,1&M){var C=o.readShort(s,i);i+=2;var T=o.readShort(s,i);i+=2}else C=o.readInt8(s,i),i++,T=o.readInt8(s,i),i++;2&M?(b.m.tx=C,b.m.ty=T):(b.p1=C,b.p2=T),8&M?(b.m.a=b.m.d=o.readF2dot14(s,i),i+=2):64&M?(b.m.a=o.readF2dot14(s,i),i+=2,b.m.d=o.readF2dot14(s,i),i+=2):128&M&&(b.m.a=o.readF2dot14(s,i),i+=2,b.m.b=o.readF2dot14(s,i),i+=2,b.m.c=o.readF2dot14(s,i),i+=2,b.m.d=o.readF2dot14(s,i),i+=2)}while(32&M);if(256&M){var E=o.readUshort(s,i);for(i+=2,c.instr=[],u=0;u<E;u++)c.instr.push(s[i]),i++}}return c},e.GDEF={},e.GDEF.parse=function(r,t,o,s){var i=t;t+=4;var c=e._bin.readUshort(r,t);return{glyphClassDef:c===0?null:e._lctf.readClassDef(r,i+c)}},e.GPOS={},e.GPOS.parse=function(r,t,o,s){return e._lctf.parse(r,t,o,s,e.GPOS.subt)},e.GPOS.subt=function(r,t,o,s){var i=e._bin,c=o,u={};if(u.fmt=i.readUshort(r,o),o+=2,t==1||t==2||t==3||t==7||t==8&&u.fmt<=2){var f=i.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,f+c)}if(t==1&&u.fmt==1){var h=i.readUshort(r,o);o+=2,h!=0&&(u.pos=e.GPOS.readValueRecord(r,o,h))}else if(t==2&&u.fmt>=1&&u.fmt<=2){h=i.readUshort(r,o),o+=2;var d=i.readUshort(r,o);o+=2;var m=e._lctf.numOfOnes(h),g=e._lctf.numOfOnes(d);if(u.fmt==1){u.pairsets=[];var A=i.readUshort(r,o);o+=2;for(var y=0;y<A;y++){var B=c+i.readUshort(r,o);o+=2;var x=i.readUshort(r,B);B+=2;for(var M=[],b=0;b<x;b++){var C=i.readUshort(r,B);B+=2,h!=0&&(D=e.GPOS.readValueRecord(r,B,h),B+=2*m),d!=0&&(O=e.GPOS.readValueRecord(r,B,d),B+=2*g),M.push({gid2:C,val1:D,val2:O})}u.pairsets.push(M)}}if(u.fmt==2){var T=i.readUshort(r,o);o+=2;var E=i.readUshort(r,o);o+=2;var F=i.readUshort(r,o);o+=2;var I=i.readUshort(r,o);for(o+=2,u.classDef1=e._lctf.readClassDef(r,c+T),u.classDef2=e._lctf.readClassDef(r,c+E),u.matrix=[],y=0;y<F;y++){var z=[];for(b=0;b<I;b++){var D=null,O=null;h!=0&&(D=e.GPOS.readValueRecord(r,o,h),o+=2*m),d!=0&&(O=e.GPOS.readValueRecord(r,o,d),o+=2*g),z.push({val1:D,val2:O})}u.matrix.push(z)}}}else if(t==4&&u.fmt==1)u.markCoverage=e._lctf.readCoverage(r,i.readUshort(r,o)+c),u.baseCoverage=e._lctf.readCoverage(r,i.readUshort(r,o+2)+c),u.markClassCount=i.readUshort(r,o+4),u.markArray=e.GPOS.readMarkArray(r,i.readUshort(r,o+6)+c),u.baseArray=e.GPOS.readBaseArray(r,i.readUshort(r,o+8)+c,u.markClassCount);else if(t==6&&u.fmt==1)u.mark1Coverage=e._lctf.readCoverage(r,i.readUshort(r,o)+c),u.mark2Coverage=e._lctf.readCoverage(r,i.readUshort(r,o+2)+c),u.markClassCount=i.readUshort(r,o+4),u.mark1Array=e.GPOS.readMarkArray(r,i.readUshort(r,o+6)+c),u.mark2Array=e.GPOS.readBaseArray(r,i.readUshort(r,o+8)+c,u.markClassCount);else{if(t==9&&u.fmt==1){var _=i.readUshort(r,o);o+=2;var K=i.readUint(r,o);if(o+=4,s.ltype==9)s.ltype=_;else if(s.ltype!=_)throw"invalid extension substitution";return e.GPOS.subt(r,s.ltype,c+K)}console.debug("unsupported GPOS table LookupType",t,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(r,t,o){var s=e._bin,i=[];return i.push(1&o?s.readShort(r,t):0),t+=1&o?2:0,i.push(2&o?s.readShort(r,t):0),t+=2&o?2:0,i.push(4&o?s.readShort(r,t):0),t+=4&o?2:0,i.push(8&o?s.readShort(r,t):0),t+=8&o?2:0,i},e.GPOS.readBaseArray=function(r,t,o){var s=e._bin,i=[],c=t,u=s.readUshort(r,t);t+=2;for(var f=0;f<u;f++){for(var h=[],d=0;d<o;d++)h.push(e.GPOS.readAnchorRecord(r,c+s.readUshort(r,t))),t+=2;i.push(h)}return i},e.GPOS.readMarkArray=function(r,t){var o=e._bin,s=[],i=t,c=o.readUshort(r,t);t+=2;for(var u=0;u<c;u++){var f=e.GPOS.readAnchorRecord(r,o.readUshort(r,t+2)+i);f.markClass=o.readUshort(r,t),s.push(f),t+=4}return s},e.GPOS.readAnchorRecord=function(r,t){var o=e._bin,s={};return s.fmt=o.readUshort(r,t),s.x=o.readShort(r,t+2),s.y=o.readShort(r,t+4),s},e.GSUB={},e.GSUB.parse=function(r,t,o,s){return e._lctf.parse(r,t,o,s,e.GSUB.subt)},e.GSUB.subt=function(r,t,o,s){var i=e._bin,c=o,u={};if(u.fmt=i.readUshort(r,o),o+=2,t!=1&&t!=2&&t!=4&&t!=5&&t!=6)return null;if(t==1||t==2||t==4||t==5&&u.fmt<=2||t==6&&u.fmt<=2){var f=i.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,c+f)}if(t==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=i.readShort(r,o),o+=2;else if(u.fmt==2){var h=i.readUshort(r,o);o+=2,u.newg=i.readUshorts(r,o,h),o+=2*u.newg.length}}else if(t==2&&u.fmt==1){h=i.readUshort(r,o),o+=2,u.seqs=[];for(var d=0;d<h;d++){var m=i.readUshort(r,o)+c;o+=2;var g=i.readUshort(r,m);u.seqs.push(i.readUshorts(r,m+2,g))}}else if(t==4)for(u.vals=[],h=i.readUshort(r,o),o+=2,d=0;d<h;d++){var A=i.readUshort(r,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(r,c+A))}else if(t==5&&u.fmt==2){if(u.fmt==2){var y=i.readUshort(r,o);o+=2,u.cDef=e._lctf.readClassDef(r,c+y),u.scset=[];var B=i.readUshort(r,o);for(o+=2,d=0;d<B;d++){var x=i.readUshort(r,o);o+=2,u.scset.push(x==0?null:e.GSUB.readSubClassSet(r,c+x))}}}else if(t==6&&u.fmt==3){if(u.fmt==3){for(d=0;d<3;d++){h=i.readUshort(r,o),o+=2;for(var M=[],b=0;b<h;b++)M.push(e._lctf.readCoverage(r,c+i.readUshort(r,o+2*b)));o+=2*h,d==0&&(u.backCvg=M),d==1&&(u.inptCvg=M),d==2&&(u.ahedCvg=M)}h=i.readUshort(r,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(r,o,h)}}else{if(t==7&&u.fmt==1){var C=i.readUshort(r,o);o+=2;var T=i.readUint(r,o);if(o+=4,s.ltype==9)s.ltype=C;else if(s.ltype!=C)throw"invalid extension substitution";return e.GSUB.subt(r,s.ltype,c+T)}console.debug("unsupported GSUB table LookupType",t,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(r,t){var o=e._bin.readUshort,s=t,i=[],c=o(r,t);t+=2;for(var u=0;u<c;u++){var f=o(r,t);t+=2,i.push(e.GSUB.readSubClassRule(r,s+f))}return i},e.GSUB.readSubClassRule=function(r,t){var o=e._bin.readUshort,s={},i=o(r,t),c=o(r,t+=2);t+=2,s.input=[];for(var u=0;u<i-1;u++)s.input.push(o(r,t)),t+=2;return s.substLookupRecords=e.GSUB.readSubstLookupRecords(r,t,c),s},e.GSUB.readSubstLookupRecords=function(r,t,o){for(var s=e._bin.readUshort,i=[],c=0;c<o;c++)i.push(s(r,t),s(r,t+2)),t+=4;return i},e.GSUB.readChainSubClassSet=function(r,t){var o=e._bin,s=t,i=[],c=o.readUshort(r,t);t+=2;for(var u=0;u<c;u++){var f=o.readUshort(r,t);t+=2,i.push(e.GSUB.readChainSubClassRule(r,s+f))}return i},e.GSUB.readChainSubClassRule=function(r,t){for(var o=e._bin,s={},i=["backtrack","input","lookahead"],c=0;c<i.length;c++){var u=o.readUshort(r,t);t+=2,c==1&&u--,s[i[c]]=o.readUshorts(r,t,u),t+=2*s[i[c]].length}return u=o.readUshort(r,t),t+=2,s.subst=o.readUshorts(r,t,2*u),t+=2*s.subst.length,s},e.GSUB.readLigatureSet=function(r,t){var o=e._bin,s=t,i=[],c=o.readUshort(r,t);t+=2;for(var u=0;u<c;u++){var f=o.readUshort(r,t);t+=2,i.push(e.GSUB.readLigature(r,s+f))}return i},e.GSUB.readLigature=function(r,t){var o=e._bin,s={chain:[]};s.nglyph=o.readUshort(r,t),t+=2;var i=o.readUshort(r,t);t+=2;for(var c=0;c<i-1;c++)s.chain.push(o.readUshort(r,t)),t+=2;return s},e.head={},e.head.parse=function(r,t,o){var s=e._bin,i={};return s.readFixed(r,t),t+=4,i.fontRevision=s.readFixed(r,t),t+=4,s.readUint(r,t),t+=4,s.readUint(r,t),t+=4,i.flags=s.readUshort(r,t),t+=2,i.unitsPerEm=s.readUshort(r,t),t+=2,i.created=s.readUint64(r,t),t+=8,i.modified=s.readUint64(r,t),t+=8,i.xMin=s.readShort(r,t),t+=2,i.yMin=s.readShort(r,t),t+=2,i.xMax=s.readShort(r,t),t+=2,i.yMax=s.readShort(r,t),t+=2,i.macStyle=s.readUshort(r,t),t+=2,i.lowestRecPPEM=s.readUshort(r,t),t+=2,i.fontDirectionHint=s.readShort(r,t),t+=2,i.indexToLocFormat=s.readShort(r,t),t+=2,i.glyphDataFormat=s.readShort(r,t),t+=2,i},e.hhea={},e.hhea.parse=function(r,t,o){var s=e._bin,i={};return s.readFixed(r,t),t+=4,i.ascender=s.readShort(r,t),t+=2,i.descender=s.readShort(r,t),t+=2,i.lineGap=s.readShort(r,t),t+=2,i.advanceWidthMax=s.readUshort(r,t),t+=2,i.minLeftSideBearing=s.readShort(r,t),t+=2,i.minRightSideBearing=s.readShort(r,t),t+=2,i.xMaxExtent=s.readShort(r,t),t+=2,i.caretSlopeRise=s.readShort(r,t),t+=2,i.caretSlopeRun=s.readShort(r,t),t+=2,i.caretOffset=s.readShort(r,t),t+=2,t+=8,i.metricDataFormat=s.readShort(r,t),t+=2,i.numberOfHMetrics=s.readUshort(r,t),t+=2,i},e.hmtx={},e.hmtx.parse=function(r,t,o,s){for(var i=e._bin,c={aWidth:[],lsBearing:[]},u=0,f=0,h=0;h<s.maxp.numGlyphs;h++)h<s.hhea.numberOfHMetrics&&(u=i.readUshort(r,t),t+=2,f=i.readShort(r,t),t+=2),c.aWidth.push(u),c.lsBearing.push(f);return c},e.kern={},e.kern.parse=function(r,t,o,s){var i=e._bin,c=i.readUshort(r,t);if(t+=2,c==1)return e.kern.parseV1(r,t-2,o,s);var u=i.readUshort(r,t);t+=2;for(var f={glyph1:[],rval:[]},h=0;h<u;h++){t+=2,o=i.readUshort(r,t),t+=2;var d=i.readUshort(r,t);t+=2;var m=d>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;t=e.kern.readFormat0(r,t,f)}return f},e.kern.parseV1=function(r,t,o,s){var i=e._bin;i.readFixed(r,t),t+=4;var c=i.readUint(r,t);t+=4;for(var u={glyph1:[],rval:[]},f=0;f<c;f++){i.readUint(r,t),t+=4;var h=i.readUshort(r,t);t+=2,i.readUshort(r,t),t+=2;var d=h>>>8;if((d&=15)!=0)throw"unknown kern table format: "+d;t=e.kern.readFormat0(r,t,u)}return u},e.kern.readFormat0=function(r,t,o){var s=e._bin,i=-1,c=s.readUshort(r,t);t+=2,s.readUshort(r,t),t+=2,s.readUshort(r,t),t+=2,s.readUshort(r,t),t+=2;for(var u=0;u<c;u++){var f=s.readUshort(r,t);t+=2;var h=s.readUshort(r,t);t+=2;var d=s.readShort(r,t);t+=2,f!=i&&(o.glyph1.push(f),o.rval.push({glyph2:[],vals:[]}));var m=o.rval[o.rval.length-1];m.glyph2.push(h),m.vals.push(d),i=f}return t},e.loca={},e.loca.parse=function(r,t,o,s){var i=e._bin,c=[],u=s.head.indexToLocFormat,f=s.maxp.numGlyphs+1;if(u==0)for(var h=0;h<f;h++)c.push(i.readUshort(r,t+(h<<1))<<1);if(u==1)for(h=0;h<f;h++)c.push(i.readUint(r,t+(h<<2)));return c},e.maxp={},e.maxp.parse=function(r,t,o){var s=e._bin,i={},c=s.readUint(r,t);return t+=4,i.numGlyphs=s.readUshort(r,t),t+=2,c==65536&&(i.maxPoints=s.readUshort(r,t),t+=2,i.maxContours=s.readUshort(r,t),t+=2,i.maxCompositePoints=s.readUshort(r,t),t+=2,i.maxCompositeContours=s.readUshort(r,t),t+=2,i.maxZones=s.readUshort(r,t),t+=2,i.maxTwilightPoints=s.readUshort(r,t),t+=2,i.maxStorage=s.readUshort(r,t),t+=2,i.maxFunctionDefs=s.readUshort(r,t),t+=2,i.maxInstructionDefs=s.readUshort(r,t),t+=2,i.maxStackElements=s.readUshort(r,t),t+=2,i.maxSizeOfInstructions=s.readUshort(r,t),t+=2,i.maxComponentElements=s.readUshort(r,t),t+=2,i.maxComponentDepth=s.readUshort(r,t),t+=2),i},e.name={},e.name.parse=function(r,t,o){var s=e._bin,i={};s.readUshort(r,t),t+=2;var c=s.readUshort(r,t);t+=2,s.readUshort(r,t);for(var u,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=t+=2,d=0;d<c;d++){var m=s.readUshort(r,t);t+=2;var g=s.readUshort(r,t);t+=2;var A=s.readUshort(r,t);t+=2;var y=s.readUshort(r,t);t+=2;var B=s.readUshort(r,t);t+=2;var x=s.readUshort(r,t);t+=2;var M,b=f[y],C=h+12*c+x;if(m==0)M=s.readUnicode(r,C,B/2);else if(m==3&&g==0)M=s.readUnicode(r,C,B/2);else if(g==0)M=s.readASCII(r,C,B);else if(g==1)M=s.readUnicode(r,C,B/2);else if(g==3)M=s.readUnicode(r,C,B/2);else{if(m!=1)throw"unknown encoding "+g+", platformID: "+m;M=s.readASCII(r,C,B),console.debug("reading unknown MAC encoding "+g+" as ASCII")}var T="p"+m+","+A.toString(16);i[T]==null&&(i[T]={}),i[T][b!==void 0?b:y]=M,i[T]._lang=A}for(var E in i)if(i[E].postScriptName!=null&&i[E]._lang==1033)return i[E];for(var E in i)if(i[E].postScriptName!=null&&i[E]._lang==0)return i[E];for(var E in i)if(i[E].postScriptName!=null&&i[E]._lang==3084)return i[E];for(var E in i)if(i[E].postScriptName!=null)return i[E];for(var E in i){u=E;break}return console.debug("returning name table with languageID "+i[u]._lang),i[u]},e["OS/2"]={},e["OS/2"].parse=function(r,t,o){var s=e._bin.readUshort(r,t);t+=2;var i={};if(s==0)e["OS/2"].version0(r,t,i);else if(s==1)e["OS/2"].version1(r,t,i);else if(s==2||s==3||s==4)e["OS/2"].version2(r,t,i);else{if(s!=5)throw"unknown OS/2 table version: "+s;e["OS/2"].version5(r,t,i)}return i},e["OS/2"].version0=function(r,t,o){var s=e._bin;return o.xAvgCharWidth=s.readShort(r,t),t+=2,o.usWeightClass=s.readUshort(r,t),t+=2,o.usWidthClass=s.readUshort(r,t),t+=2,o.fsType=s.readUshort(r,t),t+=2,o.ySubscriptXSize=s.readShort(r,t),t+=2,o.ySubscriptYSize=s.readShort(r,t),t+=2,o.ySubscriptXOffset=s.readShort(r,t),t+=2,o.ySubscriptYOffset=s.readShort(r,t),t+=2,o.ySuperscriptXSize=s.readShort(r,t),t+=2,o.ySuperscriptYSize=s.readShort(r,t),t+=2,o.ySuperscriptXOffset=s.readShort(r,t),t+=2,o.ySuperscriptYOffset=s.readShort(r,t),t+=2,o.yStrikeoutSize=s.readShort(r,t),t+=2,o.yStrikeoutPosition=s.readShort(r,t),t+=2,o.sFamilyClass=s.readShort(r,t),t+=2,o.panose=s.readBytes(r,t,10),t+=10,o.ulUnicodeRange1=s.readUint(r,t),t+=4,o.ulUnicodeRange2=s.readUint(r,t),t+=4,o.ulUnicodeRange3=s.readUint(r,t),t+=4,o.ulUnicodeRange4=s.readUint(r,t),t+=4,o.achVendID=[s.readInt8(r,t),s.readInt8(r,t+1),s.readInt8(r,t+2),s.readInt8(r,t+3)],t+=4,o.fsSelection=s.readUshort(r,t),t+=2,o.usFirstCharIndex=s.readUshort(r,t),t+=2,o.usLastCharIndex=s.readUshort(r,t),t+=2,o.sTypoAscender=s.readShort(r,t),t+=2,o.sTypoDescender=s.readShort(r,t),t+=2,o.sTypoLineGap=s.readShort(r,t),t+=2,o.usWinAscent=s.readUshort(r,t),t+=2,o.usWinDescent=s.readUshort(r,t),t+=2},e["OS/2"].version1=function(r,t,o){var s=e._bin;return t=e["OS/2"].version0(r,t,o),o.ulCodePageRange1=s.readUint(r,t),t+=4,o.ulCodePageRange2=s.readUint(r,t),t+=4},e["OS/2"].version2=function(r,t,o){var s=e._bin;return t=e["OS/2"].version1(r,t,o),o.sxHeight=s.readShort(r,t),t+=2,o.sCapHeight=s.readShort(r,t),t+=2,o.usDefault=s.readUshort(r,t),t+=2,o.usBreak=s.readUshort(r,t),t+=2,o.usMaxContext=s.readUshort(r,t),t+=2},e["OS/2"].version5=function(r,t,o){var s=e._bin;return t=e["OS/2"].version2(r,t,o),o.usLowerOpticalPointSize=s.readUshort(r,t),t+=2,o.usUpperOpticalPointSize=s.readUshort(r,t),t+=2},e.post={},e.post.parse=function(r,t,o){var s=e._bin,i={};return i.version=s.readFixed(r,t),t+=4,i.italicAngle=s.readFixed(r,t),t+=4,i.underlinePosition=s.readShort(r,t),t+=2,i.underlineThickness=s.readShort(r,t),t+=2,i},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,t){var o=r.cmap,s=-1;if(o.p0e4!=null?s=o.p0e4:o.p3e1!=null?s=o.p3e1:o.p1e0!=null?s=o.p1e0:o.p0e3!=null&&(s=o.p0e3),s==-1)throw"no familiar platform and encoding!";var i=o.tables[s];if(i.format==0)return t>=i.map.length?0:i.map[t];if(i.format==4){for(var c=-1,u=0;u<i.endCount.length;u++)if(t<=i.endCount[u]){c=u;break}return c==-1||i.startCount[c]>t?0:65535&(i.idRangeOffset[c]!=0?i.glyphIdArray[t-i.startCount[c]+(i.idRangeOffset[c]>>1)-(i.idRangeOffset.length-c)]:t+i.idDelta[c])}if(i.format==12){if(t>i.groups[i.groups.length-1][1])return 0;for(u=0;u<i.groups.length;u++){var f=i.groups[u];if(f[0]<=t&&t<=f[1])return f[2]+(t-f[0])}return 0}throw"unknown cmap table format "+i.format},e.U.glyphToPath=function(r,t){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[t]){var s=r.SVG.entries[t];return s==null?o:(typeof s=="string"&&(s=e.SVG.toPath(s),r.SVG.entries[t]=s),s)}if(r.CFF){var i={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},c=r.CFF,u=r.CFF.Private;if(c.ROS){for(var f=0;c.FDSelect[f+2]<=t;)f+=2;u=c.FDArray[c.FDSelect[f+1]].Private}e.U._drawCFF(r.CFF.CharStrings[t],i,c,u,o)}else r.glyf&&e.U._drawGlyf(t,r,o);return o},e.U._drawGlyf=function(r,t,o){var s=t.glyf[r];s==null&&(s=t.glyf[r]=e.glyf._parseGlyf(t,r)),s!=null&&(s.noc>-1?e.U._simpleGlyph(s,o):e.U._compoGlyph(s,t,o))},e.U._simpleGlyph=function(r,t){for(var o=0;o<r.noc;o++){for(var s=o==0?0:r.endPts[o-1]+1,i=r.endPts[o],c=s;c<=i;c++){var u=c==s?i:c-1,f=c==i?s:c+1,h=1&r.flags[c],d=1&r.flags[u],m=1&r.flags[f],g=r.xs[c],A=r.ys[c];if(c==s)if(h){if(!d){e.U.P.moveTo(t,g,A);continue}e.U.P.moveTo(t,r.xs[u],r.ys[u])}else d?e.U.P.moveTo(t,r.xs[u],r.ys[u]):e.U.P.moveTo(t,(r.xs[u]+g)/2,(r.ys[u]+A)/2);h?d&&e.U.P.lineTo(t,g,A):m?e.U.P.qcurveTo(t,g,A,r.xs[f],r.ys[f]):e.U.P.qcurveTo(t,g,A,(g+r.xs[f])/2,(A+r.ys[f])/2)}e.U.P.closePath(t)}},e.U._compoGlyph=function(r,t,o){for(var s=0;s<r.parts.length;s++){var i={cmds:[],crds:[]},c=r.parts[s];e.U._drawGlyf(c.glyphIndex,t,i);for(var u=c.m,f=0;f<i.crds.length;f+=2){var h=i.crds[f],d=i.crds[f+1];o.crds.push(h*u.a+d*u.b+u.tx),o.crds.push(h*u.c+d*u.d+u.ty)}for(f=0;f<i.cmds.length;f++)o.cmds.push(i.cmds[f])}},e.U._getGlyphClass=function(r,t){var o=e._lctf.getInterval(t,r);return o==-1?0:t[o+2]},e.U._applySubs=function(r,t,o,s){for(var i=r.length-t-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,f=o.tabs[c];if(!f.coverage||(u=e._lctf.coverageIndex(f.coverage,r[t]))!=-1){if(o.ltype==1)r[t],f.fmt==1?r[t]=r[t]+f.delta:r[t]=f.newg[u];else if(o.ltype==4)for(var h=f.vals[u],d=0;d<h.length;d++){var m=h[d],g=m.chain.length;if(!(g>i)){for(var A=!0,y=0,B=0;B<g;B++){for(;r[t+y+(1+B)]==-1;)y++;m.chain[B]!=r[t+y+(1+B)]&&(A=!1)}if(A){for(r[t]=m.nglyph,B=0;B<g+y;B++)r[t+B+1]=-1;break}}}else if(o.ltype==5&&f.fmt==2)for(var x=e._lctf.getInterval(f.cDef,r[t]),M=f.cDef[x+2],b=f.scset[M],C=0;C<b.length;C++){var T=b[C],E=T.input;if(!(E.length>i)){for(A=!0,B=0;B<E.length;B++){var F=e._lctf.getInterval(f.cDef,r[t+1+B]);if(x==-1&&f.cDef[F+2]!=E[B]){A=!1;break}}if(A){var I=T.substLookupRecords;for(d=0;d<I.length;d+=2)I[d],I[d+1]}}}else if(o.ltype==6&&f.fmt==3){if(!e.U._glsCovered(r,f.backCvg,t-f.backCvg.length)||!e.U._glsCovered(r,f.inptCvg,t)||!e.U._glsCovered(r,f.ahedCvg,t+f.inptCvg.length))continue;var z=f.lookupRec;for(C=0;C<z.length;C+=2){x=z[C];var D=s[z[C+1]];e.U._applySubs(r,t+x,D,s)}}}}},e.U._glsCovered=function(r,t,o){for(var s=0;s<t.length;s++)if(e._lctf.coverageIndex(t[s],r[o+s])==-1)return!1;return!0},e.U.glyphsToPath=function(r,t,o){for(var s={cmds:[],crds:[]},i=0,c=0;c<t.length;c++){var u=t[c];if(u!=-1){for(var f=c<t.length-1&&t[c+1]!=-1?t[c+1]:0,h=e.U.glyphToPath(r,u),d=0;d<h.crds.length;d+=2)s.crds.push(h.crds[d]+i),s.crds.push(h.crds[d+1]);for(o&&s.cmds.push(o),d=0;d<h.cmds.length;d++)s.cmds.push(h.cmds[d]);o&&s.cmds.push("X"),i+=r.hmtx.aWidth[u],c<t.length-1&&(i+=e.U.getPairAdjustment(r,u,f))}}return s},e.U.P={},e.U.P.moveTo=function(r,t,o){r.cmds.push("M"),r.crds.push(t,o)},e.U.P.lineTo=function(r,t,o){r.cmds.push("L"),r.crds.push(t,o)},e.U.P.curveTo=function(r,t,o,s,i,c,u){r.cmds.push("C"),r.crds.push(t,o,s,i,c,u)},e.U.P.qcurveTo=function(r,t,o,s,i){r.cmds.push("Q"),r.crds.push(t,o,s,i)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,t,o,s,i){for(var c=t.stack,u=t.nStems,f=t.haveWidth,h=t.width,d=t.open,m=0,g=t.x,A=t.y,y=0,B=0,x=0,M=0,b=0,C=0,T=0,E=0,F=0,I=0,z={val:0,size:0};m<r.length;){e.CFF.getCharString(r,m,z);var D=z.val;if(m+=z.size,D=="o1"||D=="o18")c.length%2!=0&&!f&&(h=c.shift()+s.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(D=="o3"||D=="o23")c.length%2!=0&&!f&&(h=c.shift()+s.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(D=="o4")c.length>1&&!f&&(h=c.shift()+s.nominalWidthX,f=!0),d&&e.U.P.closePath(i),A+=c.pop(),e.U.P.moveTo(i,g,A),d=!0;else if(D=="o5")for(;c.length>0;)g+=c.shift(),A+=c.shift(),e.U.P.lineTo(i,g,A);else if(D=="o6"||D=="o7")for(var O=c.length,_=D=="o6",K=0;K<O;K++){var N=c.shift();_?g+=N:A+=N,_=!_,e.U.P.lineTo(i,g,A)}else if(D=="o8"||D=="o24"){O=c.length;for(var ne=0;ne+6<=O;)y=g+c.shift(),B=A+c.shift(),x=y+c.shift(),M=B+c.shift(),g=x+c.shift(),A=M+c.shift(),e.U.P.curveTo(i,y,B,x,M,g,A),ne+=6;D=="o24"&&(g+=c.shift(),A+=c.shift(),e.U.P.lineTo(i,g,A))}else{if(D=="o11")break;if(D=="o1234"||D=="o1235"||D=="o1236"||D=="o1237")D=="o1234"&&(B=A,x=(y=g+c.shift())+c.shift(),I=M=B+c.shift(),C=M,E=A,g=(T=(b=(F=x+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(i,y,B,x,M,F,I),e.U.P.curveTo(i,b,C,T,E,g,A)),D=="o1235"&&(y=g+c.shift(),B=A+c.shift(),x=y+c.shift(),M=B+c.shift(),F=x+c.shift(),I=M+c.shift(),b=F+c.shift(),C=I+c.shift(),T=b+c.shift(),E=C+c.shift(),g=T+c.shift(),A=E+c.shift(),c.shift(),e.U.P.curveTo(i,y,B,x,M,F,I),e.U.P.curveTo(i,b,C,T,E,g,A)),D=="o1236"&&(y=g+c.shift(),B=A+c.shift(),x=y+c.shift(),I=M=B+c.shift(),C=M,T=(b=(F=x+c.shift())+c.shift())+c.shift(),E=C+c.shift(),g=T+c.shift(),e.U.P.curveTo(i,y,B,x,M,F,I),e.U.P.curveTo(i,b,C,T,E,g,A)),D=="o1237"&&(y=g+c.shift(),B=A+c.shift(),x=y+c.shift(),M=B+c.shift(),F=x+c.shift(),I=M+c.shift(),b=F+c.shift(),C=I+c.shift(),T=b+c.shift(),E=C+c.shift(),Math.abs(T-g)>Math.abs(E-A)?g=T+c.shift():A=E+c.shift(),e.U.P.curveTo(i,y,B,x,M,F,I),e.U.P.curveTo(i,b,C,T,E,g,A));else if(D=="o14"){if(c.length>0&&!f&&(h=c.shift()+o.nominalWidthX,f=!0),c.length==4){var se=c.shift(),Z=c.shift(),P=c.shift(),w=c.shift(),G=e.CFF.glyphBySE(o,P),L=e.CFF.glyphBySE(o,w);e.U._drawCFF(o.CharStrings[G],t,o,s,i),t.x=se,t.y=Z,e.U._drawCFF(o.CharStrings[L],t,o,s,i)}d&&(e.U.P.closePath(i),d=!1)}else if(D=="o19"||D=="o20")c.length%2!=0&&!f&&(h=c.shift()+s.nominalWidthX),u+=c.length>>1,c.length=0,f=!0,m+=u+7>>3;else if(D=="o21")c.length>2&&!f&&(h=c.shift()+s.nominalWidthX,f=!0),A+=c.pop(),g+=c.pop(),d&&e.U.P.closePath(i),e.U.P.moveTo(i,g,A),d=!0;else if(D=="o22")c.length>1&&!f&&(h=c.shift()+s.nominalWidthX,f=!0),g+=c.pop(),d&&e.U.P.closePath(i),e.U.P.moveTo(i,g,A),d=!0;else if(D=="o25"){for(;c.length>6;)g+=c.shift(),A+=c.shift(),e.U.P.lineTo(i,g,A);y=g+c.shift(),B=A+c.shift(),x=y+c.shift(),M=B+c.shift(),g=x+c.shift(),A=M+c.shift(),e.U.P.curveTo(i,y,B,x,M,g,A)}else if(D=="o26")for(c.length%2&&(g+=c.shift());c.length>0;)y=g,B=A+c.shift(),g=x=y+c.shift(),A=(M=B+c.shift())+c.shift(),e.U.P.curveTo(i,y,B,x,M,g,A);else if(D=="o27")for(c.length%2&&(A+=c.shift());c.length>0;)B=A,x=(y=g+c.shift())+c.shift(),M=B+c.shift(),g=x+c.shift(),A=M,e.U.P.curveTo(i,y,B,x,M,g,A);else if(D=="o10"||D=="o29"){var J=D=="o10"?s:o;if(c.length==0)console.debug("error: empty stack");else{var k=c.pop(),W=J.Subrs[k+J.Bias];t.x=g,t.y=A,t.nStems=u,t.haveWidth=f,t.width=h,t.open=d,e.U._drawCFF(W,t,o,s,i),g=t.x,A=t.y,u=t.nStems,f=t.haveWidth,h=t.width,d=t.open}}else if(D=="o30"||D=="o31"){var V=c.length,q=(ne=0,D=="o31");for(ne+=V-(O=-3&V);ne<O;)q?(B=A,x=(y=g+c.shift())+c.shift(),A=(M=B+c.shift())+c.shift(),O-ne==5?(g=x+c.shift(),ne++):g=x,q=!1):(y=g,B=A+c.shift(),x=y+c.shift(),M=B+c.shift(),g=x+c.shift(),O-ne==5?(A=M+c.shift(),ne++):A=M,q=!0),e.U.P.curveTo(i,y,B,x,M,g,A),ne+=4}else{if((D+"").charAt(0)=="o")throw console.debug("Unknown operation: "+D,r),D;c.push(D)}}}t.x=g,t.y=A,t.nStems=u,t.haveWidth=f,t.width=h,t.open=d};var n=e,a={Typr:n};return l.Typr=n,l.default=a,Object.defineProperty(l,"__esModule",{value:!0}),l}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Zl(){return function(l){var e=Uint8Array,n=Uint16Array,a=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),t=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(D,O){for(var _=new n(31),K=0;K<31;++K)_[K]=O+=1<<D[K-1];var N=new a(_[30]);for(K=1;K<30;++K)for(var ne=_[K];ne<_[K+1];++ne)N[ne]=ne-_[K]<<5|K;return[_,N]},i=s(r,2),c=i[0],u=i[1];c[28]=258,u[258]=28;for(var f=s(t,0)[0],h=new n(32768),d=0;d<32768;++d){var m=(43690&d)>>>1|(21845&d)<<1;m=(61680&(m=(52428&m)>>>2|(13107&m)<<2))>>>4|(3855&m)<<4,h[d]=((65280&m)>>>8|(255&m)<<8)>>>1}var g=function(D,O,_){for(var K=D.length,N=0,ne=new n(O);N<K;++N)++ne[D[N]-1];var se,Z=new n(O);for(N=0;N<O;++N)Z[N]=Z[N-1]+ne[N-1]<<1;{se=new n(1<<O);var P=15-O;for(N=0;N<K;++N)if(D[N])for(var w=N<<4|D[N],G=O-D[N],L=Z[D[N]-1]++<<G,J=L|(1<<G)-1;L<=J;++L)se[h[L]>>>P]=w}return se},A=new e(288);for(d=0;d<144;++d)A[d]=8;for(d=144;d<256;++d)A[d]=9;for(d=256;d<280;++d)A[d]=7;for(d=280;d<288;++d)A[d]=8;var y=new e(32);for(d=0;d<32;++d)y[d]=5;var B=g(A,9),x=g(y,5),M=function(D){for(var O=D[0],_=1;_<D.length;++_)D[_]>O&&(O=D[_]);return O},b=function(D,O,_){var K=O/8|0;return(D[K]|D[K+1]<<8)>>(7&O)&_},C=function(D,O){var _=O/8|0;return(D[_]|D[_+1]<<8|D[_+2]<<16)>>(7&O)},T=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(D,O,_){var K=new Error(O||T[D]);if(K.code=D,Error.captureStackTrace&&Error.captureStackTrace(K,E),!_)throw K;return K},F=function(D,O,_){var K=D.length;if(!K||_&&!_.l&&K<5)return O||new e(0);var N=!O||_,ne=!_||_.i;_||(_={}),O||(O=new e(3*K));var se,Z=function(we){var R=O.length;if(we>R){var $=new e(Math.max(2*R,we));$.set(O),O=$}},P=_.f||0,w=_.p||0,G=_.b||0,L=_.l,J=_.d,k=_.m,W=_.n,V=8*K;do{if(!L){_.f=P=b(D,w,1);var q=b(D,w+1,3);if(w+=3,!q){var fe=D[(Ce=((se=w)/8|0)+(7&se&&1)+4)-4]|D[Ce-3]<<8,de=Ce+fe;if(de>K){ne&&E(0);break}N&&Z(G+fe),O.set(D.subarray(Ce,de),G),_.b=G+=fe,_.p=w=8*de;continue}if(q==1)L=B,J=x,k=9,W=5;else if(q==2){var ee=b(D,w,31)+257,re=b(D,w+10,15)+4,Ie=ee+b(D,w+5,31)+1;w+=14;for(var Te=new e(Ie),me=new e(19),Ee=0;Ee<re;++Ee)me[o[Ee]]=b(D,w+3*Ee,7);w+=3*re;var ye=M(me),oe=(1<<ye)-1,Be=g(me,ye);for(Ee=0;Ee<Ie;){var Ce,te=Be[b(D,w,oe)];if(w+=15&te,(Ce=te>>>4)<16)Te[Ee++]=Ce;else{var Ue=0,ge=0;for(Ce==16?(ge=3+b(D,w,3),w+=2,Ue=Te[Ee-1]):Ce==17?(ge=3+b(D,w,7),w+=3):Ce==18&&(ge=11+b(D,w,127),w+=7);ge--;)Te[Ee++]=Ue}}var be=Te.subarray(0,ee),pe=Te.subarray(ee);k=M(be),W=M(pe),L=g(be,k),J=g(pe,W)}else E(1);if(w>V){ne&&E(0);break}}N&&Z(G+131072);for(var ze=(1<<k)-1,ve=(1<<W)-1,Me=w;;Me=w){var De=(Ue=L[C(D,w)&ze])>>>4;if((w+=15&Ue)>V){ne&&E(0);break}if(Ue||E(2),De<256)O[G++]=De;else{if(De==256){Me=w,L=null;break}var ke=De-254;if(De>264){var Ve=r[Ee=De-257];ke=b(D,w,(1<<Ve)-1)+c[Ee],w+=Ve}var it=J[C(D,w)&ve],Pe=it>>>4;if(it||E(3),w+=15&it,pe=f[Pe],Pe>3&&(Ve=t[Pe],pe+=C(D,w)&(1<<Ve)-1,w+=Ve),w>V){ne&&E(0);break}N&&Z(G+131072);for(var Re=G+ke;G<Re;G+=4)O[G]=O[G-pe],O[G+1]=O[G+1-pe],O[G+2]=O[G+2-pe],O[G+3]=O[G+3-pe];G=Re}}_.l=L,_.p=Me,_.b=G,L&&(P=1,_.m=k,_.d=J,_.n=W)}while(!P);return G==O.length?O:function(we,R,$){($==null||$>we.length)&&($=we.length);var he=new(we instanceof n?n:we instanceof a?a:e)($-R);return he.set(we.subarray(R,$)),he}(O,0,G)},I=new e(0),z=typeof TextDecoder<"u"&&new TextDecoder;try{z.decode(I,{stream:!0})}catch{}return l.convert_streams=function(D){var O=new DataView(D),_=0;function K(){var ee=O.getUint16(_);return _+=2,ee}function N(){var ee=O.getUint32(_);return _+=4,ee}function ne(ee){fe.setUint16(de,ee),de+=2}function se(ee){fe.setUint32(de,ee),de+=4}for(var Z={signature:N(),flavor:N(),length:N(),numTables:K(),reserved:K(),totalSfntSize:N(),majorVersion:K(),minorVersion:K(),metaOffset:N(),metaLength:N(),metaOrigLength:N(),privOffset:N(),privLength:N()},P=0;Math.pow(2,P)<=Z.numTables;)P++;P--;for(var w=16*Math.pow(2,P),G=16*Z.numTables-w,L=12,J=[],k=0;k<Z.numTables;k++)J.push({tag:N(),offset:N(),compLength:N(),origLength:N(),origChecksum:N()}),L+=16;var W,V=new Uint8Array(12+16*J.length+J.reduce(function(ee,re){return ee+re.origLength+4},0)),q=V.buffer,fe=new DataView(q),de=0;return se(Z.flavor),ne(Z.numTables),ne(w),ne(P),ne(G),J.forEach(function(ee){se(ee.tag),se(ee.origChecksum),se(L),se(ee.origLength),ee.outOffset=L,(L+=ee.origLength)%4!=0&&(L+=4-L%4)}),J.forEach(function(ee){var re,Ie=D.slice(ee.offset,ee.offset+ee.compLength);if(ee.compLength!=ee.origLength){var Te=new Uint8Array(ee.origLength);re=new Uint8Array(Ie,2),F(re,Te)}else Te=new Uint8Array(Ie);V.set(Te,ee.outOffset);var me=0;(L=ee.outOffset+ee.origLength)%4!=0&&(me=4-L%4),V.set(new Uint8Array(me).buffer,ee.outOffset+ee.origLength),W=L+me}),q.slice(0,W)},Object.defineProperty(l,"__esModule",{value:!0}),l}({}).convert_streams}function ql(l,e){const n={M:2,L:2,Q:4,C:6,Z:0},a={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,t=2,o=4,s=8,i=16,c=32;let u;function f(T){if(!u){const E={R:t,L:r,D:o,C:i,U:c,T:s};u=new Map;for(let F in a){let I=0;a[F].split(",").forEach(z=>{let[D,O]=z.split("+");D=parseInt(D,36),O=O?parseInt(O,36):0,u.set(I+=D,E[F]);for(let _=O;_--;)u.set(++I,E[F])})}}return u.get(T)||c}const h=1,d=2,m=3,g=4,A=[null,"isol","init","fina","medi"];function y(T){const E=new Uint8Array(T.length);let F=c,I=h,z=-1;for(let D=0;D<T.length;D++){const O=T.codePointAt(D);let _=f(O)|0,K=h;_&s||(F&(r|o|i)?_&(t|o|i)?(K=m,(I===h||I===m)&&E[z]++):_&(r|c)&&(I===d||I===g)&&E[z]--:F&(t|c)&&(I===d||I===g)&&E[z]--,I=E[D]=K,F=_,z=D,O>65535&&D++)}return E}function B(T,E){const F=[];for(let z=0;z<E.length;z++){const D=E.codePointAt(z);D>65535&&z++,F.push(l.U.codeToGlyph(T,D))}const I=T.GSUB;if(I){const{lookupList:z,featureList:D}=I;let O;const _=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,K=[];D.forEach(N=>{if(_.test(N.tag))for(let ne=0;ne<N.tab.length;ne++){if(K[N.tab[ne]])continue;K[N.tab[ne]]=!0;const se=z[N.tab[ne]],Z=/^(isol|init|fina|medi)$/.test(N.tag);Z&&!O&&(O=y(E));for(let P=0;P<F.length;P++)(!O||!Z||A[O[P]]===N.tag)&&l.U._applySubs(F,P,se,z)}})}return F}function x(T,E){const F=new Int16Array(E.length*3);let I=0;for(;I<E.length;I++){const _=E[I];if(_===-1)continue;F[I*3+2]=T.hmtx.aWidth[_];const K=T.GPOS;if(K){const N=K.lookupList;for(let ne=0;ne<N.length;ne++){const se=N[ne];for(let Z=0;Z<se.tabs.length;Z++){const P=se.tabs[Z];if(se.ltype===1){if(l._lctf.coverageIndex(P.coverage,_)!==-1&&P.pos){O(P.pos,I);break}}else if(se.ltype===2){let w=null,G=z();if(G!==-1){const L=l._lctf.coverageIndex(P.coverage,E[G]);if(L!==-1){if(P.fmt===1){const J=P.pairsets[L];for(let k=0;k<J.length;k++)J[k].gid2===_&&(w=J[k])}else if(P.fmt===2){const J=l.U._getGlyphClass(E[G],P.classDef1),k=l.U._getGlyphClass(_,P.classDef2);w=P.matrix[J][k]}if(w){w.val1&&O(w.val1,G),w.val2&&O(w.val2,I);break}}}}else if(se.ltype===4){const w=l._lctf.coverageIndex(P.markCoverage,_);if(w!==-1){const G=z(D),L=G===-1?-1:l._lctf.coverageIndex(P.baseCoverage,E[G]);if(L!==-1){const J=P.markArray[w],k=P.baseArray[L][J.markClass];F[I*3]=k.x-J.x+F[G*3]-F[G*3+2],F[I*3+1]=k.y-J.y+F[G*3+1];break}}}else if(se.ltype===6){const w=l._lctf.coverageIndex(P.mark1Coverage,_);if(w!==-1){const G=z();if(G!==-1){const L=E[G];if(M(T,L)===3){const J=l._lctf.coverageIndex(P.mark2Coverage,L);if(J!==-1){const k=P.mark1Array[w],W=P.mark2Array[J][k.markClass];F[I*3]=W.x-k.x+F[G*3]-F[G*3+2],F[I*3+1]=W.y-k.y+F[G*3+1];break}}}}}}}}else if(T.kern&&!T.cff){const N=z();if(N!==-1){const ne=T.kern.glyph1.indexOf(E[N]);if(ne!==-1){const se=T.kern.rval[ne].glyph2.indexOf(_);se!==-1&&(F[N*3+2]+=T.kern.rval[ne].vals[se])}}}}return F;function z(_){for(let K=I-1;K>=0;K--)if(E[K]!==-1&&(!_||_(E[K])))return K;return-1}function D(_){return M(T,_)===1}function O(_,K){for(let N=0;N<3;N++)F[K*3+N]+=_[N]||0}}function M(T,E){const F=T.GDEF&&T.GDEF.glyphClassDef;return F?l.U._getGlyphClass(E,F):0}function b(...T){for(let E=0;E<T.length;E++)if(typeof T[E]=="number")return T[E]}function C(T){const E=Object.create(null),F=T["OS/2"],I=T.hhea,z=T.head.unitsPerEm,D=b(F&&F.sTypoAscender,I&&I.ascender,z),O={unitsPerEm:z,ascender:D,descender:b(F&&F.sTypoDescender,I&&I.descender,0),capHeight:b(F&&F.sCapHeight,D),xHeight:b(F&&F.sxHeight,D),lineGap:b(F&&F.sTypoLineGap,I&&I.lineGap),supportsCodePoint(_){return l.U.codeToGlyph(T,_)>0},forEachGlyph(_,K,N,ne){let se=0;const Z=1/O.unitsPerEm*K,P=B(T,_);let w=0;const G=x(T,P);return P.forEach((L,J)=>{if(L!==-1){let k=E[L];if(!k){const{cmds:W,crds:V}=l.U.glyphToPath(T,L);let q="",fe=0;for(let Te=0,me=W.length;Te<me;Te++){const Ee=n[W[Te]];q+=W[Te];for(let ye=1;ye<=Ee;ye++)q+=(ye>1?",":"")+V[fe++]}let de,ee,re,Ie;if(V.length){de=ee=1/0,re=Ie=-1/0;for(let Te=0,me=V.length;Te<me;Te+=2){let Ee=V[Te],ye=V[Te+1];Ee<de&&(de=Ee),ye<ee&&(ee=ye),Ee>re&&(re=Ee),ye>Ie&&(Ie=ye)}}else de=re=ee=Ie=0;k=E[L]={index:L,advanceWidth:T.hmtx.aWidth[L],xMin:de,yMin:ee,xMax:re,yMax:Ie,path:q}}ne.call(null,k,se+G[J*3]*Z,G[J*3+1]*Z,w),se+=G[J*3+2]*Z,N&&(se+=N*K)}w+=_.codePointAt(w)>65535?2:1}),se}};return O}return function(E){const F=new Uint8Array(E,0,4),I=l._bin.readASCII(F,0,4);if(I==="wOFF")E=e(E);else if(I==="wOF2")throw new Error("woff2 fonts not supported");return C(l.parse(E)[0])}}const $l=Ir({name:"Typr Font Parser",dependencies:[Vl,Zl,ql],init(l,e,n){const a=l(),r=e();return n(a,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function eu(){return function(l){var e=function(){this.buckets=new Map};e.prototype.add=function(x){var M=x>>5;this.buckets.set(M,(this.buckets.get(M)||0)|1<<(31&x))},e.prototype.has=function(x){var M=this.buckets.get(x>>5);return M!==void 0&&(M&1<<(31&x))!=0},e.prototype.serialize=function(){var x=[];return this.buckets.forEach(function(M,b){x.push((+b).toString(36)+":"+M.toString(36))}),x.join(",")},e.prototype.deserialize=function(x){var M=this;this.buckets.clear(),x.split(",").forEach(function(b){var C=b.split(":");M.buckets.set(parseInt(C[0],36),parseInt(C[1],36))})};var n=Math.pow(2,8),a=n-1,r=~a;function t(x){var M=function(C){return C&r}(x).toString(16),b=function(C){return(C&r)+n-1}(x).toString(16);return"codepoint-index/plane"+(x>>16)+"/"+M+"-"+b+".json"}function o(x,M){var b=x&a,C=M.codePointAt(b/6|0);return((C=(C||48)-48)&1<<b%6)!=0}function s(x,M){var b;(b=x,b.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(C){return C.split("-").map(function(T){return parseInt(T.trim(),16)})})).forEach(function(C){var T=C[0],E=C[1];E===void 0&&(E=T),M(T,E)})}function i(x,M){s(x,function(b,C){for(var T=b;T<=C;T++)M(T)})}var c={},u={},f=new WeakMap,h="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function d(x){var M=f.get(x);return M||(M=new e,i(x.ranges,function(b){return M.add(b)}),f.set(x,M)),M}var m,g=new Map;function A(x,M,b){return x[M]?M:x[b]?b:function(C){for(var T in C)return T}(x)}function y(x,M){var b=M;if(!x.includes(b)){b=1/0;for(var C=0;C<x.length;C++)Math.abs(x[C]-M)<Math.abs(b-M)&&(b=x[C])}return b}function B(x){return m||(m=new Set,i("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(M){m.add(M)})),m.has(x)}return l.CodePointSet=e,l.clearCache=function(){c={},u={}},l.getFontsForString=function(x,M){M===void 0&&(M={});var b,C=M.lang;C===void 0&&(C=new RegExp("\\p{Script=Hangul}","u").test(b=x)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(b)?"ja":"en");var T=M.category;T===void 0&&(T="sans-serif");var E=M.style;E===void 0&&(E="normal");var F=M.weight;F===void 0&&(F=400);var I=(M.dataUrl||h).replace(/\/$/g,""),z=new Map,D=new Uint8Array(x.length),O={},_={},K=new Array(x.length),N=new Map,ne=!1;function se(w){var G=g.get(w);return G||(G=fetch(I+"/"+w).then(function(L){if(!L.ok)throw new Error(L.statusText);return L.json().then(function(J){if(!Array.isArray(J)||J[0]!==1)throw new Error("Incorrect schema version; need 1, got "+J[0]);return J[1]})}).catch(function(L){if(I!==h)return ne||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+I+'", trying default CDN. '+L.message),ne=!0),I=h,g.delete(w),se(w);throw L}),g.set(w,G)),G}for(var Z=function(w){var G=x.codePointAt(w),L=t(G);K[w]=L,c[L]||N.has(L)||N.set(L,se(L).then(function(J){c[L]=J})),G>65535&&(w++,P=w)},P=0;P<x.length;P++)Z(P);return Promise.all(N.values()).then(function(){N.clear();for(var w=function(L){var J=x.codePointAt(L),k=null,W=c[K[L]],V=void 0;for(var q in W){var fe=_[q];if(fe===void 0&&(fe=_[q]=new RegExp(q).test(C||"en")),fe){for(var de in V=q,W[q])if(o(J,W[q][de])){k=de;break}break}}if(!k){e:for(var ee in W)if(ee!==V){for(var re in W[ee])if(o(J,W[ee][re])){k=re;break e}}}k||(console.debug("No font coverage for U+"+J.toString(16)),k="latin"),K[L]=k,u[k]||N.has(k)||N.set(k,se("font-meta/"+k+".json").then(function(Ie){u[k]=Ie})),J>65535&&(L++,G=L)},G=0;G<x.length;G++)w(G);return Promise.all(N.values())}).then(function(){for(var w,G=null,L=0;L<x.length;L++){var J=x.codePointAt(L);if(G&&(B(J)||d(G).has(J)))D[L]=D[L-1];else{G=u[K[L]];var k=O[G.id];if(!k){var W=G.typeforms,V=A(W,T,"sans-serif"),q=A(W[V],E,"normal"),fe=y((w=W[V])===null||w===void 0?void 0:w[q],F);k=O[G.id]=I+"/font-files/"+G.id+"/"+V+"."+q+"."+fe+".woff"}var de=z.get(k);de==null&&(de=z.size,z.set(k,de)),D[L]=de}J>65535&&(L++,D[L]=D[L-1])}return{fontUrls:Array.from(z.keys()),chars:D}})},Object.defineProperty(l,"__esModule",{value:!0}),l}({})}function tu(l,e){const n=Object.create(null),a=Object.create(null);function r(o,s){const i=c=>{console.error(`Failure loading font ${o}`,c)};try{const c=new XMLHttpRequest;c.open("get",o,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>=400)i(new Error(c.statusText));else if(c.status>0)try{const u=l(c.response);u.src=o,s(u)}catch(u){i(u)}},c.onerror=i,c.send()}catch(c){i(c)}}function t(o,s){let i=n[o];i?s(i):a[o]?a[o].push(s):(a[o]=[s],r(o,c=>{c.src=o,n[o]=c,a[o].forEach(u=>u(c)),delete a[o]}))}return function(o,s,{lang:i,fonts:c=[],style:u="normal",weight:f="normal",unicodeFontsURL:h}={}){const d=new Uint8Array(o.length),m=[];o.length||B();const g=new Map,A=[];if(u!=="italic"&&(u="normal"),typeof f!="number"&&(f=f==="bold"?700:400),c&&!Array.isArray(c)&&(c=[c]),c=c.slice().filter(M=>!M.lang||M.lang.test(i)).reverse(),c.length){let T=0;(function E(F=0){for(let I=F,z=o.length;I<z;I++){const D=o.codePointAt(I);if(T===1&&m[d[I-1]].supportsCodePoint(D)||I>0&&/\s/.test(o[I]))d[I]=d[I-1],T===2&&(A[A.length-1][1]=I);else for(let O=d[I],_=c.length;O<=_;O++)if(O===_){const K=T===2?A[A.length-1]:A[A.length]=[I,I];K[1]=I,T=2}else{d[I]=O;const{src:K,unicodeRange:N}=c[O];if(!N||x(D,N)){const ne=n[K];if(!ne){t(K,()=>{E(I)});return}if(ne.supportsCodePoint(D)){let se=g.get(ne);typeof se!="number"&&(se=m.length,m.push(ne),g.set(ne,se)),d[I]=se,T=1;break}}}D>65535&&I+1<z&&(d[I+1]=d[I],I++,T===2&&(A[A.length-1][1]=I))}y()})()}else A.push([0,o.length-1]),y();function y(){if(A.length){const M=A.map(b=>o.substring(b[0],b[1]+1)).join(`
`);e.getFontsForString(M,{lang:i||void 0,style:u,weight:f,dataUrl:h}).then(({fontUrls:b,chars:C})=>{const T=m.length;let E=0;A.forEach(I=>{for(let z=0,D=I[1]-I[0];z<=D;z++)d[I[0]+z]=C[E++]+T;E++});let F=0;b.forEach((I,z)=>{t(I,D=>{m[z+T]=D,++F===b.length&&B()})})})}else B()}function B(){s({chars:d,fonts:m})}function x(M,b){for(let C=0;C<b.length;C++){const[T,E=T]=b[C];if(T<=M&&M<=E)return!0}return!1}}}const ru=Ir({name:"FontResolver",dependencies:[tu,$l,eu],init(l,e,n){return l(e,n())}});function nu(l,e){const a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",t=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:m,lang:g,fonts:A,style:y,weight:B,preResolvedFonts:x,unicodeFontsURL:M},b){const C=({chars:T,fonts:E})=>{let F,I;const z=[];for(let D=0;D<T.length;D++)T[D]!==I?(I=T[D],z.push(F={start:D,end:D,fontObj:E[T[D]]})):F.end=D;b(z)};x?C(x):l(m,C,{lang:g,fonts:A,style:y,weight:B,unicodeFontsURL:M})}function s({text:m="",font:g,lang:A,sdfGlyphSize:y=64,fontSize:B=400,fontWeight:x=1,fontStyle:M="normal",letterSpacing:b=0,lineHeight:C="normal",maxWidth:T=1/0,direction:E,textAlign:F="left",textIndent:I=0,whiteSpace:z="normal",overflowWrap:D="normal",anchorX:O=0,anchorY:_=0,metricsOnly:K=!1,unicodeFontsURL:N,preResolvedFonts:ne=null,includeCaretPositions:se=!1,chunkedBoundsSize:Z=8192,colorRanges:P=null},w){const G=f(),L={fontLoad:0,typesetting:0};m.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),m=m.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),B=+B,b=+b,T=+T,C=C||"normal",I=+I,o({text:m,lang:A,style:M,weight:x,fonts:typeof g=="string"?[{src:g}]:g,unicodeFontsURL:N,preResolvedFonts:ne},J=>{L.fontLoad=f()-G;const k=isFinite(T);let W=null,V=null,q=null,fe=null,de=null,ee=null,re=null,Ie=null,Te=0,me=0,Ee=z!=="nowrap";const ye=new Map,oe=f();let Be=I,Ce=0,te=new h;const Ue=[te];J.forEach(ve=>{const{fontObj:Me}=ve,{ascender:De,descender:ke,unitsPerEm:Ve,lineGap:it,capHeight:Pe,xHeight:Re}=Me;let we=ye.get(Me);if(!we){const Y=B/Ve,He=C==="normal"?(De-ke+it)*Y:C*B,pt=(He-(De-ke)*Y)/2,Ze=Math.min(He,(De-ke)*Y),Je=(De+ke)/2*Y+Ze/2;we={index:ye.size,src:Me.src,fontObj:Me,fontSizeMult:Y,unitsPerEm:Ve,ascender:De*Y,descender:ke*Y,capHeight:Pe*Y,xHeight:Re*Y,lineHeight:He,baseline:-pt-De*Y,caretTop:Je,caretBottom:Je-Ze},ye.set(Me,we)}const{fontSizeMult:R}=we,$=m.slice(ve.start,ve.end+1);let he,Fe;Me.forEachGlyph($,B,b,(Y,He,pt,Ze)=>{He+=Ce,Ze+=ve.start,he=He,Fe=Y;const Je=m.charAt(Ze),Qe=Y.advanceWidth*R,Xe=te.count;let Le;if("isEmpty"in Y||(Y.isWhitespace=!!Je&&new RegExp(r).test(Je),Y.canBreakAfter=!!Je&&t.test(Je),Y.isEmpty=Y.xMin===Y.xMax||Y.yMin===Y.yMax||a.test(Je)),!Y.isWhitespace&&!Y.isEmpty&&me++,Ee&&k&&!Y.isWhitespace&&He+Qe+Be>T&&Xe){if(te.glyphAt(Xe-1).glyphObj.canBreakAfter)Le=new h,Be=-He;else for(let lt=Xe;lt--;)if(lt===0&&D==="break-word"){Le=new h,Be=-He;break}else if(te.glyphAt(lt).glyphObj.canBreakAfter){Le=te.splitAt(lt+1);const ut=Le.glyphAt(0).x;Be-=ut;for(let ft=Le.count;ft--;)Le.glyphAt(ft).x-=ut;break}Le&&(te.isSoftWrapped=!0,te=Le,Ue.push(te),Te=T)}let Ye=te.glyphAt(te.count);Ye.glyphObj=Y,Ye.x=He+Be,Ye.y=pt,Ye.width=Qe,Ye.charIndex=Ze,Ye.fontData=we,Je===`
`&&(te=new h,Ue.push(te),Be=-(He+Qe+b*B)+I)}),Ce=he+Fe.advanceWidth*R+b*B});let ge=0;Ue.forEach(ve=>{let Me=!0;for(let De=ve.count;De--;){const ke=ve.glyphAt(De);Me&&!ke.glyphObj.isWhitespace&&(ve.width=ke.x+ke.width,ve.width>Te&&(Te=ve.width),Me=!1);let{lineHeight:Ve,capHeight:it,xHeight:Pe,baseline:Re}=ke.fontData;Ve>ve.lineHeight&&(ve.lineHeight=Ve);const we=Re-ve.baseline;we<0&&(ve.baseline+=we,ve.cap+=we,ve.ex+=we),ve.cap=Math.max(ve.cap,ve.baseline+it),ve.ex=Math.max(ve.ex,ve.baseline+Pe)}ve.baseline-=ge,ve.cap-=ge,ve.ex-=ge,ge+=ve.lineHeight});let be=0,pe=0;if(O&&(typeof O=="number"?be=-O:typeof O=="string"&&(be=-Te*(O==="left"?0:O==="center"?.5:O==="right"?1:c(O)))),_&&(typeof _=="number"?pe=-_:typeof _=="string"&&(pe=_==="top"?0:_==="top-baseline"?-Ue[0].baseline:_==="top-cap"?-Ue[0].cap:_==="top-ex"?-Ue[0].ex:_==="middle"?ge/2:_==="bottom"?ge:_==="bottom-baseline"?-Ue[Ue.length-1].baseline:c(_)*ge)),!K){const ve=e.getEmbeddingLevels(m,E);W=new Uint16Array(me),V=new Uint8Array(me),q=new Float32Array(me*2),fe={},re=[1/0,1/0,-1/0,-1/0],Ie=[],se&&(ee=new Float32Array(m.length*4)),P&&(de=new Uint8Array(me*3));let Me=0,De=-1,ke=-1,Ve,it;if(Ue.forEach((Pe,Re)=>{let{count:we,width:R}=Pe;if(we>0){let $=0;for(let Ze=we;Ze--&&Pe.glyphAt(Ze).glyphObj.isWhitespace;)$++;let he=0,Fe=0;if(F==="center")he=(Te-R)/2;else if(F==="right")he=Te-R;else if(F==="justify"&&Pe.isSoftWrapped){let Ze=0;for(let Je=we-$;Je--;)Pe.glyphAt(Je).glyphObj.isWhitespace&&Ze++;Fe=(Te-R)/Ze}if(Fe||he){let Ze=0;for(let Je=0;Je<we;Je++){let Qe=Pe.glyphAt(Je);const Xe=Qe.glyphObj;Qe.x+=he+Ze,Fe!==0&&Xe.isWhitespace&&Je<we-$&&(Ze+=Fe,Qe.width+=Fe)}}const Y=e.getReorderSegments(m,ve,Pe.glyphAt(0).charIndex,Pe.glyphAt(Pe.count-1).charIndex);for(let Ze=0;Ze<Y.length;Ze++){const[Je,Qe]=Y[Ze];let Xe=1/0,Le=-1/0;for(let Ye=0;Ye<we;Ye++)if(Pe.glyphAt(Ye).charIndex>=Je){let lt=Ye,ut=Ye;for(;ut<we;ut++){let ft=Pe.glyphAt(ut);if(ft.charIndex>Qe)break;ut<we-$&&(Xe=Math.min(Xe,ft.x),Le=Math.max(Le,ft.x+ft.width))}for(let ft=lt;ft<ut;ft++){const Dt=Pe.glyphAt(ft);Dt.x=Le-(Dt.x+Dt.width-Xe)}break}}let He;const pt=Ze=>He=Ze;for(let Ze=0;Ze<we;Ze++){const Je=Pe.glyphAt(Ze);He=Je.glyphObj;const Qe=He.index,Xe=ve.levels[Je.charIndex]&1;if(Xe){const Le=e.getMirroredCharacter(m[Je.charIndex]);Le&&Je.fontData.fontObj.forEachGlyph(Le,0,0,pt)}if(se){const{charIndex:Le,fontData:Ye}=Je,lt=Je.x+be,ut=Je.x+Je.width+be;ee[Le*4]=Xe?ut:lt,ee[Le*4+1]=Xe?lt:ut,ee[Le*4+2]=Pe.baseline+Ye.caretBottom+pe,ee[Le*4+3]=Pe.baseline+Ye.caretTop+pe;const ft=Le-De;ft>1&&u(ee,De,ft),De=Le}if(P){const{charIndex:Le}=Je;for(;Le>ke;)ke++,P.hasOwnProperty(ke)&&(it=P[ke])}if(!He.isWhitespace&&!He.isEmpty){const Le=Me++,{fontSizeMult:Ye,src:lt,index:ut}=Je.fontData,ft=fe[lt]||(fe[lt]={});ft[Qe]||(ft[Qe]={path:He.path,pathBounds:[He.xMin,He.yMin,He.xMax,He.yMax]});const Dt=Je.x+be,It=Je.y+Pe.baseline+pe;q[Le*2]=Dt,q[Le*2+1]=It;const Ht=Dt+He.xMin*Ye,Et=It+He.yMin*Ye,Rt=Dt+He.xMax*Ye,Ne=It+He.yMax*Ye;Ht<re[0]&&(re[0]=Ht),Et<re[1]&&(re[1]=Et),Rt>re[2]&&(re[2]=Rt),Ne>re[3]&&(re[3]=Ne),Le%Z===0&&(Ve={start:Le,end:Le,rect:[1/0,1/0,-1/0,-1/0]},Ie.push(Ve)),Ve.end++;const At=Ve.rect;if(Ht<At[0]&&(At[0]=Ht),Et<At[1]&&(At[1]=Et),Rt>At[2]&&(At[2]=Rt),Ne>At[3]&&(At[3]=Ne),W[Le]=Qe,V[Le]=ut,P){const Yt=Le*3;de[Yt]=it>>16&255,de[Yt+1]=it>>8&255,de[Yt+2]=it&255}}}}}),ee){const Pe=m.length-De;Pe>1&&u(ee,De,Pe)}}const ze=[];ye.forEach(({index:ve,src:Me,unitsPerEm:De,ascender:ke,descender:Ve,lineHeight:it,capHeight:Pe,xHeight:Re})=>{ze[ve]={src:Me,unitsPerEm:De,ascender:ke,descender:Ve,lineHeight:it,capHeight:Pe,xHeight:Re}}),L.typesetting=f()-oe,w({glyphIds:W,glyphFontIndices:V,glyphPositions:q,glyphData:fe,fontData:ze,caretPositions:ee,glyphColors:de,chunkedBounds:Ie,fontSize:B,topBaseline:pe+Ue[0].baseline,blockBounds:[be,pe-ge,be+Te,pe],visibleBounds:re,timings:L})})}function i(m,g){s({...m,metricsOnly:!0},A=>{const[y,B,x,M]=A.blockBounds;g({width:x-y,height:M-B})})}function c(m){let g=m.match(/^([\d.]+)%$/),A=g?parseFloat(g[1]):NaN;return isNaN(A)?0:A/100}function u(m,g,A){const y=m[g*4],B=m[g*4+1],x=m[g*4+2],M=m[g*4+3],b=(B-y)/A;for(let C=0;C<A;C++){const T=(g+C)*4;m[T]=y+b*C,m[T+1]=y+b*(C+1),m[T+2]=x,m[T+3]=M}}function f(){return(self.performance||Date).now()}function h(){this.data=[]}const d=["glyphObj","x","y","width","charIndex","fontData"];return h.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/d.length)},glyphAt(m){let g=h.flyweight;return g.data=this.data,g.index=m,g},splitAt(m){let g=new h;return g.data=this.data.splice(m*d.length),g}},h.flyweight=d.reduce((m,g,A,y)=>(Object.defineProperty(m,g,{get(){return this.data[this.index*d.length+A]},set(B){this.data[this.index*d.length+A]=B}}),m),{data:null,index:0}),{typeset:s,measure:i}}const mr=()=>(self.performance||Date).now(),En=ei();let co;function au(l,e,n,a,r,t,o,s,i,c,u=!0){return u?iu(l,e,n,a,r,t,o,s,i,c).then(null,f=>(co||(console.warn("WebGL SDF generation failed, falling back to JS",f),co=!0),uo(l,e,n,a,r,t,o,s,i,c))):uo(l,e,n,a,r,t,o,s,i,c)}const gn=[],ou=5;let ca=0;function ri(){const l=mr();for(;gn.length&&mr()-l<ou;)gn.shift()();ca=gn.length?setTimeout(ri,0):0}const iu=(...l)=>new Promise((e,n)=>{gn.push(()=>{const a=mr();try{En.webgl.generateIntoCanvas(...l),e({timing:mr()-a})}catch(r){n(r)}}),ca||(ca=setTimeout(ri,0))}),su=4,cu=2e3,lo={};let lu=0;function uo(l,e,n,a,r,t,o,s,i,c){const u="TroikaTextSDFGenerator_JS_"+lu++%su;let f=lo[u];return f||(f=lo[u]={workerModule:Ir({name:u,workerId:u,dependencies:[ei,mr],init(h,d){const m=h().javascript.generate;return function(...g){const A=d();return{textureData:m(...g),timing:d()-A}}},getTransferables(h){return[h.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(l,e,n,a,r,t).then(({textureData:h,timing:d})=>{const m=mr(),g=new Uint8Array(h.length*4);for(let A=0;A<h.length;A++)g[A*4+c]=h[A];return En.webglUtils.renderImageData(o,g,s,i,l,e,1<<3-c),d+=mr()-m,--f.requests===0&&(f.idleTimer=setTimeout(()=>{Hl(u)},cu)),{timing:d}})}function uu(l){l._warm||(En.webgl.isSupported(l),l._warm=!0)}const fu=En.webglUtils.resizeWebGLCanvasWithoutClearing,Mr={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},hu=new wt;function br(){return(self.performance||Date).now()}const fo=Object.create(null);function ni(l,e){l=mu({},l);const n=br(),{defaultFontURL:a}=Mr,r=[];if(a&&r.push({label:"default",src:ho(a)}),l.font&&r.push({label:"user",src:ho(l.font)}),l.font=r,l.text=""+l.text,l.sdfGlyphSize=l.sdfGlyphSize||Mr.sdfGlyphSize,l.unicodeFontsURL=l.unicodeFontsURL||Mr.unicodeFontsURL,l.colorRanges!=null){let d={};for(let m in l.colorRanges)if(l.colorRanges.hasOwnProperty(m)){let g=l.colorRanges[m];typeof g!="number"&&(g=hu.set(g).getHex()),d[m]=g}l.colorRanges=d}Object.freeze(l);const{textureWidth:t,sdfExponent:o}=Mr,{sdfGlyphSize:s}=l,i=t/s*4;let c=fo[s];if(!c){const d=document.createElement("canvas");d.width=t,d.height=s*256/i,c=fo[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:d,sdfTexture:new Wt(d,void 0,void 0,void 0,yt,yt),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,du(c)}const{sdfTexture:u,sdfCanvas:f}=c;ii(l).then(d=>{const{glyphIds:m,glyphFontIndices:g,fontData:A,glyphPositions:y,fontSize:B,timings:x}=d,M=[],b=new Float32Array(m.length*4);let C=0,T=0;const E=br(),F=A.map(_=>{let K=c.glyphsByFont.get(_.src);return K||c.glyphsByFont.set(_.src,K=new Map),K});m.forEach((_,K)=>{const N=g[K],{src:ne,unitsPerEm:se}=A[N];let Z=F[N].get(_);if(!Z){const{path:J,pathBounds:k}=d.glyphData[ne][_],W=Math.max(k[2]-k[0],k[3]-k[1])/s*(Mr.sdfMargin*s+.5),V=c.glyphCount++,q=[k[0]-W,k[1]-W,k[2]+W,k[3]+W];F[N].set(_,Z={path:J,atlasIndex:V,sdfViewBox:q}),M.push(Z)}const{sdfViewBox:P}=Z,w=y[T++],G=y[T++],L=B/se;b[C++]=w+P[0]*L,b[C++]=G+P[1]*L,b[C++]=w+P[2]*L,b[C++]=G+P[3]*L,m[K]=Z.atlasIndex}),x.quads=(x.quads||0)+(br()-E);const I=br();x.sdf={};const z=f.height,D=Math.ceil(c.glyphCount/i),O=Math.pow(2,Math.ceil(Math.log2(D*s)));O>z&&(console.info(`Increasing SDF texture size ${z}->${O}`),fu(f,t,O),u.dispose()),Promise.all(M.map(_=>ai(_,c,l.gpuAccelerateSDF).then(({timing:K})=>{x.sdf[_.atlasIndex]=K}))).then(()=>{M.length&&!c.contextLost&&(oi(c),u.needsUpdate=!0),x.sdfTotal=br()-I,x.total=br()-n,e(Object.freeze({parameters:l,sdfTexture:u,sdfGlyphSize:s,sdfExponent:o,glyphBounds:b,glyphAtlasIndices:m,glyphColors:d.glyphColors,caretPositions:d.caretPositions,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))})}),Promise.resolve().then(()=>{c.contextLost||uu(f)})}function ai({path:l,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:a,sdfCanvas:r,contextLost:t},o){if(t)return Promise.resolve({timing:-1});const{textureWidth:s,sdfExponent:i}=Mr,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(e/4),f=u%(s/a)*a,h=Math.floor(u/(s/a))*a,d=e%4;return au(a,a,l,n,c,i,r,f,h,d,o)}function du(l){const e=l.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),l.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),l.contextLost=!1;const a=[];l.glyphsByFont.forEach(r=>{r.forEach(t=>{a.push(ai(t,l,!0))})}),Promise.all(a).then(()=>{oi(l),l.sdfTexture.needsUpdate=!0})})}function pu({font:l,characters:e,sdfGlyphSize:n},a){let r=Array.isArray(e)?e.join(`
`):""+e;ni({font:l,sdfGlyphSize:n,text:r},a)}function mu(l,e){for(let n in e)e.hasOwnProperty(n)&&(l[n]=e[n]);return l}let fn;function ho(l){return fn||(fn=typeof document>"u"?{}:document.createElement("a")),fn.href=l,fn.href}function oi(l){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=l,{width:a,height:r}=e,t=l.sdfCanvas.getContext("webgl");let o=n.image.data;(!o||o.length!==a*r*4)&&(o=new Uint8Array(a*r*4),n.image={width:a,height:r,data:o},n.flipY=!1,n.isDataTexture=!0),t.readPixels(0,0,a,r,t.RGBA,t.UNSIGNED_BYTE,o)}}const gu=Ir({name:"Typesetter",dependencies:[nu,ru,Jl],init(l,e,n){return l(e,n())}}),ii=Ir({name:"Typesetter",dependencies:[gu],init(l){return function(e){return new Promise(n=>{l.typeset(e,n)})}},getTransferables(l){const e=[];for(let n in l)l[n]&&l[n].buffer&&e.push(l[n].buffer);return e}});ii.onMainThread;const po={};function Au(l){let e=po[l];return e||(e=po[l]=new Dr(1,1,l,l).translate(.5,.5,0)),e}const vu="aTroikaGlyphBounds",mo="aTroikaGlyphIndex",Bu="aTroikaGlyphColor";class Cu extends fs{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new ha,this.boundingBox=new Zr}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=Au(e);["position","normal","uv"].forEach(a=>{this.attributes[a]=n.attributes[a].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,a,r,t){this.updateAttributeData(vu,e,4),this.updateAttributeData(mo,n,1),this.updateAttributeData(Bu,t,3),this._blockBounds=a,this._chunkedBounds=r,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:a}=this;if(n){const{PI:r,floor:t,min:o,max:s,sin:i,cos:c}=Math,u=r/2,f=r*2,h=Math.abs(n),d=e[0]/h,m=e[2]/h,g=t((d+u)/f)!==t((m+u)/f)?-h:o(i(d)*h,i(m)*h),A=t((d-u)/f)!==t((m-u)/f)?h:s(i(d)*h,i(m)*h),y=t((d+r)/f)!==t((m+r)/f)?h*2:s(h-c(d)*h,h-c(m)*h);a.min.set(g,e[1],n<0?-y:0),a.max.set(A,e[3],n<0?0:y)}else a.min.set(e[0],e[1],0),a.max.set(e[2],e[3],0);a.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(mo).count,a=this._chunkedBounds;if(a)for(let r=a.length;r--;){n=a[r].end;let t=a[r].rect;if(t[1]<e.w&&t[3]>e.y&&t[0]<e.z&&t[2]>e.x)break}this.instanceCount=n}updateAttributeData(e,n,a){const r=this.getAttribute(e);n?r&&r.array.length===n.length?(r.array.set(n),r.needsUpdate=!0):(this.setAttribute(e,new xo(n,a)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(e)}}const yu=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,bu=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Eu=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Mu=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Tu(l){const e=sa(l,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Bt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Ja(0,0,0,0)},uTroikaClipRect:{value:new Ja(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Bt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new wt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new hs},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:yu,vertexTransform:bu,fragmentDefs:Eu,fragmentColorTransform:Mu,customRewriter({vertexShader:n,fragmentShader:a}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(a)&&(a=a.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(n)||(n=n.replace(ti,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:a}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const ga=new ur({color:16777215,side:bn,transparent:!0}),go=8421504,Ao=new ir,hn=new Ge,zn=new Ge,Nr=[],Fu=new Ge,Xn="+x+y";function vo(l){return Array.isArray(l)?l[0]:l}let si=()=>{const l=new sr(new Dr(1,1),ga);return si=()=>l,l},ci=()=>{const l=new sr(new Dr(1,1,32,1),ga);return ci=()=>l,l};const xu={type:"syncstart"},wu={type:"synccomplete"},li=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Su=li.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let ui=class extends sr{constructor(){const e=new Cu;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=go,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Xn,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(xu),ni({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const a=this._queuedSyncs;a&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{a.forEach(r=>r&&r())})),this.dispatchEvent(wu),e&&e()})))}onBeforeRender(e,n,a,r,t,o){this.sync(),t.isTroikaTextMaterial&&this._prepareForRender(t)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return Tu(e)}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=ga.clone());if((!e||!e.isDerivedFrom(n))&&(e=this._derivedMaterial=this.createDerivedMaterial(n),n.addEventListener("dispose",function a(){n.removeEventListener("dispose",a),e.dispose()})),this.hasOutline()){let a=e._outlineMtl;return a||(a=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),a.isTextOutlineMaterial=!0,a.depthWrite=!1,a.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),a.dispose()})),[a,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return vo(this.material).getDepthMaterial()}get customDistanceMaterial(){return vo(this.material).getDistanceMaterial()}_prepareForRender(e){const n=e.isTextOutlineMaterial,a=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:s,blockBounds:i}=r;a.uTroikaSDFTexture.value=s,a.uTroikaSDFTextureSize.value.set(s.image.width,s.image.height),a.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,a.uTroikaSDFExponent.value=r.sdfExponent,a.uTroikaTotalBounds.value.fromArray(i),a.uTroikaUseGlyphColors.value=!n&&!!r.glyphColors;let c=0,u=0,f=0,h,d,m,g=0,A=0;if(n){let{outlineWidth:B,outlineOffsetX:x,outlineOffsetY:M,outlineBlur:b,outlineOpacity:C}=this;c=this._parsePercent(B)||0,u=Math.max(0,this._parsePercent(b)||0),h=C,g=this._parsePercent(x)||0,A=this._parsePercent(M)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(m=this.strokeColor,a.uTroikaStrokeColor.value.set(m??go),d=this.strokeOpacity,d==null&&(d=1)),h=this.fillOpacity;a.uTroikaEdgeOffset.value=c,a.uTroikaPositionOffset.value.set(g,A),a.uTroikaBlurRadius.value=u,a.uTroikaStrokeWidth.value=f,a.uTroikaStrokeOpacity.value=d,a.uTroikaFillOpacity.value=h??1,a.uTroikaCurveRadius.value=this.curveRadius||0;let y=this.clipRect;if(y&&Array.isArray(y)&&y.length===4)a.uTroikaClipRect.value.fromArray(y);else{const B=(this.fontSize||.1)*100;a.uTroikaClipRect.value.set(i[0]-B,i[1]-B,i[2]+B,i[3]+B)}this.geometry.applyClipRect(a.uTroikaClipRect.value)}a.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const t=n?this.outlineColor||0:this.color;if(t==null)delete e.color;else{const s=e.hasOwnProperty("color")?e.color:e.color=new wt;(t!==s._input||typeof t=="object")&&s.set(s._input=t)}let o=this.orientation||Xn;if(o!==e._orientation){let s=a.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let i=o!==Xn&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(i){let[,c,u,f,h]=i;hn.set(0,0,0)[u]=c==="-"?1:-1,zn.set(0,0,0)[h]=f==="-"?-1:1,Ao.lookAt(Fu,hn.cross(zn),zn),s.setFromMatrix4(Ao)}else s.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),a=n?parseFloat(n[1]):NaN;e=(isNaN(a)?0:a/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new Bt){n.copy(e);const a=this.curveRadius;return a&&(n.x=Math.atan2(e.x,Math.abs(a)-Math.abs(e.z))*Math.abs(a)),n}worldPositionToTextCoords(e,n=new Bt){return hn.copy(e),this.localPositionToTextCoords(this.worldToLocal(hn),n)}raycast(e,n){const{textRenderInfo:a,curveRadius:r}=this;if(a){const t=a.blockBounds,o=r?ci():si(),s=o.geometry,{position:i,uv:c}=s.attributes;for(let u=0;u<c.count;u++){let f=t[0]+c.getX(u)*(t[2]-t[0]);const h=t[1]+c.getY(u)*(t[3]-t[1]);let d=0;r&&(d=r-Math.cos(f/r)*r,f=Math.sin(f/r)*r),i.setXYZ(u,f,h,d)}s.boundingSphere=this.geometry.boundingSphere,s.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Nr.length=0,o.raycast(e,Nr);for(let u=0;u<Nr.length;u++)Nr[u].object=this,n.push(Nr[u])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,Su.forEach(a=>{this[a]=e[a]}),this}clone(){return new this.constructor().copy(this)}};li.forEach(l=>{const e="_private_"+l;Object.defineProperty(ui.prototype,l,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});new Zr;new wt;const Du=U.forwardRef(({sdfGlyphSize:l=64,anchorX:e="center",anchorY:n="middle",font:a,fontSize:r=1,children:t,characters:o,onSync:s,...i},c)=>{const u=ot(({invalidate:m})=>m),[f]=U.useState(()=>new ui),[h,d]=U.useMemo(()=>{const m=[];let g="";return U.Children.forEach(t,A=>{typeof A=="string"||typeof A=="number"?g+=A:m.push(A)}),[m,g]},[t]);return ds(()=>new Promise(m=>pu({font:a,characters:o},m)),["troika-text",a,o]),U.useLayoutEffect(()=>void f.sync(()=>{u(),s&&s(f)})),U.useEffect(()=>()=>f.dispose(),[f]),U.createElement("primitive",Pt({object:f,ref:c,font:a,text:d,anchorX:e,anchorY:n,fontSize:r,sdfGlyphSize:l},i),h)});function fi(l,e,n,a){const r=class extends Sr{constructor(o={}){const s=Object.entries(l);super({uniforms:s.reduce((i,[c,u])=>{const f=Go.clone({[c]:{value:u}});return{...i,...f}},{}),vertexShader:e,fragmentShader:n}),this.key="",s.forEach(([i])=>Object.defineProperty(this,i,{get:()=>this.uniforms[i].value,set:c=>this.uniforms[i].value=c})),Object.assign(this,o)}};return r.key=Wr.generateUUID(),r}const Iu=()=>parseInt(ua.replace(/\D+/g,"")),hi=Iu();let dn=null,di="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function pi(l=!0,e=!0,n){return a=>{n&&n(a),l&&(dn||(dn=new Gl),dn.setDecoderPath(typeof l=="string"?l:di),a.setDRACOLoader(dn)),e&&a.setMeshoptDecoder(typeof Kn=="function"?Kn():Kn)}}const en=(l,e,n,a)=>gr(ma,l,pi(e,n,a));en.preload=(l,e,n,a)=>gr.preload(ma,l,pi(e,n,a));en.clear=l=>gr.clear(ma,l);en.setDecoderPath=l=>{di=l};function Ru(l,e,n){const a=ot(h=>h.size),r=ot(h=>h.viewport),t=typeof l=="number"?l:a.width*r.dpr,o=a.height*r.dpr,s=(typeof l=="number"?n:l)||{},{samples:i=0,depth:c,...u}=s,f=U.useMemo(()=>{const h=new Ar(t,o,{minFilter:yt,magFilter:yt,type:xt,...u});return c&&(h.depthTexture=new ps(t,o,zt)),h.samples=i,h},[]);return U.useLayoutEffect(()=>{f.setSize(t,o),i&&(f.samples=i)},[i,f,t,o]),U.useEffect(()=>()=>f.dispose(),[]),f}const _u=l=>typeof l=="function",mi=U.forwardRef(({envMap:l,resolution:e=256,frames:n=1/0,makeDefault:a,children:r,...t},o)=>{const s=ot(({set:A})=>A),i=ot(({camera:A})=>A),c=ot(({size:A})=>A),u=U.useRef(null);U.useImperativeHandle(o,()=>u.current,[]);const f=U.useRef(null),h=Ru(e);U.useLayoutEffect(()=>{t.manual||(u.current.aspect=c.width/c.height)},[c,t]),U.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let d=0,m=null;const g=_u(r);return Xt(A=>{g&&(n===1/0||d<n)&&(f.current.visible=!1,A.gl.setRenderTarget(h),m=A.scene.background,l&&(A.scene.background=l),A.gl.render(A.scene,u.current),A.scene.background=m,A.gl.setRenderTarget(null),f.current.visible=!0,d++)}),U.useLayoutEffect(()=>{if(a){const A=i;return s(()=>({camera:u.current})),()=>s(()=>({camera:A}))}},[u,a,s]),U.createElement(U.Fragment,null,U.createElement("perspectiveCamera",Pt({ref:u},t),!g&&r),U.createElement("group",{ref:f},g&&r(h.texture)))}),gi=U.forwardRef(({makeDefault:l,camera:e,regress:n,domElement:a,enableDamping:r=!0,keyEvents:t=!1,onChange:o,onStart:s,onEnd:i,...c},u)=>{const f=ot(C=>C.invalidate),h=ot(C=>C.camera),d=ot(C=>C.gl),m=ot(C=>C.events),g=ot(C=>C.setEvents),A=ot(C=>C.set),y=ot(C=>C.get),B=ot(C=>C.performance),x=e||h,M=a||m.connected||d.domElement,b=U.useMemo(()=>new Qc(x),[x]);return Xt(()=>{b.enabled&&b.update()},-1),U.useEffect(()=>(t&&b.connect(t===!0?M:t),b.connect(M),()=>void b.dispose()),[t,M,n,b,f]),U.useEffect(()=>{const C=F=>{f(),n&&B.regress(),o&&o(F)},T=F=>{s&&s(F)},E=F=>{i&&i(F)};return b.addEventListener("change",C),b.addEventListener("start",T),b.addEventListener("end",E),()=>{b.removeEventListener("start",T),b.removeEventListener("end",E),b.removeEventListener("change",C)}},[o,s,i,b,f,g]),U.useEffect(()=>{if(l){const C=y().controls;return A({controls:b}),()=>A({controls:C})}},[l,b]),U.createElement("primitive",Pt({ref:u,object:b,enableDamping:r},c))}),Gu=U.forwardRef(function({children:e,disable:n,disableX:a,disableY:r,disableZ:t,left:o,right:s,top:i,bottom:c,front:u,back:f,onCentered:h,precise:d=!0,cacheKey:m=0,...g},A){const y=U.useRef(null),B=U.useRef(null),x=U.useRef(null);return U.useLayoutEffect(()=>{B.current.matrixWorld.identity();const M=new Zr().setFromObject(x.current,d),b=new Ge,C=new ha,T=M.max.x-M.min.x,E=M.max.y-M.min.y,F=M.max.z-M.min.z;M.getCenter(b),M.getBoundingSphere(C);const I=i?E/2:c?-E/2:0,z=o?-T/2:s?T/2:0,D=u?F/2:f?-F/2:0;B.current.position.set(n||a?0:-b.x+z,n||r?0:-b.y+I,n||t?0:-b.z+D),typeof h<"u"&&h({parent:y.current.parent,container:y.current,width:T,height:E,depth:F,boundingBox:M,boundingSphere:C,center:b,verticalAlignment:I,horizontalAlignment:z,depthAlignment:D})},[m,h,i,o,u,n,a,r,t,d,s,c,f]),U.useImperativeHandle(A,()=>y.current,[]),U.createElement("group",Pt({ref:y},g),U.createElement("group",{ref:B},U.createElement("group",{ref:x},e)))}),Uu=3e3,Lu=3001,Ou=fi({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");var Lt=function(l){return l[l.NONE=0]="NONE",l[l.START=1]="START",l[l.ACTIVE=2]="ACTIVE",l}(Lt||{});const Er=l=>l&&l.isOrthographicCamera,ku=l=>l&&l.isBox3,Pu=l=>1-Math.exp(-5*l)+.007*l,Ai=U.createContext(null);function Hu({children:l,maxDuration:e=1,margin:n=1.2,observe:a,fit:r,clip:t,interpolateFunc:o=Pu,onFit:s}){const i=U.useRef(null),{camera:c,size:u,invalidate:f}=ot(),h=ot(b=>b.controls),d=U.useRef(s);d.current=s;const m=U.useRef({camPos:new Ge,camRot:new pr,camZoom:1}),g=U.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),A=U.useRef(Lt.NONE),y=U.useRef(0),[B]=U.useState(()=>new Zr),x=U.useMemo(()=>{function b(){const C=B.getSize(new Ge),T=B.getCenter(new Ge),E=Math.max(C.x,C.y,C.z),F=Er(c)?E*4:E/(2*Math.atan(Math.PI*c.fov/360)),I=Er(c)?E*4:F/c.aspect,z=n*Math.max(F,I);return{box:B,size:C,center:T,distance:z}}return{getSize:b,refresh(C){if(ku(C))B.copy(C);else{const T=C||i.current;if(!T)return this;T.updateWorldMatrix(!0,!0),B.setFromObject(T)}if(B.isEmpty()){const T=c.position.length()||10;B.setFromCenterAndSize(new Ge,new Ge(T,T,T))}return m.current.camPos.copy(c.position),m.current.camRot.copy(c.quaternion),Er(c)&&(m.current.camZoom=c.zoom),g.current.camPos=void 0,g.current.camRot=void 0,g.current.camZoom=void 0,g.current.camUp=void 0,g.current.target=void 0,this},reset(){const{center:C,distance:T}=b(),E=c.position.clone().sub(C).normalize();g.current.camPos=C.clone().addScaledVector(E,T),g.current.target=C.clone();const F=new ir().lookAt(g.current.camPos,g.current.target,c.up);return g.current.camRot=new pr().setFromRotationMatrix(F),A.current=Lt.START,y.current=0,this},moveTo(C){return g.current.camPos=Array.isArray(C)?new Ge(...C):C.clone(),A.current=Lt.START,y.current=0,this},lookAt({target:C,up:T}){g.current.target=Array.isArray(C)?new Ge(...C):C.clone(),T?g.current.camUp=Array.isArray(T)?new Ge(...T):T.clone():g.current.camUp=c.up.clone();const E=new ir().lookAt(g.current.camPos||c.position,g.current.target,g.current.camUp);return g.current.camRot=new pr().setFromRotationMatrix(E),A.current=Lt.START,y.current=0,this},to({position:C,target:T}){return this.moveTo(C).lookAt({target:T})},fit(){if(!Er(c))return this.reset();let C=0,T=0;const E=[new Ge(B.min.x,B.min.y,B.min.z),new Ge(B.min.x,B.max.y,B.min.z),new Ge(B.min.x,B.min.y,B.max.z),new Ge(B.min.x,B.max.y,B.max.z),new Ge(B.max.x,B.max.y,B.max.z),new Ge(B.max.x,B.max.y,B.min.z),new Ge(B.max.x,B.min.y,B.max.z),new Ge(B.max.x,B.min.y,B.min.z)],F=g.current.camPos||c.position,I=g.current.target||(h==null?void 0:h.target),z=g.current.camUp||c.up,D=I?new ir().lookAt(F,I,z).setPosition(F).invert():c.matrixWorldInverse;for(const K of E)K.applyMatrix4(D),C=Math.max(C,Math.abs(K.y)),T=Math.max(T,Math.abs(K.x));C*=2,T*=2;const O=(c.top-c.bottom)/C,_=(c.right-c.left)/T;return g.current.camZoom=Math.min(O,_)/n,A.current=Lt.START,y.current=0,d.current&&d.current(this.getSize()),this},clip(){const{distance:C}=b();return c.near=C/100,c.far=C*100,c.updateProjectionMatrix(),h&&(h.maxDistance=C*10,h.update()),f(),this}}},[B,c,h,n,f]);U.useLayoutEffect(()=>{if(h){const b=()=>{if(h&&g.current.target&&A.current!==Lt.NONE){const C=new Ge().setFromMatrixColumn(c.matrix,2),T=m.current.camPos.distanceTo(h.target),E=(g.current.camPos||m.current.camPos).distanceTo(g.current.target),F=(1-y.current)*T+y.current*E;h.target.copy(c.position).addScaledVector(C,-F),h.update()}A.current=Lt.NONE};return h.addEventListener("start",b),()=>h.removeEventListener("start",b)}},[h]);const M=U.useRef(0);return U.useLayoutEffect(()=>{(a||M.current++===0)&&(x.refresh(),r&&x.reset().fit(),t&&x.clip())},[u,t,r,a,c,h]),Xt((b,C)=>{if(A.current===Lt.START)A.current=Lt.ACTIVE,f();else if(A.current===Lt.ACTIVE){if(y.current+=C/e,y.current>=1)g.current.camPos&&c.position.copy(g.current.camPos),g.current.camRot&&c.quaternion.copy(g.current.camRot),g.current.camUp&&c.up.copy(g.current.camUp),g.current.camZoom&&Er(c)&&(c.zoom=g.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix(),h&&g.current.target&&(h.target.copy(g.current.target),h.update()),A.current=Lt.NONE;else{const T=o(y.current);g.current.camPos&&c.position.lerpVectors(m.current.camPos,g.current.camPos,T),g.current.camRot&&c.quaternion.slerpQuaternions(m.current.camRot,g.current.camRot,T),g.current.camUp&&c.up.set(0,1,0).applyQuaternion(c.quaternion),g.current.camZoom&&Er(c)&&(c.zoom=(1-T)*m.current.camZoom+T*g.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix()}f()}}),U.createElement("group",{ref:i},U.createElement(Ai.Provider,{value:x},l))}function Nu(){return U.useContext(Ai)}const vi=(l,e,n)=>{let a;switch(l){case $n:a=new Uint8ClampedArray(e*n*4);break;case xt:a=new Uint16Array(e*n*4);break;case Cs:a=new Uint32Array(e*n*4);break;case Bs:a=new Int8Array(e*n*4);break;case vs:a=new Int16Array(e*n*4);break;case As:a=new Int32Array(e*n*4);break;case zt:a=new Float32Array(e*n*4);break;default:throw new Error("Unsupported data type")}return a};let pn;const Ju=(l,e,n,a)=>{if(pn!==void 0)return pn;const r=new Ar(1,1,a);e.setRenderTarget(r);const t=new sr(new Dr,new ur({color:16777215}));e.render(t,n),e.setRenderTarget(null);const o=vi(l,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),t.geometry.dispose(),t.material.dispose(),pn=o[0]!==0,pn};class Aa{constructor(e){var n,a,r,t,o,s,i,c,u,f,h,d,m,g,A,y;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(x){throw this._renderer.setRenderTarget(null),x}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const B={format:Yr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(t=e.renderTargetOptions)===null||t===void 0?void 0:t.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.magFilter:yt,minFilter:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:yt,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.wrapS)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS:qt,wrapT:((m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapT)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT:qt};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Aa.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Lo,this._camera=new dr,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Ju(this._type,this._renderer,this._camera,B)){let x;switch(this._type){case xt:x=this._renderer.extensions.has("EXT_color_buffer_float")?zt:void 0;break}x!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${zt}`),this._type=x):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new sr(new Dr,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ar(this.width,this.height,B),this._renderTarget.texture.mapping=((A=e.renderTargetOptions)===null||A===void 0?void 0:A.mapping)!==void 0?(y=e.renderTargetOptions)===null||y===void 0?void 0:y.mapping:An}static instantiateRenderer(){const e=new ms;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=vi(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const n=new gs(this.toArray(),this.width,this.height,Yr,this._type,(e==null?void 0:e.mapping)||An,(e==null?void 0:e.wrapS)||qt,(e==null?void 0:e.wrapT)||qt,(e==null?void 0:e.magFilter)||yt,(e==null?void 0:e.minFilter)||yt,(e==null?void 0:e.anisotropy)||1,qn);return n.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Sr&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof Wt&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof Wt&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const ju=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Ku=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Wu extends Sr{constructor({gamma:e,offsetHdr:n,offsetSdr:a,gainMapMin:r,gainMapMax:t,maxDisplayBoost:o,hdrCapacityMin:s,hdrCapacityMax:i,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:ju,fragmentShader:Ku,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new Ge(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new Ge().fromArray(n)},offsetSdr:{value:new Ge().fromArray(a)},gainMapMin:{value:new Ge().fromArray(r)},gainMapMax:{value:new Ge().fromArray(t)},weightFactor:{value:(Math.log2(o)-s)/(i-s)}},blending:Es,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=s,this._hdrCapacityMax=i,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const n=this.uniforms.gamma.value;n.x=1/e[0],n.y=1/e[1],n.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class Bi extends Error{}class Ci extends Error{}const Jr=(l,e,n)=>{var a;let r;const t=(a=l.attributes.getNamedItem(e))===null||a===void 0?void 0:a.nodeValue;if(t)r=t;else{const o=l.getElementsByTagName(e)[0];if(o){const s=o.getElementsByTagName("rdf:li");if(s.length===3)r=Array.from(s).map(i=>i.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`)}else{if(n)return n;throw new Error(`Can't find ${e} in gainmap metadata`)}}return r},zu=l=>{var e,n;let a;typeof TextDecoder<"u"?a=new TextDecoder().decode(l):a=l.toString();let r=a.indexOf("<x:xmpmeta");const t=new DOMParser;for(;r!==-1;){const o=a.indexOf("x:xmpmeta>",r);a.slice(r,o+10);const s=a.slice(r,o+10);try{const c=t.parseFromString(s,"text/xml").getElementsByTagName("rdf:Description")[0],u=Jr(c,"hdrgm:GainMapMin","0"),f=Jr(c,"hdrgm:GainMapMax"),h=Jr(c,"hdrgm:Gamma","1"),d=Jr(c,"hdrgm:OffsetSDR","0.015625"),m=Jr(c,"hdrgm:OffsetHDR","0.015625");let g=(e=c.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||e===void 0?void 0:e.nodeValue;g||(g="0");const A=(n=c.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||n===void 0?void 0:n.nodeValue;if(!A)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(u)?u.map(y=>parseFloat(y)):[parseFloat(u),parseFloat(u),parseFloat(u)],gainMapMax:Array.isArray(f)?f.map(y=>parseFloat(y)):[parseFloat(f),parseFloat(f),parseFloat(f)],gamma:Array.isArray(h)?h.map(y=>parseFloat(y)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetSdr:Array.isArray(d)?d.map(y=>parseFloat(y)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetHdr:Array.isArray(m)?m.map(y=>parseFloat(y)):[parseFloat(m),parseFloat(m),parseFloat(m)],hdrCapacityMin:parseFloat(g),hdrCapacityMax:parseFloat(A)}}catch{}r=a.indexOf("<x:xmpmeta",o)}};class Xu{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((n,a)=>{const r=this.options.debug,t=new DataView(e.buffer);if(t.getUint16(0)!==65496){a(new Error("Not a valid jpeg"));return}const o=t.byteLength;let s=2,i=0,c;for(;s<o;){if(++i>250){a(new Error(`Found no marker after ${i} loops `));return}if(t.getUint8(s)!==255){a(new Error(`Not a valid marker at offset 0x${s.toString(16)}, found: 0x${t.getUint8(s).toString(16)}`));return}if(c=t.getUint8(s+1),r&&console.log(`Marker: ${c.toString(16)}`),c===226){r&&console.log("Found APP2 marker (0xffe2)");const u=s+4;if(t.getUint32(u)===1297106432){const f=u+4;let h;if(t.getUint16(f)===18761)h=!1;else if(t.getUint16(f)===19789)h=!0;else{a(new Error("No valid endianness marker found in TIFF header"));return}if(t.getUint16(f+2,!h)!==42){a(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const d=t.getUint32(f+4,!h);if(d<8){a(new Error("Not valid TIFF data! (First offset less than 8)"));return}const m=f+d,g=t.getUint16(m,!h),A=m+2;let y=0;for(let b=A;b<A+12*g;b+=12)t.getUint16(b,!h)===45057&&(y=t.getUint32(b+8,!h));const x=m+2+g*12+4,M=[];for(let b=x;b<x+y*16;b+=16){const C={MPType:t.getUint32(b,!h),size:t.getUint32(b+4,!h),dataOffset:t.getUint32(b+8,!h),dependantImages:t.getUint32(b+12,!h),start:-1,end:-1,isFII:!1};C.dataOffset?(C.start=f+C.dataOffset,C.isFII=!1):(C.start=0,C.isFII=!0),C.end=C.start+C.size,M.push(C)}if(this.options.extractNonFII&&M.length){const b=new Blob([t]),C=[];for(const T of M){if(T.isFII&&!this.options.extractFII)continue;const E=b.slice(T.start,T.end+1,"image/jpeg");C.push(E)}n(C)}}}s+=2+t.getUint16(s+2)}})}}const Qu=async l=>{const e=zu(l);if(!e)throw new Ci("Gain map XMP metadata not found");const a=await new Xu({extractFII:!0,extractNonFII:!0}).extract(l);if(a.length!==2)throw new Bi("Gain map recovery image not found");return{sdr:new Uint8Array(await a[0].arrayBuffer()),gainMap:new Uint8Array(await a[1].arrayBuffer()),metadata:e}},Bo=l=>new Promise((e,n)=>{const a=document.createElement("img");a.onload=()=>{e(a)},a.onerror=r=>{n(r)},a.src=URL.createObjectURL(l)});class yi extends fa{constructor(e,n){super(n),e&&(this._renderer=e),this._internalLoadingManager=new ys}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new Wu({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Wt,sdr:new Wt});return new Aa({width:16,height:16,type:xt,colorSpace:qn,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,n,a,r){const t=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([a],{type:"image/jpeg"});let s,i,c=!1;if(typeof createImageBitmap>"u"){const h=await Promise.all([t?Bo(t):Promise.resolve(void 0),Bo(o)]);i=h[0],s=h[1],c=!0}else{const h=await Promise.all([t?createImageBitmap(t,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);i=h[0],s=h[1]}const u=new Wt(i||new ImageData(2,2),An,qt,qt,yt,ja,Yr,$n,1,qn);u.flipY=c,u.needsUpdate=!0;const f=new Wt(s,An,qt,qt,yt,ja,Yr,$n,1,bs);f.flipY=c,f.needsUpdate=!0,e.width=s.width,e.height=s.height,e.material.gainMap=u,e.material.sdr=f,e.material.gainMapMin=n.gainMapMin,e.material.gainMapMax=n.gainMapMax,e.material.offsetHdr=n.offsetHdr,e.material.offsetSdr=n.offsetSdr,e.material.gamma=n.gamma,e.material.hdrCapacityMin=n.hdrCapacityMin,e.material.hdrCapacityMax=n.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,n.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Yu extends yi{load([e,n,a],r,t,o){const s=this.prepareQuadRenderer();let i,c,u;const f=async()=>{if(i&&c&&u){try{await this.render(s,u,i,c)}catch(F){this.manager.itemError(e),this.manager.itemError(n),this.manager.itemError(a),typeof o=="function"&&o(F),s.disposeOnDemandRenderer();return}typeof r=="function"&&r(s),this.manager.itemEnd(e),this.manager.itemEnd(n),this.manager.itemEnd(a),s.disposeOnDemandRenderer()}};let h=!0,d=0,m=0,g=!0,A=0,y=0,B=!0,x=0,M=0;const b=()=>{if(typeof t=="function"){const F=d+A+x,I=m+y+M,z=h&&g&&B;t(new ProgressEvent("progress",{lengthComputable:z,loaded:I,total:F}))}};this.manager.itemStart(e),this.manager.itemStart(n),this.manager.itemStart(a);const C=new or(this._internalLoadingManager);C.setResponseType("arraybuffer"),C.setRequestHeader(this.requestHeader),C.setPath(this.path),C.setWithCredentials(this.withCredentials),C.load(e,async F=>{if(typeof F=="string")throw new Error("Invalid sdr buffer");i=F,await f()},F=>{h=F.lengthComputable,m=F.loaded,d=F.total,b()},F=>{this.manager.itemError(e),typeof o=="function"&&o(F)});const T=new or(this._internalLoadingManager);T.setResponseType("arraybuffer"),T.setRequestHeader(this.requestHeader),T.setPath(this.path),T.setWithCredentials(this.withCredentials),T.load(n,async F=>{if(typeof F=="string")throw new Error("Invalid gainmap buffer");c=F,await f()},F=>{g=F.lengthComputable,y=F.loaded,A=F.total,b()},F=>{this.manager.itemError(n),typeof o=="function"&&o(F)});const E=new or(this._internalLoadingManager);return E.setRequestHeader(this.requestHeader),E.setPath(this.path),E.setWithCredentials(this.withCredentials),E.load(a,async F=>{if(typeof F!="string")throw new Error("Invalid metadata string");u=JSON.parse(F),await f()},F=>{B=F.lengthComputable,M=F.loaded,x=F.total,b()},F=>{this.manager.itemError(a),typeof o=="function"&&o(F)}),s}}class Vu extends yi{load(e,n,a,r){const t=this.prepareQuadRenderer(),o=new or(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async s=>{if(typeof s=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const i=new Uint8Array(s);let c,u,f;try{const h=await Qu(i);c=h.sdr,u=h.gainMap,f=h.metadata}catch(h){if(h instanceof Ci||h instanceof Bi)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=i;else throw h}try{await this.render(t,f,c,u)}catch(h){this.manager.itemError(e),typeof r=="function"&&r(h),t.disposeOnDemandRenderer();return}typeof n=="function"&&n(t),this.manager.itemEnd(e),t.disposeOnDemandRenderer()},a,s=>{this.manager.itemError(e),typeof r=="function"&&r(s)}),t}}const Vr={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},bi="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",wr=l=>Array.isArray(l),va=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Mn({files:l=va,path:e="",preset:n=void 0,encoding:a=void 0,extensions:r}={}){let t=null,o=!1;n&&(Ba(n),l=Vr[n],e=bi),o=wr(l);const{extension:s,isCubemap:i}=Ca(l);if(t=ya(s),!t)throw new Error("useEnvironment: Unrecognized file extension: "+l);const c=ot(d=>d.gl);U.useLayoutEffect(()=>{if(s!=="webp"&&s!=="jpg"&&s!=="jpeg")return;function d(){gr.clear(t,o?[l]:l)}c.domElement.addEventListener("webglcontextlost",d,{once:!0})},[l,c.domElement]);const u=gr(t,o?[l]:l,d=>{(s==="webp"||s==="jpg"||s==="jpeg")&&d.setRenderer(c),d.setPath==null||d.setPath(e),r&&r(d)});let f=o?u[0]:u;if(s==="jpg"||s==="jpeg"||s==="webp"){var h;f=(h=f.renderTarget)==null?void 0:h.texture}return f.mapping=i?Ms:Ts,"colorSpace"in f?f.colorSpace=a??i?"srgb":"srgb-linear":f.encoding=a??i?Lu:Uu,f}const Zu={files:va,path:"",preset:void 0,extensions:void 0};Mn.preload=l=>{const e={...Zu,...l};let{files:n,path:a=""}=e;const{preset:r,extensions:t}=e;r&&(Ba(r),n=Vr[r],a=bi);const{extension:o}=Ca(n);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const s=ya(o);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);gr.preload(s,wr(n)?[n]:n,i=>{i.setPath==null||i.setPath(a),t&&t(i)})};const qu={files:va,preset:void 0};Mn.clear=l=>{const e={...qu,...l};let{files:n}=e;const{preset:a}=e;a&&(Ba(a),n=Vr[a]);const{extension:r}=Ca(n),t=ya(r);if(!t)throw new Error("useEnvironment: Unrecognized file extension: "+n);gr.clear(t,wr(n)?[n]:n)};function Ba(l){if(!(l in Vr))throw new Error("Preset must be one of: "+Object.keys(Vr).join(", "))}function Ca(l){var e;const n=wr(l)&&l.length===6,a=wr(l)&&l.length===3&&l.some(o=>o.endsWith("json")),r=wr(l)?l[0]:l;return{extension:n?"cube":a?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:n,isGainmap:a}}function ya(l){return l==="cube"?Fs:l==="hdr"?Rl:l==="exr"?_l:l==="jpg"||l==="jpeg"?Vu:l==="webp"?Yu:null}const $u=l=>l.current&&l.current.isScene,ef=l=>$u(l)?l.current:l;function ba(l,e,n,a,r={}){var t,o,s,i;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const c=ef(e||n),u=c.background,f=c.environment,h={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:(t=(o=c.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&t!==void 0?t:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:(s=(i=c.environmentRotation)==null||i.clone==null?void 0:i.clone())!==null&&s!==void 0?s:[0,0,0]};return l!=="only"&&(c.environment=a),l&&(c.background=a),Ka(c,r),()=>{l!=="only"&&(c.environment=f),l&&(c.background=u),Ka(c,h)}}function Ea({scene:l,background:e=!1,map:n,...a}){const r=ot(t=>t.scene);return U.useLayoutEffect(()=>{if(n)return ba(e,l,r,n,a)}),null}function Ei({background:l=!1,scene:e,blur:n,backgroundBlurriness:a,backgroundIntensity:r,backgroundRotation:t,environmentIntensity:o,environmentRotation:s,...i}){const c=Mn(i),u=ot(f=>f.scene);return U.useLayoutEffect(()=>ba(l,e,u,c,{backgroundBlurriness:n??a,backgroundIntensity:r,backgroundRotation:t,environmentIntensity:o,environmentRotation:s})),null}function tf({children:l,near:e=.1,far:n=1e3,resolution:a=256,frames:r=1,map:t,background:o=!1,blur:s,backgroundBlurriness:i,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:h,scene:d,files:m,path:g,preset:A=void 0,extensions:y}){const B=ot(E=>E.gl),x=ot(E=>E.scene),M=U.useRef(null),[b]=U.useState(()=>new Lo),C=U.useMemo(()=>{const E=new xs(a);return E.texture.type=xt,E},[a]);U.useLayoutEffect(()=>{if(r===1){const E=B.autoClear;B.autoClear=!0,M.current.update(B,b),B.autoClear=E}return ba(o,d,x,C.texture,{backgroundBlurriness:s??i,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:h})},[l,b,C.texture,d,x,o,r,B]);let T=1;return Xt(()=>{if(r===1/0||T<r){const E=B.autoClear;B.autoClear=!0,M.current.update(B,b),B.autoClear=E,T++}}),U.createElement(U.Fragment,null,ws(U.createElement(U.Fragment,null,l,U.createElement("cubeCamera",{ref:M,args:[e,n,C]}),m||A?U.createElement(Ei,{background:!0,files:m,preset:A,path:g,extensions:y}):t?U.createElement(Ea,{background:!0,map:t,extensions:y}):null),b))}function rf(l){var e,n,a,r;const t=Mn(l),o=l.map||t;U.useMemo(()=>Oo({GroundProjectedEnvImpl:Kc}),[]);const s=U.useMemo(()=>[o],[o]),i=(e=l.ground)==null?void 0:e.height,c=(n=l.ground)==null?void 0:n.radius,u=(a=(r=l.ground)==null?void 0:r.scale)!==null&&a!==void 0?a:1e3;return U.createElement(U.Fragment,null,U.createElement(Ea,Pt({},l,{map:o})),U.createElement("groundProjectedEnvImpl",{args:s,scale:u,height:i,radius:c}))}function nf(l){return l.ground?U.createElement(rf,l):l.map?U.createElement(Ea,l):l.children?U.createElement(tf,l):U.createElement(Ei,l)}const af=U.forwardRef(({scale:l=10,frames:e=1/0,opacity:n=1,width:a=1,height:r=1,blur:t=1,near:o=0,far:s=10,resolution:i=512,smooth:c=!0,color:u="#000000",depthWrite:f=!1,renderOrder:h,...d},m)=>{const g=U.useRef(null),A=ot(_=>_.scene),y=ot(_=>_.gl),B=U.useRef(null);a=a*(Array.isArray(l)?l[0]:l||1),r=r*(Array.isArray(l)?l[1]:l||1);const[x,M,b,C,T,E,F]=U.useMemo(()=>{const _=new Ar(i,i),K=new Ar(i,i);K.texture.generateMipmaps=_.texture.generateMipmaps=!1;const N=new Dr(a,r).rotateX(Math.PI/2),ne=new sr(N),se=new Uo;se.depthTest=se.depthWrite=!1,se.onBeforeCompile=w=>{w.uniforms={...w.uniforms,ucolor:{value:new wt(u)}},w.fragmentShader=w.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),w.fragmentShader=w.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Z=new Sr(Dl),P=new Sr(Il);return P.depthTest=Z.depthTest=!1,[_,N,se,ne,Z,P,K]},[i,a,r,l,u]),I=_=>{C.visible=!0,C.material=T,T.uniforms.tDiffuse.value=x.texture,T.uniforms.h.value=_*1/256,y.setRenderTarget(F),y.render(C,B.current),C.material=E,E.uniforms.tDiffuse.value=F.texture,E.uniforms.v.value=_*1/256,y.setRenderTarget(x),y.render(C,B.current),C.visible=!1};let z=0,D,O;return Xt(()=>{B.current&&(e===1/0||z<e)&&(z++,D=A.background,O=A.overrideMaterial,g.current.visible=!1,A.background=null,A.overrideMaterial=b,y.setRenderTarget(x),y.render(A,B.current),I(t),c&&I(t*.4),y.setRenderTarget(null),g.current.visible=!0,A.overrideMaterial=O,A.background=D)}),U.useImperativeHandle(m,()=>g.current,[]),U.createElement("group",Pt({"rotation-x":Math.PI/2},d,{ref:g}),U.createElement("mesh",{renderOrder:h,geometry:M,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},U.createElement("meshBasicMaterial",{transparent:!0,map:x.texture,opacity:n,depthWrite:f})),U.createElement("orthographicCamera",{ref:B,args:[-a/2,a/2,r/2,-r/2,o,s]}))});function of(l){return l.isLight}function sf(l){return!!l.geometry}const Mi=U.createContext(null),cf=fi({color:new wt,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${hi>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),lf=U.forwardRef(({children:l,temporal:e,frames:n=40,limit:a=1/0,blend:r=20,scale:t=10,opacity:o=1,alphaTest:s=.75,color:i="black",colorBlend:c=2,resolution:u=1024,toneMapped:f=!0,...h},d)=>{Oo({SoftShadowMaterial:cf});const m=ot(C=>C.gl),g=ot(C=>C.scene),A=ot(C=>C.camera),y=ot(C=>C.invalidate),B=U.useRef(null),x=U.useRef(null),[M]=U.useState(()=>new ff(m,g,u));U.useLayoutEffect(()=>{M.configure(B.current)},[]);const b=U.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,n),blend:Math.max(2,n===1/0?r:n),count:0,getMesh:()=>B.current,reset:()=>{M.clear();const C=B.current.material;C.opacity=0,C.alphaTest=0,b.count=0},update:(C=1)=>{const T=B.current.material;b.temporal?(T.opacity=Math.min(o,T.opacity+o/b.blend),T.alphaTest=Math.min(s,T.alphaTest+s/b.blend)):(T.opacity=o,T.alphaTest=s),x.current.visible=!0,M.prepare();for(let E=0;E<C;E++)b.lights.forEach(F=>F.update()),M.update(A,b.blend);x.current.visible=!1,M.finish()}}),[M,A,g,e,n,r,o,s]);return U.useLayoutEffect(()=>{b.reset(),!b.temporal&&b.frames!==1/0&&b.update(b.blend)}),U.useImperativeHandle(d,()=>b,[b]),Xt(()=>{(b.temporal||b.frames===1/0)&&b.count<b.frames&&b.count<a&&(y(),b.update(),b.count++)}),U.createElement("group",h,U.createElement("group",{traverse:()=>null,ref:x},U.createElement(Mi.Provider,{value:b},l)),U.createElement("mesh",{receiveShadow:!0,ref:B,scale:t,rotation:[-Math.PI/2,0,0]},U.createElement("planeGeometry",null),U.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:f,color:i,blend:c,map:M.progressiveLightMap2.texture})))}),uf=U.forwardRef(({castShadow:l=!0,bias:e=.001,mapSize:n=512,size:a=5,near:r=.5,far:t=500,frames:o=1,position:s=[0,0,0],radius:i=1,amount:c=8,intensity:u=hi>=155?Math.PI:1,ambient:f=.5,...h},d)=>{const m=U.useRef(null),g=new Ge(...s).length(),A=U.useContext(Mi),y=U.useCallback(()=>{let x;if(m.current)for(let M=0;M<m.current.children.length;M++)if(x=m.current.children[M],Math.random()>f)x.position.set(s[0]+Wr.randFloatSpread(i),s[1]+Wr.randFloatSpread(i),s[2]+Wr.randFloatSpread(i));else{let b=Math.acos(2*Math.random()-1)-Math.PI/2,C=2*Math.PI*Math.random();x.position.set(Math.cos(b)*Math.cos(C)*g,Math.abs(Math.cos(b)*Math.sin(C)*g),Math.sin(b)*g)}},[i,f,g,...s]),B=U.useMemo(()=>({update:y}),[y]);return U.useImperativeHandle(d,()=>B,[B]),U.useLayoutEffect(()=>{var x;const M=m.current;return A&&((x=A.lights)==null||x.set(M.uuid,B)),()=>{var b;return void(A==null||(b=A.lights)==null?void 0:b.delete(M.uuid))}},[A,B]),U.createElement("group",Pt({ref:m},h),Array.from({length:c},(x,M)=>U.createElement("directionalLight",{key:M,castShadow:l,"shadow-bias":e,"shadow-mapSize":[n,n],intensity:u/c},U.createElement("orthographicCamera",{attach:"shadow-camera",args:[-a,a,a,-a,r,t]}))))});class ff{constructor(e,n,a=1024){this.renderer=e,this.res=a,this.scene=n,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new wt,this.clearAlpha=0;const r={type:xt,magFilter:Zn,minFilter:Zn};this.progressiveLightMap1=new Ar(this.res,this.res,r),this.progressiveLightMap2=new Ar(this.res,this.res,r),this.discardMat=new Ou,this.targetMat=new Ss({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=t=>{t.vertexShader=`varying vec2 vUv;
`+t.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const o=t.fragmentShader.indexOf("void main() {");t.fragmentShader=`varying vec2 vUv;
`+t.fragmentShader.slice(0,o)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+t.fragmentShader.slice(o-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,t.uniforms.previousShadowMap=this.previousShadowMap,t.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{sf(e)?this.meshes.push({object:e,material:e.material}):of(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,n=100){if(!this.object)return;this.averagingWindow.value=n,this.object.material=this.targetMat;const a=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,t=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(a),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=t}}const hf={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function df({radius:l,adjustCamera:e}){const n=Nu();return U.useEffect(()=>{e&&n.refresh().clip().fit()},[l,e]),null}function pf({children:l,center:e,adjustCamera:n=!0,intensity:a=.5,shadows:r="contact",environment:t="city",preset:o="rembrandt",...s}){var i,c,u,f,h,d,m,g;const A=typeof o=="string"?hf[o]:o,[{radius:y,height:B},x]=U.useState({radius:0,width:0,height:0,depth:0}),M=(i=r==null?void 0:r.bias)!==null&&i!==void 0?i:-1e-4,b=(c=r==null?void 0:r.normalBias)!==null&&c!==void 0?c:0,C=(u=r==null?void 0:r.size)!==null&&u!==void 0?u:1024,T=(f=r==null?void 0:r.offset)!==null&&f!==void 0?f:0,E=r==="contact"||(r==null?void 0:r.type)==="contact",F=r==="accumulative"||(r==null?void 0:r.type)==="accumulative",I={...typeof r=="object"?r:{}},z=t?typeof t=="string"?{preset:t}:t:null,D=U.useCallback(O=>{const{width:_,height:K,depth:N,boundingSphere:ne}=O;x({radius:ne.radius,width:_,height:K,depth:N}),e!=null&&e.onCentered&&e.onCentered(O)},[]);return U.createElement(U.Fragment,null,U.createElement("ambientLight",{intensity:a/3}),U.createElement("spotLight",{penumbra:1,position:[A.main[0]*y,A.main[1]*y,A.main[2]*y],intensity:a*2,castShadow:!!r,"shadow-bias":M,"shadow-normalBias":b,"shadow-mapSize":C}),U.createElement("pointLight",{position:[A.fill[0]*y,A.fill[1]*y,A.fill[2]*y],intensity:a}),U.createElement(Hu,Pt({fit:!!n,clip:!!n,margin:Number(n),observe:!0},s),U.createElement(df,{radius:y,adjustCamera:n}),U.createElement(Gu,Pt({},e,{position:[0,T/2,0],onCentered:D}),l)),U.createElement("group",{position:[0,-B/2-T/2,0]},E&&U.createElement(af,Pt({scale:y*4,far:y,blur:2},I)),F&&U.createElement(lf,Pt({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:y*4},I),U.createElement(uf,{amount:(h=I.amount)!==null&&h!==void 0?h:8,radius:(d=I.radius)!==null&&d!==void 0?d:y,ambient:(m=I.ambient)!==null&&m!==void 0?m:.5,intensity:(g=I.intensity)!==null&&g!==void 0?g:1,position:[A.main[0]*y,A.main[1]*y,A.main[2]*y],size:y*4,bias:-M,mapSize:C}))),t&&U.createElement(nf,z))}function mf(l){const{nodes:e,materials:n}=en("/computerModel.glb");return Ae.jsxs("group",{...l,dispose:null,children:[Ae.jsxs("group",{position:[.121,.007,0],children:[Ae.jsx("mesh",{geometry:e.Object_6.geometry,material:n.MacBookPro}),Ae.jsx("mesh",{geometry:e.Object_8.geometry,material:n.MacBookPro})]}),Ae.jsx("mesh",{geometry:e.Object_4.geometry,material:n.MacBookPro})]})}en.preload("/computerModel.glb");const gf=()=>Ae.jsx(ko,{children:Ae.jsxs(U.Suspense,{fallback:"loading...",children:[Ae.jsx(pf,{environment:"night",intensity:.5,children:Ae.jsx(mf,{})}),Ae.jsx(gi,{enableZoom:!1,autoRotate:!0}),Ae.jsx(mi,{position:[-1,0,1.8],zoom:.8,makeDefault:!0})]})});function la(){return la=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(l[a]=n[a])}return l},la.apply(this,arguments)}var Af={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(l){},onComplete:function(l){},preStringTyped:function(l,e){},onStringTyped:function(l,e){},onLastStringBackspaced:function(l){},onTypingPaused:function(l,e){},onTypingResumed:function(l,e){},onReset:function(l){},onStop:function(l,e){},onStart:function(l,e){},onDestroy:function(l){}},vf=new(function(){function l(){}var e=l.prototype;return e.load=function(n,a,r){if(n.el=typeof r=="string"?document.querySelector(r):r,n.options=la({},Af,a),n.isInput=n.el.tagName.toLowerCase()==="input",n.attr=n.options.attr,n.bindInputFocusEvents=n.options.bindInputFocusEvents,n.showCursor=!n.isInput&&n.options.showCursor,n.cursorChar=n.options.cursorChar,n.cursorBlinking=!0,n.elContent=n.attr?n.el.getAttribute(n.attr):n.el.textContent,n.contentType=n.options.contentType,n.typeSpeed=n.options.typeSpeed,n.startDelay=n.options.startDelay,n.backSpeed=n.options.backSpeed,n.smartBackspace=n.options.smartBackspace,n.backDelay=n.options.backDelay,n.fadeOut=n.options.fadeOut,n.fadeOutClass=n.options.fadeOutClass,n.fadeOutDelay=n.options.fadeOutDelay,n.isPaused=!1,n.strings=n.options.strings.map(function(c){return c.trim()}),n.stringsElement=typeof n.options.stringsElement=="string"?document.querySelector(n.options.stringsElement):n.options.stringsElement,n.stringsElement){n.strings=[],n.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var t=Array.prototype.slice.apply(n.stringsElement.children),o=t.length;if(o)for(var s=0;s<o;s+=1)n.strings.push(t[s].innerHTML.trim())}for(var i in n.strPos=0,n.currentElContent=this.getCurrentElContent(n),n.currentElContent&&n.currentElContent.length>0&&(n.strPos=n.currentElContent.length-1,n.strings.unshift(n.currentElContent)),n.sequence=[],n.strings)n.sequence[i]=i;n.arrayPos=0,n.stopNum=0,n.loop=n.options.loop,n.loopCount=n.options.loopCount,n.curLoop=0,n.shuffle=n.options.shuffle,n.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},n.typingComplete=!1,n.autoInsertCss=n.options.autoInsertCss,n.autoInsertCss&&(this.appendCursorAnimationCss(n),this.appendFadeOutAnimationCss(n))},e.getCurrentElContent=function(n){return n.attr?n.el.getAttribute(n.attr):n.isInput?n.el.value:n.contentType==="html"?n.el.innerHTML:n.el.textContent},e.appendCursorAnimationCss=function(n){var a="data-typed-js-cursor-css";if(n.showCursor&&!document.querySelector("["+a+"]")){var r=document.createElement("style");r.setAttribute(a,"true"),r.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(r)}},e.appendFadeOutAnimationCss=function(n){var a="data-typed-fadeout-js-css";if(n.fadeOut&&!document.querySelector("["+a+"]")){var r=document.createElement("style");r.setAttribute(a,"true"),r.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(r)}},l}()),Co=new(function(){function l(){}var e=l.prototype;return e.typeHtmlChars=function(n,a,r){if(r.contentType!=="html")return a;var t=n.substring(a).charAt(0);if(t==="<"||t==="&"){var o;for(o=t==="<"?">":";";n.substring(a+1).charAt(0)!==o&&!(1+ ++a>n.length););a++}return a},e.backSpaceHtmlChars=function(n,a,r){if(r.contentType!=="html")return a;var t=n.substring(a).charAt(0);if(t===">"||t===";"){var o;for(o=t===">"?"<":"&";n.substring(a-1).charAt(0)!==o&&!(--a<0););a--}return a},l}()),yo=function(){function l(n,a){vf.load(this,a,n),this.begin()}var e=l.prototype;return e.toggle=function(){this.pause.status?this.start():this.stop()},e.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},e.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},e.destroy=function(){this.reset(!1),this.options.onDestroy(this)},e.reset=function(n){n===void 0&&(n=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,n&&(this.insertCursor(),this.options.onReset(this),this.begin())},e.begin=function(){var n=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){n.strPos===0?n.typewrite(n.strings[n.sequence[n.arrayPos]],n.strPos):n.backspace(n.strings[n.sequence[n.arrayPos]],n.strPos)},this.startDelay)},e.typewrite=function(n,a){var r=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var t=this.humanizer(this.typeSpeed),o=1;this.pause.status!==!0?this.timeout=setTimeout(function(){a=Co.typeHtmlChars(n,a,r);var s=0,i=n.substring(a);if(i.charAt(0)==="^"&&/^\^\d+/.test(i)){var c=1;c+=(i=/\d+/.exec(i)[0]).length,s=parseInt(i),r.temporaryPause=!0,r.options.onTypingPaused(r.arrayPos,r),n=n.substring(0,a)+n.substring(a+c),r.toggleBlinking(!0)}if(i.charAt(0)==="`"){for(;n.substring(a+o).charAt(0)!=="`"&&(o++,!(a+o>n.length)););var u=n.substring(0,a),f=n.substring(u.length+1,a+o),h=n.substring(a+o+1);n=u+f+h,o--}r.timeout=setTimeout(function(){r.toggleBlinking(!1),a>=n.length?r.doneTyping(n,a):r.keepTyping(n,a,o),r.temporaryPause&&(r.temporaryPause=!1,r.options.onTypingResumed(r.arrayPos,r))},s)},t):this.setPauseStatus(n,a,!0)},e.keepTyping=function(n,a,r){a===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var t=n.substring(0,a+=r);this.replaceText(t),this.typewrite(n,a)},e.doneTyping=function(n,a){var r=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){r.backspace(n,a)},this.backDelay))},e.backspace=function(n,a){var r=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var t=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){a=Co.backSpaceHtmlChars(n,a,r);var o=n.substring(0,a);if(r.replaceText(o),r.smartBackspace){var s=r.strings[r.arrayPos+1];r.stopNum=s&&o===s.substring(0,a)?a:0}a>r.stopNum?(a--,r.backspace(n,a)):a<=r.stopNum&&(r.arrayPos++,r.arrayPos===r.strings.length?(r.arrayPos=0,r.options.onLastStringBackspaced(),r.shuffleStringsIfNeeded(),r.begin()):r.typewrite(r.strings[r.sequence[r.arrayPos]],a))},t)}else this.setPauseStatus(n,a,!1)},e.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},e.setPauseStatus=function(n,a,r){this.pause.typewrite=r,this.pause.curString=n,this.pause.curStrPos=a},e.toggleBlinking=function(n){this.cursor&&(this.pause.status||this.cursorBlinking!==n&&(this.cursorBlinking=n,n?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},e.humanizer=function(n){return Math.round(Math.random()*n/2)+n},e.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},e.initFadeOut=function(){var n=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){n.arrayPos++,n.replaceText(""),n.strings.length>n.arrayPos?n.typewrite(n.strings[n.sequence[n.arrayPos]],0):(n.typewrite(n.strings[0],0),n.arrayPos=0)},this.fadeOutDelay)},e.replaceText=function(n){this.attr?this.el.setAttribute(this.attr,n):this.isInput?this.el.value=n:this.contentType==="html"?this.el.innerHTML=n:this.el.textContent=n},e.bindFocusEvents=function(){var n=this;this.isInput&&(this.el.addEventListener("focus",function(a){n.stop()}),this.el.addEventListener("blur",function(a){n.el.value&&n.el.value.length!==0||n.start()}))},e.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},l}();const Bf=()=>{const l=U.useRef(null),[e,n]=U.useState(!1);U.useEffect(()=>(i(),()=>{}),[]);const a=(h="")=>{const d=document.createElement("div");return h&&(d.className=h),l.current.appendChild(d),d},r=()=>{const h=a(),d=document.createElement("span");return d.className="prompt",d.textContent="user@javac:~$ ",h.appendChild(d),h},t=()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},o=h=>new Promise(d=>setTimeout(d,h)),s=async(h,d,m)=>{const g=document.createElement("span");return g.className=m,h.appendChild(g),new Promise(A=>{new yo(g,{strings:[d],typeSpeed:40,showCursor:!1,onComplete:A}),t()})},i=async()=>{if(!l.current)return;let h=r();await s(h,"vim HelloWorld.java","command");const d=`
// Simple Java program to demonstrate compilation
public class HelloWorld {
    public static void main(String[] args) {
        // Print a welcome message
        System.out.println("Hello, World!");
        
        // Calculate and print the sum of numbers from 1 to 5
        int sum = 0;
        for(int i = 1; i <= 5; i++) {
            sum += i;
            System.out.println("Adding " + i + ": Sum is now " + sum);
        }
        
        System.out.println("Final sum: " + sum);
    }
}`,m=a("code-block java-code");await c(m,d),h=r(),await s(h,":wq","command"),h=r(),await s(h,"javac HelloWorld.java","command"),h=a(),await s(h,"Compiling...","compile-message");const g=h,A=document.createElement("span");A.className="cursor blink",A.textContent="",g.appendChild(A),await o(2e3),g.removeChild(A),h=a(),await s(h,"Compilation successful!","success"),h=r(),await s(h,"java HelloWorld","command");const y=["Hello, World!","Adding 1: Sum is now 1","Adding 2: Sum is now 3","Adding 3: Sum is now 6","Adding 4: Sum is now 10","Adding 5: Sum is now 15","Final sum: 15"];for(const x of y)h=a(),await s(h,x,"output"),await o(300);h=r();const B=document.createElement("span");B.className="cursor blink",B.textContent="",h.appendChild(B),n(!0),setTimeout(()=>{l.current&&(l.current.innerHTML="",i())},5e3)},c=async(h,d)=>{const m=d.trim().split(`
`);for(let g=0;g<m.length;g++){const A=m[g],y=document.createElement("div");h.appendChild(y);const B=u(A);await f(y,B),g<m.length-1&&await o(100),t()}},u=h=>h.replace(/(\/\/.*$)/g,'<span class="comment">$1</span>').replace(/\b(public|class|static|void|int|for|if|else|return)\b/g,'<span class="keyword">$1</span>').replace(/\b(System\.out\.println)\(/g,'<span class="method">$1</span>(').replace(/"([^"]*)"/g,'<span class="string">"$1"</span>'),f=(h,d)=>new Promise(m=>{new yo(h,{strings:[d],typeSpeed:20,showCursor:!1,contentType:"html",onComplete:m})});return Ae.jsx("div",{className:"terminal-container",children:Ae.jsxs("div",{className:"terminal",children:[Ae.jsxs("div",{className:"terminal-header",children:[Ae.jsx("div",{className:"terminal-title",children:"Java Compilation Terminal"}),Ae.jsxs("div",{className:"terminal-controls",children:[Ae.jsx("div",{className:"terminal-button terminal-button-red"}),Ae.jsx("div",{className:"terminal-button terminal-button-yellow"}),Ae.jsx("div",{className:"terminal-button terminal-button-green"})]})]}),Ae.jsx("div",{className:"terminal-content",ref:l})]})})},Cf=()=>Ae.jsx("style",{jsx:!0,children:`
      .terminal-container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        min-height: 500px;
        padding: 20px;
        /* Removed background color to make transparent */
        font-family: 'Courier New', monospace;
      }
      
      .terminal {
        /* Changed to semi-transparent background */
        background-color: rgba(40, 40, 40, 0.75);
        width: 700px;
        height: 500px;
        border-radius: 8px;
        padding: 0;
        overflow: hidden;
        position: relative;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        display: flex;
        flex-direction: column;
        /* Added backdrop filter for glass effect */
        backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      
      .terminal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 15px;
        /* Changed to semi-transparent header */
        background-color: rgba(51, 51, 51, 0.8);
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
      }
      
      .terminal-title {
        font-size: 14px;
        color: #ddd;
      }
      
      .terminal-controls {
        display: flex;
      }
      
      .terminal-button {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-left: 8px;
      }
      
      .terminal-button-red {
        background-color: #ff5f56;
      }
      
      .terminal-button-yellow {
        background-color: #ffbd2e;
      }
      
      .terminal-button-green {
        background-color: #27c93f;
      }
      
      .terminal-content {
        flex: 1;
        padding: 15px;
        overflow-y: auto;
        font-size: 14px;
        line-height: 1.5;
        color: #f0f0f0;
      }
      
      .prompt {
        color: #5bf719;
        font-weight: bold;
      }
      
      .command {
        color: #dcdcaa;
      }
      
      .output {
        color: #9cdcfe;
      }
      
      .error {
        color: #ff5647;
      }
      
      .success {
        color: #5bf719;
      }
      
      .compile-message {
        color: #dcdcaa;
      }
      
      .code-block {
        margin: 10px 0;
        padding: 10px;
        /* Made code block semi-transparent */
        background-color: rgba(30, 30, 30, 0.7);
        border-radius: 4px;
        font-family: 'Courier New', monospace;
      }
      
      .java-code .keyword {
        color: #569cd6;
      }
      
      .java-code .string {
        color: #ce9178;
      }
      
      .java-code .comment {
        color: #6a9955;
      }
      
      .java-code .method {
        color: #dcdcaa;
      }
      
      .cursor {
        color: #fff;
      }
      
      .blink {
        animation: blink 1s infinite;
      }
      
      @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0; }
      }

      /* Added scrollbar styling */
      .terminal-content::-webkit-scrollbar {
        width: 8px;
      }

      .terminal-content::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.2);
      }

      .terminal-content::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 4px;
      }

      .terminal-content::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.3);
      }
    `}),yf=()=>Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(Cf,{}),Ae.jsx(Bf,{})]});var Ti={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},bo=hr.createContext&&hr.createContext(Ti),bf=["attr","size","title"];function Ef(l,e){if(l==null)return{};var n=Mf(l,e),a,r;if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);for(r=0;r<t.length;r++)a=t[r],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(l,a)&&(n[a]=l[a])}return n}function Mf(l,e){if(l==null)return{};var n={};for(var a in l)if(Object.prototype.hasOwnProperty.call(l,a)){if(e.indexOf(a)>=0)continue;n[a]=l[a]}return n}function Cn(){return Cn=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(l[a]=n[a])}return l},Cn.apply(this,arguments)}function Eo(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(l);e&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,a)}return n}function yn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Eo(Object(n),!0).forEach(function(a){Tf(l,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Eo(Object(n)).forEach(function(a){Object.defineProperty(l,a,Object.getOwnPropertyDescriptor(n,a))})}return l}function Tf(l,e,n){return e=Ff(e),e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Ff(l){var e=xf(l,"string");return typeof e=="symbol"?e:e+""}function xf(l,e){if(typeof l!="object"||!l)return l;var n=l[Symbol.toPrimitive];if(n!==void 0){var a=n.call(l,e||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(l)}function Fi(l){return l&&l.map((e,n)=>hr.createElement(e.tag,yn({key:n},e.attr),Fi(e.child)))}function St(l){return e=>hr.createElement(wf,Cn({attr:yn({},l.attr)},e),Fi(l.child))}function wf(l){var e=n=>{var{attr:a,size:r,title:t}=l,o=Ef(l,bf),s=r||n.size||"1em",i;return n.className&&(i=n.className),l.className&&(i=(i?i+" ":"")+l.className),hr.createElement("svg",Cn({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,o,{className:i,style:yn(yn({color:l.color||n.color},n.style),l.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),t&&hr.createElement("title",null,t),l.children)};return bo!==void 0?hr.createElement(bo.Consumer,null,n=>e(n)):e(Ti)}function Sf(l){return St({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80l-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"},child:[]}]})(l)}function Df(l){return St({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(l)}function If(l){return St({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M0 32l34.9 395.8L191.5 480l157.6-52.2L384 32H0zm308.2 127.9H124.4l4.1 49.4h175.6l-13.6 148.4-97.9 27v.3h-1.1l-98.7-27.3-6-75.8h47.7L138 320l53.5 14.5 53.7-14.5 6-62.2H84.3L71.5 112.2h241.1l-4.4 47.7z"},child:[]}]})(l)}function Rf(l){return St({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 53.2 242.84 0 242.84 0c21.5 84.5-75.6 110.1-110.7 162.6-23.9 35.9 11.7 74.4 60.2 118.2zm114.6-176.2c.1 0-175.2 43.8-91.5 140.2 24.7 28.4-6.5 54-6.5 54s62.7-32.4 33.9-72.9c-26.9-37.8-47.5-56.6 64.1-121.3zm-6.1 270.5a12.19 12.19 0 0 1-2 2.6c128.3-33.7 81.1-118.9 19.8-97.3a17.33 17.33 0 0 0-8.2 6.3 70.45 70.45 0 0 1 11-3c31-6.5 75.5 41.5-20.6 91.4zM348 437.4s14.5 11.9-15.9 21.2c-57.9 17.5-240.8 22.8-291.6.7-18.3-7.9 16-19 26.8-21.3 11.2-2.4 17.7-2 17.7-2-20.3-14.3-131.3 28.1-56.4 40.2C232.84 509.4 401 461.3 348 437.4zM124.44 396c-78.7 22 47.9 67.4 148.1 24.5a185.89 185.89 0 0 1-28.2-13.8c-44.7 8.5-65.4 9.1-106 4.5-33.5-3.8-13.9-15.2-13.9-15.2zm179.8 97.2c-78.7 14.8-175.8 13.1-233.3 3.6 0-.1 11.8 9.7 72.4 13.6 92.2 5.9 233.8-3.3 237.1-46.9 0 0-6.4 16.5-76.2 29.7zM260.64 353c-59.2 11.4-93.5 11.1-136.8 6.6-33.5-3.5-11.6-19.7-11.6-19.7-86.8 28.8 48.2 61.4 169.5 25.9a60.37 60.37 0 0 1-21.1-12.8z"},child:[]}]})(l)}function _f(l){return St({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 32v448h448V32H0zm243.8 349.4c0 43.6-25.6 63.5-62.9 63.5-33.7 0-53.2-17.4-63.2-38.5l34.3-20.7c6.6 11.7 12.6 21.6 27.1 21.6 13.8 0 22.6-5.4 22.6-26.5V237.7h42.1v143.7zm99.6 63.5c-39.1 0-64.4-18.6-76.7-43l34.3-19.8c9 14.7 20.8 25.6 41.5 25.6 17.4 0 28.6-8.7 28.6-20.8 0-14.4-11.4-19.5-30.7-28l-10.5-4.5c-30.4-12.9-50.5-29.2-50.5-63.5 0-31.6 24.1-55.6 61.6-55.6 26.8 0 46 9.3 59.8 33.7L368 290c-7.2-12.9-15-18-27.1-18-12.3 0-20.1 7.8-20.1 18 0 12.6 7.8 17.7 25.9 25.6l10.5 4.5c35.8 15.3 55.9 31 55.9 66.2 0 37.8-29.8 58.6-69.7 58.6z"},child:[]}]})(l)}function Gf(l){return St({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M220.8 123.3c1 .5 1.8 1.7 3 1.7 1.1 0 2.8-.4 2.9-1.5.2-1.4-1.9-2.3-3.2-2.9-1.7-.7-3.9-1-5.5-.1-.4.2-.8.7-.6 1.1.3 1.3 2.3 1.1 3.4 1.7zm-21.9 1.7c1.2 0 2-1.2 3-1.7 1.1-.6 3.1-.4 3.5-1.6.2-.4-.2-.9-.6-1.1-1.6-.9-3.8-.6-5.5.1-1.3.6-3.4 1.5-3.2 2.9.1 1 1.8 1.5 2.8 1.4zM420 403.8c-3.6-4-5.3-11.6-7.2-19.7-1.8-8.1-3.9-16.8-10.5-22.4-1.3-1.1-2.6-2.1-4-2.9-1.3-.8-2.7-1.5-4.1-2 9.2-27.3 5.6-54.5-3.7-79.1-11.4-30.1-31.3-56.4-46.5-74.4-17.1-21.5-33.7-41.9-33.4-72C311.1 85.4 315.7.1 234.8 0 132.4-.2 158 103.4 156.9 135.2c-1.7 23.4-6.4 41.8-22.5 64.7-18.9 22.5-45.5 58.8-58.1 96.7-6 17.9-8.8 36.1-6.2 53.3-6.5 5.8-11.4 14.7-16.6 20.2-4.2 4.3-10.3 5.9-17 8.3s-14 6-18.5 14.5c-2.1 3.9-2.8 8.1-2.8 12.4 0 3.9.6 7.9 1.2 11.8 1.2 8.1 2.5 15.7.8 20.8-5.2 14.4-5.9 24.4-2.2 31.7 3.8 7.3 11.4 10.5 20.1 12.3 17.3 3.6 40.8 2.7 59.3 12.5 19.8 10.4 39.9 14.1 55.9 10.4 11.6-2.6 21.1-9.6 25.9-20.2 12.5-.1 26.3-5.4 48.3-6.6 14.9-1.2 33.6 5.3 55.1 4.1.6 2.3 1.4 4.6 2.5 6.7v.1c8.3 16.7 23.8 24.3 40.3 23 16.6-1.3 34.1-11 48.3-27.9 13.6-16.4 36-23.2 50.9-32.2 7.4-4.5 13.4-10.1 13.9-18.3.4-8.2-4.4-17.3-15.5-29.7zM223.7 87.3c9.8-22.2 34.2-21.8 44-.4 6.5 14.2 3.6 30.9-4.3 40.4-1.6-.8-5.9-2.6-12.6-4.9 1.1-1.2 3.1-2.7 3.9-4.6 4.8-11.8-.2-27-9.1-27.3-7.3-.5-13.9 10.8-11.8 23-4.1-2-9.4-3.5-13-4.4-1-6.9-.3-14.6 2.9-21.8zM183 75.8c10.1 0 20.8 14.2 19.1 33.5-3.5 1-7.1 2.5-10.2 4.6 1.2-8.9-3.3-20.1-9.6-19.6-8.4.7-9.8 21.2-1.8 28.1 1 .8 1.9-.2-5.9 5.5-15.6-14.6-10.5-52.1 8.4-52.1zm-13.6 60.7c6.2-4.6 13.6-10 14.1-10.5 4.7-4.4 13.5-14.2 27.9-14.2 7.1 0 15.6 2.3 25.9 8.9 6.3 4.1 11.3 4.4 22.6 9.3 8.4 3.5 13.7 9.7 10.5 18.2-2.6 7.1-11 14.4-22.7 18.1-11.1 3.6-19.8 16-38.2 14.9-3.9-.2-7-1-9.6-2.1-8-3.5-12.2-10.4-20-15-8.6-4.8-13.2-10.4-14.7-15.3-1.4-4.9 0-9 4.2-12.3zm3.3 334c-2.7 35.1-43.9 34.4-75.3 18-29.9-15.8-68.6-6.5-76.5-21.9-2.4-4.7-2.4-12.7 2.6-26.4v-.2c2.4-7.6.6-16-.6-23.9-1.2-7.8-1.8-15 .9-20 3.5-6.7 8.5-9.1 14.8-11.3 10.3-3.7 11.8-3.4 19.6-9.9 5.5-5.7 9.5-12.9 14.3-18 5.1-5.5 10-8.1 17.7-6.9 8.1 1.2 15.1 6.8 21.9 16l19.6 35.6c9.5 19.9 43.1 48.4 41 68.9zm-1.4-25.9c-4.1-6.6-9.6-13.6-14.4-19.6 7.1 0 14.2-2.2 16.7-8.9 2.3-6.2 0-14.9-7.4-24.9-13.5-18.2-38.3-32.5-38.3-32.5-13.5-8.4-21.1-18.7-24.6-29.9s-3-23.3-.3-35.2c5.2-22.9 18.6-45.2 27.2-59.2 2.3-1.7.8 3.2-8.7 20.8-8.5 16.1-24.4 53.3-2.6 82.4.6-20.7 5.5-41.8 13.8-61.5 12-27.4 37.3-74.9 39.3-112.7 1.1.8 4.6 3.2 6.2 4.1 4.6 2.7 8.1 6.7 12.6 10.3 12.4 10 28.5 9.2 42.4 1.2 6.2-3.5 11.2-7.5 15.9-9 9.9-3.1 17.8-8.6 22.3-15 7.7 30.4 25.7 74.3 37.2 95.7 6.1 11.4 18.3 35.5 23.6 64.6 3.3-.1 7 .4 10.9 1.4 13.8-35.7-11.7-74.2-23.3-84.9-4.7-4.6-4.9-6.6-2.6-6.5 12.6 11.2 29.2 33.7 35.2 59 2.8 11.6 3.3 23.7.4 35.7 16.4 6.8 35.9 17.9 30.7 34.8-2.2-.1-3.2 0-4.2 0 3.2-10.1-3.9-17.6-22.8-26.1-19.6-8.6-36-8.6-38.3 12.5-12.1 4.2-18.3 14.7-21.4 27.3-2.8 11.2-3.6 24.7-4.4 39.9-.5 7.7-3.6 18-6.8 29-32.1 22.9-76.7 32.9-114.3 7.2zm257.4-11.5c-.9 16.8-41.2 19.9-63.2 46.5-13.2 15.7-29.4 24.4-43.6 25.5s-26.5-4.8-33.7-19.3c-4.7-11.1-2.4-23.1 1.1-36.3 3.7-14.2 9.2-28.8 9.9-40.6.8-15.2 1.7-28.5 4.2-38.7 2.6-10.3 6.6-17.2 13.7-21.1.3-.2.7-.3 1-.5.8 13.2 7.3 26.6 18.8 29.5 12.6 3.3 30.7-7.5 38.4-16.3 9-.3 15.7-.9 22.6 5.1 9.9 8.5 7.1 30.3 17.1 41.6 10.6 11.6 14 19.5 13.7 24.6zM173.3 148.7c2 1.9 4.7 4.5 8 7.1 6.6 5.2 15.8 10.6 27.3 10.6 11.6 0 22.5-5.9 31.8-10.8 4.9-2.6 10.9-7 14.8-10.4s5.9-6.3 3.1-6.6-2.6 2.6-6 5.1c-4.4 3.2-9.7 7.4-13.9 9.8-7.4 4.2-19.5 10.2-29.9 10.2s-18.7-4.8-24.9-9.7c-3.1-2.5-5.7-5-7.7-6.9-1.5-1.4-1.9-4.6-4.3-4.9-1.4-.1-1.8 3.7 1.7 6.5z"},child:[]}]})(l)}function Uf(l){return St({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"},child:[]}]})(l)}function Lf(l){return St({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M418.2 177.2c-5.4-1.8-10.8-3.5-16.2-5.1.9-3.7 1.7-7.4 2.5-11.1 12.3-59.6 4.2-107.5-23.1-123.3-26.3-15.1-69.2.6-112.6 38.4-4.3 3.7-8.5 7.6-12.5 11.5-2.7-2.6-5.5-5.2-8.3-7.7-45.5-40.4-91.1-57.4-118.4-41.5-26.2 15.2-34 60.3-23 116.7 1.1 5.6 2.3 11.1 3.7 16.7-6.4 1.8-12.7 3.8-18.6 5.9C38.3 196.2 0 225.4 0 255.6c0 31.2 40.8 62.5 96.3 81.5 4.5 1.5 9 3 13.6 4.3-1.5 6-2.8 11.9-4 18-10.5 55.5-2.3 99.5 23.9 114.6 27 15.6 72.4-.4 116.6-39.1 3.5-3.1 7-6.3 10.5-9.7 4.4 4.3 9 8.4 13.6 12.4 42.8 36.8 85.1 51.7 111.2 36.6 27-15.6 35.8-62.9 24.4-120.5-.9-4.4-1.9-8.9-3-13.5 3.2-.9 6.3-1.9 9.4-2.9 57.7-19.1 99.5-50 99.5-81.7 0-30.3-39.4-59.7-93.8-78.4zM282.9 92.3c37.2-32.4 71.9-45.1 87.7-36 16.9 9.7 23.4 48.9 12.8 100.4-.7 3.4-1.4 6.7-2.3 10-22.2-5-44.7-8.6-67.3-10.6-13-18.6-27.2-36.4-42.6-53.1 3.9-3.7 7.7-7.2 11.7-10.7zM167.2 307.5c5.1 8.7 10.3 17.4 15.8 25.9-15.6-1.7-31.1-4.2-46.4-7.5 4.4-14.4 9.9-29.3 16.3-44.5 4.6 8.8 9.3 17.5 14.3 26.1zm-30.3-120.3c14.4-3.2 29.7-5.8 45.6-7.8-5.3 8.3-10.5 16.8-15.4 25.4-4.9 8.5-9.7 17.2-14.2 26-6.3-14.9-11.6-29.5-16-43.6zm27.4 68.9c6.6-13.8 13.8-27.3 21.4-40.6s15.8-26.2 24.4-38.9c15-1.1 30.3-1.7 45.9-1.7s31 .6 45.9 1.7c8.5 12.6 16.6 25.5 24.3 38.7s14.9 26.7 21.7 40.4c-6.7 13.8-13.9 27.4-21.6 40.8-7.6 13.3-15.7 26.2-24.2 39-14.9 1.1-30.4 1.6-46.1 1.6s-30.9-.5-45.6-1.4c-8.7-12.7-16.9-25.7-24.6-39s-14.8-26.8-21.5-40.6zm180.6 51.2c5.1-8.8 9.9-17.7 14.6-26.7 6.4 14.5 12 29.2 16.9 44.3-15.5 3.5-31.2 6.2-47 8 5.4-8.4 10.5-17 15.5-25.6zm14.4-76.5c-4.7-8.8-9.5-17.6-14.5-26.2-4.9-8.5-10-16.9-15.3-25.2 16.1 2 31.5 4.7 45.9 8-4.6 14.8-10 29.2-16.1 43.4zM256.2 118.3c10.5 11.4 20.4 23.4 29.6 35.8-19.8-.9-39.7-.9-59.5 0 9.8-12.9 19.9-24.9 29.9-35.8zM140.2 57c16.8-9.8 54.1 4.2 93.4 39 2.5 2.2 5 4.6 7.6 7-15.5 16.7-29.8 34.5-42.9 53.1-22.6 2-45 5.5-67.2 10.4-1.3-5.1-2.4-10.3-3.5-15.5-9.4-48.4-3.2-84.9 12.6-94zm-24.5 263.6c-4.2-1.2-8.3-2.5-12.4-3.9-21.3-6.7-45.5-17.3-63-31.2-10.1-7-16.9-17.8-18.8-29.9 0-18.3 31.6-41.7 77.2-57.6 5.7-2 11.5-3.8 17.3-5.5 6.8 21.7 15 43 24.5 63.6-9.6 20.9-17.9 42.5-24.8 64.5zm116.6 98c-16.5 15.1-35.6 27.1-56.4 35.3-11.1 5.3-23.9 5.8-35.3 1.3-15.9-9.2-22.5-44.5-13.5-92 1.1-5.6 2.3-11.2 3.7-16.7 22.4 4.8 45 8.1 67.9 9.8 13.2 18.7 27.7 36.6 43.2 53.4-3.2 3.1-6.4 6.1-9.6 8.9zm24.5-24.3c-10.2-11-20.4-23.2-30.3-36.3 9.6.4 19.5.6 29.5.6 10.3 0 20.4-.2 30.4-.7-9.2 12.7-19.1 24.8-29.6 36.4zm130.7 30c-.9 12.2-6.9 23.6-16.5 31.3-15.9 9.2-49.8-2.8-86.4-34.2-4.2-3.6-8.4-7.5-12.7-11.5 15.3-16.9 29.4-34.8 42.2-53.6 22.9-1.9 45.7-5.4 68.2-10.5 1 4.1 1.9 8.2 2.7 12.2 4.9 21.6 5.7 44.1 2.5 66.3zm18.2-107.5c-2.8.9-5.6 1.8-8.5 2.6-7-21.8-15.6-43.1-25.5-63.8 9.6-20.4 17.7-41.4 24.5-62.9 5.2 1.5 10.2 3.1 15 4.7 46.6 16 79.3 39.8 79.3 58 0 19.6-34.9 44.9-84.8 61.4zm-149.7-15c25.3 0 45.8-20.5 45.8-45.8s-20.5-45.8-45.8-45.8c-25.3 0-45.8 20.5-45.8 45.8s20.5 45.8 45.8 45.8z"},child:[]}]})(l)}function Of(l){return St({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"},child:[]}]})(l)}function kf(l){return St({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11.77 11.24H9.956V8.202h2.152c1.17 0 1.834.522 1.834 1.466 0 1.008-.773 1.572-2.174 1.572zm.324 1.206H9.957v3.348h2.231c1.459 0 2.232-.585 2.232-1.685s-.795-1.663-2.326-1.663zM24 11.39v1.218c-1.128.108-1.817.944-2.226 2.268-.407 1.319-.463 2.937-.42 4.186.045 1.3-.968 2.5-2.337 2.5H4.985c-1.37 0-2.383-1.2-2.337-2.5.043-1.249-.013-2.867-.42-4.186-.41-1.324-1.1-2.16-2.228-2.268V11.39c1.128-.108 1.819-.944 2.227-2.268.408-1.319.464-2.937.42-4.186-.045-1.3.968-2.5 2.338-2.5h14.032c1.37 0 2.382 1.2 2.337 2.5-.043 1.249.013 2.867.42 4.186.409 1.324 1.098 2.16 2.226 2.268zm-7.927 2.817c0-1.354-.953-2.333-2.368-2.488v-.057c1.04-.169 1.856-1.135 1.856-2.213 0-1.537-1.213-2.538-3.062-2.538h-4.16v10.172h4.181c2.218 0 3.553-1.086 3.553-2.876z"},child:[]}]})(l)}function Pf(l){return St({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.5921 9.1962s-.354-3.298-3.627-3.39c-3.2741-.09-4.9552 2.474-4.9552 6.14 0 3.6651 1.858 6.5972 5.0451 6.5972 3.184 0 3.5381-3.665 3.5381-3.665l6.1041.365s.36 3.31-2.196 5.836c-2.552 2.5241-5.6901 2.9371-7.8762 2.9201-2.19-.017-5.2261.034-8.1602-2.97-2.938-3.0101-3.436-5.9302-3.436-8.8002 0-2.8701.556-6.6702 4.047-9.5502C7.444.72 9.849 0 12.254 0c10.0422 0 10.7172 9.2602 10.7172 9.2602z"},child:[]}]})(l)}function Hf(l){return St({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.394 6c-.167-.29-.398-.543-.652-.69L12.926.22c-.509-.294-1.34-.294-1.848 0L2.26 5.31c-.508.293-.923 1.013-.923 1.6v10.18c0 .294.104.62.271.91.167.29.398.543.652.69l8.816 5.09c.508.293 1.34.293 1.848 0l8.816-5.09c.254-.147.485-.4.652-.69.167-.29.27-.616.27-.91V6.91c.003-.294-.1-.62-.268-.91zM12 19.11c-3.92 0-7.109-3.19-7.109-7.11 0-3.92 3.19-7.11 7.11-7.11a7.133 7.133 0 016.156 3.553l-3.076 1.78a3.567 3.567 0 00-3.08-1.78A3.56 3.56 0 008.444 12 3.56 3.56 0 0012 15.555a3.57 3.57 0 003.08-1.778l3.078 1.78A7.135 7.135 0 0112 19.11zm7.11-6.715h-.79v.79h-.79v-.79h-.79v-.79h.79v-.79h.79v.79h.79zm2.962 0h-.79v.79h-.79v-.79h-.79v-.79h.79v-.79h.79v.79h.79z"},child:[]}]})(l)}function Nf(l){return St({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M15.852 8.981h-4.588V0h4.588c2.476 0 4.49 2.014 4.49 4.49s-2.014 4.491-4.49 4.491zM12.735 7.51h3.117c1.665 0 3.019-1.355 3.019-3.019s-1.355-3.019-3.019-3.019h-3.117V7.51zm0 1.471H8.148c-2.476 0-4.49-2.014-4.49-4.49S5.672 0 8.148 0h4.588v8.981zm-4.587-7.51c-1.665 0-3.019 1.355-3.019 3.019s1.354 3.02 3.019 3.02h3.117V1.471H8.148zm4.587 15.019H8.148c-2.476 0-4.49-2.014-4.49-4.49s2.014-4.49 4.49-4.49h4.588v8.98zM8.148 8.981c-1.665 0-3.019 1.355-3.019 3.019s1.355 3.019 3.019 3.019h3.117V8.981H8.148zM8.172 24c-2.489 0-4.515-2.014-4.515-4.49s2.014-4.49 4.49-4.49h4.588v4.441c0 2.503-2.047 4.539-4.563 4.539zm-.024-7.51a3.023 3.023 0 0 0-3.019 3.019c0 1.665 1.365 3.019 3.044 3.019 1.705 0 3.093-1.376 3.093-3.068v-2.97H8.148zm7.704 0h-.098c-2.476 0-4.49-2.014-4.49-4.49s2.014-4.49 4.49-4.49h.098c2.476 0 4.49 2.014 4.49 4.49s-2.014 4.49-4.49 4.49zm-.097-7.509c-1.665 0-3.019 1.355-3.019 3.019s1.355 3.019 3.019 3.019h.098c1.665 0 3.019-1.355 3.019-3.019s-1.355-3.019-3.019-3.019h-.098z"},child:[]}]})(l)}function Jf(l){return St({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m23.693 10.7058-4.73-8.1844c-.4094-.7106-1.4166-1.2942-2.2402-1.2942H7.2725c-.819 0-1.8308.5836-2.2402 1.2942L.307 10.7058c-.4095.7106-.4095 1.873 0 2.5837l4.7252 8.189c.4094.7107 1.4166 1.2943 2.2402 1.2943h9.455c.819 0 1.826-.5836 2.2402-1.2942l4.7252-8.189c.4095-.7107.4095-1.8732 0-2.5838zM10.9763 5.7547c0-.5365.4377-.9742.9742-.9742s.9742.4377.9742.9742v5.8217c0 .5366-.4377.9742-.9742.9742s-.9742-.4376-.9742-.9742zm.9742 12.4294c-3.6427 0-6.6077-2.965-6.6077-6.6077.0047-2.0896.993-4.0521 2.6685-5.304a.8657.8657 0 0 1 1.2142.1788.8657.8657 0 0 1-.1788 1.2143c-2.1602 1.6048-2.612 4.6592-1.0072 6.8194 1.6049 2.1603 4.6593 2.612 6.8195 1.0072 1.2378-.9177 1.9673-2.372 1.9673-3.9157a4.8972 4.8972 0 0 0-1.9861-3.925c-.386-.2824-.466-.8284-.1836-1.2143.2824-.386.8283-.466 1.2143-.1835 1.6895 1.2471 2.6826 3.2238 2.6873 5.3228 0 3.6474-2.965 6.6077-6.6077 6.6077z"},child:[]}]})(l)}const Qn=[{id:"java",name:"Java",color:"#E76F00",Icon:Rf},{id:"spring",name:"Spring Boot",color:"#6DB33F",Icon:Jf},{id:"mysql",name:"MySQL",color:"#00758F",Icon:Of},{id:"linux",name:"Linux",color:"#FCC624",Icon:Gf},{id:"html",name:"HTML5",color:"#E34F26",Icon:If},{id:"css",name:"CSS3",color:"#1572B6",Icon:Sf},{id:"javascript",name:"JavaScript",color:"#F7DF1E",Icon:_f},{id:"react",name:"React",color:"#61DAFB",Icon:Lf},{id:"python",name:"Python",color:"#3776AB",Icon:Uf},{id:"github",name:"GitHub",color:"#181717",Icon:Df},{id:"bootstrap",name:"Bootstrap",color:"#3178C6",Icon:kf},{id:"figma",name:"Figma",color:"#FF9900",Icon:Nf},{id:"cpp",name:"C++",color:"#00599C",Icon:Hf},{id:"c",name:"C",color:"#555555",Icon:Pf}],jf=({position:l,icon:e,onHover:n,isHovered:a})=>{const r=U.useRef(),t=a===e.id,o=e.Icon;return Xt(s=>{r.current&&(t?r.current.scale.lerp(new Ge(1.3,1.3,1.3),.1):r.current.scale.lerp(new Ge(1,1,1),.1),r.current.position.y=l.y+Math.sin(s.clock.elapsedTime+l.x)*.05)}),Ae.jsxs("group",{position:l,children:[Ae.jsxs("mesh",{ref:r,onPointerOver:()=>n(e.id),onPointerOut:()=>n(null),children:[Ae.jsx("sphereGeometry",{args:[.3,16,16]}),Ae.jsx("meshStandardMaterial",{color:e.color,emissive:e.color,emissiveIntensity:t?.6:.3,metalness:.8,roughness:.2,transparent:!0,opacity:.8}),Ae.jsx(wc,{position:[0,0,.15],center:!0,distanceFactor:7,children:Ae.jsx("div",{style:{color:"#ffffff",fontSize:t?"3rem":"2.5rem",transition:"font-size 0.3s ease",pointerEvents:"none"},children:Ae.jsx(o,{})})})]}),t&&Ae.jsx(Du,{position:[0,-.5,0],fontSize:.15,color:"white",anchorX:"center",anchorY:"middle",outlineWidth:.01,outlineColor:e.color,children:e.name})]})},Kf=()=>{const l=U.useRef();return Xt(()=>{l.current&&(l.current.rotation.y+=.01)}),Ae.jsxs("mesh",{ref:l,children:[Ae.jsx("sphereGeometry",{args:[.5,32,32]}),Ae.jsx("meshPhongMaterial",{color:"#1a1a2e",emissive:"#505080",emissiveIntensity:.5,wireframe:!0,transparent:!0,opacity:.8})]})},Wf=({start:l,end:e,color:n,visible:a})=>{const r=[l,e],t=U.useRef();return Ae.jsxs("line",{ref:t,children:[Ae.jsx("bufferGeometry",{attach:"geometry",setFromPoints:r}),Ae.jsx("lineBasicMaterial",{attach:"material",color:n,linewidth:1,opacity:a?.8:.2,transparent:!0})]})},zf=(l,e)=>{const n=[],a=Math.PI*(3-Math.sqrt(6));for(let r=0;r<l;r++){const t=1-r/(l-1)*2,o=Math.sqrt(1-t*t),s=a*r,i=Math.cos(s)*o,c=Math.sin(s)*o;n.push(new Ge(i*e,t*e,c*e))}return n},Xf=()=>{const[l,e]=U.useState(null),n=U.useRef(),r=zf(Qn.length,2.5);return Xt(()=>{n.current&&(n.current.rotation.y+=.002)}),Ae.jsxs("group",{ref:n,children:[Ae.jsx(Kf,{}),Qn.map((t,o)=>Ae.jsx(Wf,{start:new Ge(0,0,0),end:r[o],color:t.color,visible:l===t.id},`line-${t.id}`)),Qn.map((t,o)=>Ae.jsx(jf,{position:r[o],icon:t,onHover:e,isHovered:l},t.id))]})},Qf=()=>Ae.jsx("div",{style:{width:"100%",height:"100vh"},children:Ae.jsx(ko,{gl:{alpha:!0},children:Ae.jsxs(U.Suspense,{fallback:null,children:[Ae.jsx("ambientLight",{intensity:.5}),Ae.jsx("pointLight",{position:[10,10,10],intensity:1}),Ae.jsx("spotLight",{position:[-10,10,10],angle:.3,penumbra:1,intensity:1}),Ae.jsx(Xf,{}),Ae.jsx(gi,{enableZoom:!0,autoRotate:!0,autoRotateSpeed:.5}),Ae.jsx(mi,{position:[0,0,6],makeDefault:!0})]})})}),Mo=({from:l,to:e,text:n})=>{const[a,r]=U.useState(l),t=U.useRef(),o=Po(t);return U.useEffect(()=>{const s=vc(l,e,{duration:4,ease:"easeOut",onUpdate:i=>{r(Math.floor(i))}});return()=>s.cancel()},[o,l,e]),Ae.jsxs("div",{className:"counter",ref:t,children:[Ae.jsxs("h1",{children:[a,"+"]}),Ae.jsx("p",{children:n})]})},Yf={initial:{x:-100,y:-100,opacity:0},animate:{x:0,y:0,opacity:1,transition:{duration:1}}},To={initial:{x:-100,opacity:0},animate:{x:0,opacity:1,transition:{duration:1,staggerChildren:.5}}},Vf=[{id:1,img:"/service1.png",title:"Web Development",counter:8,label:"Projects"},{id:2,img:"/service2.png",title:"Java Development",counter:8,label:"Projects"},{id:3,img:"/service3.png",title:"Skills",counter:14,label:"Skills"}],ah=()=>{const[l,e]=U.useState(1),n=U.useRef(),a=Po(n,{margin:"-200px"});return Ae.jsxs("div",{className:"services",ref:n,children:[Ae.jsxs("div",{className:"sSection left",children:[Ae.jsx(On.h1,{variants:Yf,animate:a?"animate":"initial",className:"sTitle",children:"How do I help?"}),Ae.jsx(On.div,{variants:To,animate:a?"animate":"initial",className:"serviceList",children:Vf.map(r=>Ae.jsxs(On.div,{variants:To,className:`service ${l===r.id?"active":""}`,onClick:()=>e(r.id),children:[Ae.jsx("div",{className:"serviceIcon",children:Ae.jsx("img",{src:r.img,alt:r.title})}),Ae.jsxs("div",{className:"serviceInfo",children:[Ae.jsx("h2",{children:r.title}),Ae.jsxs("h3",{children:[r.counter," ",r.label]})]})]},r.id))}),Ae.jsxs("div",{className:"counterList",children:[Ae.jsx(Mo,{from:0,to:15,text:"Projects Completed"}),Ae.jsx(Mo,{from:0,to:5,text:"Clients"})]})]}),Ae.jsx("div",{className:"sSection right",children:l===1?Ae.jsx(gf,{}):l===2?Ae.jsx(yf,{}):Ae.jsx(Qf,{})})]})};export{ah as default};
